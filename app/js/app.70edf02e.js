(function(t){function e(e){for(var s,o,r=e[0],c=e[1],l=e[2],d=0,p=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(p.length)p.shift()();return n.push.apply(n,l||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],s=!0,r=1;r<i.length;r++){var c=i[r];0!==a[c]&&(s=!1)}s&&(n.splice(e--,1),t=o(o.s=i[0]))}return t}var s={},a={app:0},n=[];function o(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=s,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(i,s,function(e){return t[e]}.bind(null,s));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/app/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;n.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"56d7":function(t,e,i){"use strict";i.r(e);i("4de4"),i("e260"),i("e6cf"),i("cca6"),i("a79d");var s=i("2b0e"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app"},[i("nav-view"),0!==t.currentTabId?i("nav-bar"):t._e(),i("popups"),i("push")],1)},n=[],o=(i("d3b7"),i("25f0"),i("5530")),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.loaderClass})},c=[],l=(i("c96a"),{name:"Loader",props:["small","extra-small"],computed:{loaderClass:function(){var t={"loader-circle":!0};return this.small&&(t["loader-circle_small"]=!0),this.extraSmall&&(t["loader-circle_extra-small"]=!0),t}}}),u=l,d=i("2877"),p=Object(d["a"])(u,r,c,!1,null,null,null),m=p.exports,h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"popups"},t._l(t.popups,(function(t){return i("popup",{key:t.id,attrs:{popup:t}})})),1)},f=[],_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"popup",staticClass:"popup",class:t.classes},[i("div",{staticClass:"popup__bg"}),i("div",{staticClass:"popup__content"},[i("component-view",{attrs:{component:t.popup.component,props:t.popup.props}})],1)])},v=[],g=(i("c975"),function(){var t=document.createElement("div"),e={animation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(var i in e)if(void 0!==t.style[i])return e[i]}()),b="Vendor/Android",C="Vendor/iOS";function y(){var t=navigator.userAgent;return-1!==t.indexOf(C)?1:-1!==t.indexOf(b)?2:3}var w={name:"Popup",props:["popup"],data:function(){return{hidden:!0,animationShow:!1,animationHide:!1}},computed:{classes:function(){var t={popup_hidden:this.hidden,"popup_animation-show":this.animationShow,"popup_animation-hide":this.animationHide};return this.popup.options.myClass&&(t[this.popup.options.myClass]=!0),t}},created:function(){var t=this;this.hidden=this.popup.options.showAnimated,this.popup.show=function(e){return e?t.showAnimated():(t.hidden=!1,new Promise((function(t){return t()})))},this.popup.hide=function(e){return void 0!==t.popup.component.hidePopupHandler&&t.popup.component.hidePopupHandler(),e?t.hideAnimated():(t.hidden=!0,new Promise((function(t){return t()})))}},mounted:function(){this.popup.options.showAnimated&&this.showAnimated()},methods:{onHide:function(){},showAnimated:function(){var t=this;return new Promise((function(e){t.hidden=!1,t.animationShow=!0;var i=function i(){t.$refs.popup&&t.$refs.popup.removeEventListener(g,i),t.animationShow=!1,e()};t.$refs.popup.addEventListener(g,i)}))},hideAnimated:function(){var t=this;return new Promise((function(e){t.hidden=!1,t.animationHide=!0;var i=function i(){t.$refs.popup&&t.$refs.popup.removeEventListener(g,i),t.animationHide=!1,t.hidden=!0,e()};t.$refs.popup.addEventListener(g,i)}))}}},k=w,x=Object(d["a"])(k,_,v,!1,null,null,null),P=x.exports,$={name:"Popups",components:{Popup:P},data:function(){return{}},computed:{popups:function(){return this.$store.state.popups.popups}}},O=$,S=Object(d["a"])(O,h,f,!1,null,null,null),j=S.exports,A=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.show?i("div",{staticClass:"push-notification-wrapper"},[i("div",{directives:[{name:"touch",rawName:"v-touch"}],ref:"notification",staticClass:"push-notification",class:[t.style],on:{click:t.onClick}},[t.ava?i("div",{staticClass:"push-notification__ava-wrapper"},[i("div",{staticClass:"push-notification__ava",style:{backgroundImage:"url("+t.ava+")"}})]):t._e(),i("div",{staticClass:"push-notification__content"},[t.title?i("div",{staticClass:"push-notification__title  ellipsis",domProps:{innerHTML:t._s(t.title)}}):t._e(),t.text?i("div",{staticClass:"push-notification__text",domProps:{innerHTML:t._s(t.text)}}):t._e()]),t.ico?i("div",{staticClass:"push-notification__ico-wrapper"},[i("div",{class:t.ico})]):t._e()])]):t._e()])},I=[],L=(i("a434"),i("d4ec")),N=i("bee2"),E=function(){function t(e){Object(L["a"])(this,t),this._parent=e,this._handlers={},this._namespaces={}}return Object(N["a"])(t,[{key:"on",value:function(t,e,i){this._handlers[t]||(this._handlers[t]=[]);var s=Object(o["a"])({callback:e},i);this._handlers[t].push(s)}},{key:"one",value:function(t,e){this.on(t,e,{one:1})}},{key:"off",value:function(t,e){for(var i in this._namespaces)this._namespaces[i].off(t,e);if(this._handlers[t])if(void 0!==e){for(var s=this._handlers[t],a=[],n=0;n<s.length;n++)s[n].callback===e&&a.push(n);for(var o=0;o<a.length;o++)s.splice(a[o]-o,1)}else this._handlers[t]=[]}},{key:"emit",value:function(t,e){if(this._handlers[t]){for(var i=this._handlers[t],s=[],a=i.length-1;a>=0;a--)i[a].callback(e),i[a]&&i[a].one&&s.push(a);for(var n=0;n<s.length;n++)i.splice(s[n]-n,1)}for(var o in this._namespaces)this._namespaces[o].emit(t,e)}},{key:"namespace",value:function(t){if(this.parent)throw new Error("Eventer: generic namespaces are not allowed!");return this._namespaces[t]||(this._namespaces[t]=new window.Eventer(this)),this._namespaces[t]}}]),t}(),T=new E;T.install=function(t){Object.defineProperty(t.prototype,"$push",{get:function(){return T}})};var M=T,U=i("aa4a"),F=(i("fb6a"),{});function R(t){if(F[t])return F[t];var e,i=["Moz","Webkit","Khtml","O","ms"],s=document.createElement("div").style,a=t.charAt(0).toUpperCase()+t.slice(1),n=i.length;if(t in s)return F[t]="";while(n--)i[n]+a in s&&(e=i[n]);return e?F[t]="-"+e.toLowerCase()+"-":t in s?F[t]="":void 0}var V=function(){function t(){Object(L["a"])(this,t),this.queue=[]}return Object(N["a"])(t,[{key:"next",value:function(t){t=q(t),this.queue.push(t),1===this.queue.length&&t().then(this._next.bind(this))}},{key:"_next",value:function(){this.queue.shift(),this.queue.length&&this.queue[0]().then(this._next.bind(this))}},{key:"clean",value:function(){this.queue=[]}}]),t}();function q(t){return function(){return new Promise((function(e){return t(e)}))}}var D={name:"Push",data:function(){return{show:!1,animating:!1,notificationObj:null,ava:null,ico:null,title:null,text:null,style:null,touched:!0}},created:function(){this.prefix=R("transform"),this.styleTransform=this.prefix+"transform",this.styleTransition=this.prefix+"transition",this.queue=new V,M.on("notification",this.handleNotification)},destroyed:function(){clearTimeout(this.autohideTimer)},methods:{onClick:function(){this.notificationObj&&this.hideNotification()},moveNotification:function(t,e){var i=this;return new Promise((function(s){e?(i.animating=!0,setTimeout((function(){i.$refs.notification.style[i.styleTransition]="all .3s ease-in-out",setTimeout((function(){i.$refs.notification.style[i.styleTransform]="translate3d(0, ".concat(t,", 0)"),setTimeout((function(){i.$refs.notification.style[i.styleTransition]="none",i.animating=!1,s()}),350)}))}),50)):(i.$refs.notification.style[i.styleTransform]="translate3d(0, ".concat(t,", 0)"),s())}))},hideNotification:function(){var t=this;return new Promise((function(e){t.show?t.moveNotification("-150%",!0).then((function(){t.show=!1,t.notificationObj=null,t.ava=null,t.title=null,t.text=null,t.ico=null,t.style=null,e()})):e()}))},handleNotification:function(t){switch(clearTimeout(this.autohideTimer),this.notificationObj=t,t.type){case"rating-rise":this.handleNotificationRatingRise(t.data);break;default:this.handleNotificationSimpleText(t.data);break}},handleNotificationSimpleText:function(t){var e=this;this.queue.next((function(i){e.hideNotification().then((function(){e.ava=t.ava,e.title=t.title,e.text=t.text,e.ico=t.ico,e.style=t.style,e.show=!0,e.type=null,e.moveNotification(0,!0).then((function(){e.setupGestures(),e.autohideTimer=setTimeout((function(){e.hideNotification()}),4e3),i()}))}))}))},handleNotificationRatingRise:function(t){var e=this;this.queue.next((function(i){e.hideNotification().then((function(){e.ava=null,e.title=t.title,e.text=t.text,e.ico=t.ico,e.style=t.style,e.show=!0,e.type="rating-rise",e.moveNotification(0,!0).then((function(){e.setupGestures(),e.autohideTimer=setTimeout((function(){e.hideNotification()}),4e3)})),i()}))}))},setupGestures:function(){var t,e,i=this,s=this,a=new U["GestureHandler"];a.onStart=function(){s.animating||(s.touched=!0,s.queue.next((function(i){return new Promise((function(s){t=s,e=i}))})))},a.onMove=function(t){if(!s.animating){var e=.4*t.getDiffY();s.moveNotification("".concat(e,"px"))}},a.onEnd=function(a){if(!s.animating){var n=a.getDiffY();n<0?i.hideNotification().then((function(){s.touched=!1,t&&(t(),t=null),e&&e()})):i.moveNotification(0,!0).then((function(){s.touched=!1,t&&(t(),t=null),e&&e()}))}};var n=new U["GestureRecognizer"](this.$refs.notification);n.addHandler(U["Gesture"].TYPE_VERTICAL,a)}}},H=D,B=Object(d["a"])(H,A,I,!1,null,null,null),G=B.exports,W=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"nav-bar"},t._l(t.tabs,(function(e,s){return i("nav-tab",{key:s,attrs:{item:e,isActive:t.currentTabId===e.id},nativeOn:{click:function(i){return t.$nav.push(e.link)}}})})),1)},z=[],Z=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"nav-tab ripple ripple_lightblue",class:{active:t.isActive}},[i("div",{staticClass:"nav-tab__ico"},[i("div",{class:[t.isActive?t.item.ico+"-active":""+t.item.ico]}),t.count>0?i("div",{staticClass:"nav-tab__count"},[t._v(t._s(t._f("counterLimit")(t.count)))]):t._e()])])},Y=[],J=i("2f62"),X={name:"NavTab",props:["item","isActive"],computed:Object(o["a"])({count:function(){return this.tabCounter(this.item.id)}},Object(J["c"])("feed",["tabCounter"]))},Q=X,K=Object(d["a"])(Q,Z,Y,!1,null,null,null),tt=K.exports,et=3,it=1,st=0,at=1,nt="m",ot="right",rt="tab_feed",ct="tab_incoming",lt="tab_messenger",ut="tab_profile",dt=0,pt="placement_feed",mt="Chat Request Limit",ht="My Profile",ft="Disable Ads",_t="android",vt="ru_RU",gt="ru_RU",bt=["ru_RU"],Ct=1,yt=2,wt=1,kt=2,xt=3,Pt={name:"NavBar",components:{NavTab:tt},data:function(){return{tabs:[{link:"/app/messenger",id:lt,ico:"ico-nav ico-nav_message"},{link:"/app/feed",id:rt,ico:"ico-nav ico-nav_meet"},{link:"/app/incoming",id:ct,ico:"ico-nav ico-nav_symp"},{link:"/app/profile",id:ut,ico:"ico-nav ico-nav_profile"}]}},computed:Object(o["a"])({},Object(J["e"])(["currentTabId"]))},$t=Pt,Ot=Object(d["a"])($t,W,z,!1,null,null,null),St=Ot.exports,jt={},At={},It=0;window.webviewBridgeJs={invokeMethod:function(t,e){"function"==typeof jt[t]&&jt[t].call(this,e)},callback:function(t,e){"function"==typeof At[t]&&(At[t].call(this,e),delete At[t])},goBack:function(){history.back()}};var Lt={registerMethod:function(t,e){jt[t]=e},invokeNative:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i&&(At[++It]=i),window.webviewBridgeNative&&"function"==typeof window.webviewBridgeNative.invokeMethod&&window.webviewBridgeNative.invokeMethod(t,JSON.stringify(e),i?It:0)},isSupported:function(){return!!window.webviewBridgeNative}},Nt=function(t,e,i){switch(t){case"get_api_host":window.webviewBridgeJs.callback(i,{api_url:"https://cloud.sweetmeet.me/oapi/method/"});break;case"get_prices":window.webviewBridgeJs.callback(i,[{id:e.products[0],price:"$1.49",value:1.49,currency:"$"}]);break;case"buy":window.webviewBridgeJs.callback(i,{success:!0});break;case"get_location":window.webviewBridgeJs.callback(i,{coordinates:{lat:59.956428800000005,lon:30.3439872}});break;case"get_location_permission":window.webviewBridgeJs.callback(i,{permission:"unknown"});break}};window.webviewBridgeNative={invokeMethod:function(t,e,i){console.log("invokeMethod",t,e,i),e=JSON.parse(e),Nt(t,e,i)}};i("a9e3");var Et,Tt,Mt,Ut,Ft,Rt=i("bc3a"),Vt=i.n(Rt),qt=(i("a4d3"),i("e01a"),i("d28b"),i("3ca3"),i("ddb0"),i("a15b"),function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e.join("&")}),Dt={install:function(t){Object.defineProperty(t.prototype,"$api",{get:function(){return Dt}})},init:function(t){var e=t.apiUrl;Tt=t.token,Mt=t.vendor,Ut=t.appVersionName,Ft=Number(t.appVersionCode);var i={method:"POST",baseURL:"".concat(e,"/"),timeout:6e4,params:{},withCredentials:!0};Et=Vt.a.create(i)},get:function(t,e){var i=t;return e=Object(o["a"])({access_token:Tt,vendor:Mt,appVersionName:Ut,appVersionCode:Ft},e),e&&(-1===i.indexOf("?")?i+="?"+qt(e):i+="&"+qt(e)),Et.get(i).then(Ht).catch(Bt)},post:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e=Object(o["a"])({access_token:Tt,vendor:Mt,appVersionName:Ut,appVersionCode:Ft},e),i?Et.post(t,e):Et.post(t,e).then(Ht).catch(Bt)}};function Ht(t){}function Bt(t){t.response;console.log(t)}var Gt,Wt=Dt,zt=(i("45fc"),!1),Zt={init:function(t){Gt=t},show:function(){var t=oe.state.vip.hasVip;!Gt||t||zt||(Lt.invokeNative("change_bottom_banner_state",{isShow:!0,placeId:Gt.place_id,params:Gt.params}),zt=!0,oe.commit("setBannerVisible",!0))},hide:function(){Gt&&(Lt.invokeNative("change_bottom_banner_state",{isShow:!1,placeId:Gt.place_id,params:Gt.params}),zt=!1,oe.commit("setBannerVisible",!1))}},Yt=Zt,Jt={namespaced:!0,state:{popups:[]},getters:{},mutations:{addPopup:function(t,e){t.popups.push(e)},removePopup:function(t,e){for(var i=0;i<t.popups.length;i++)if(t.popups[i]===e){t.popups.splice(i,1);break}}},actions:{openPopup:function(t,e){var i=t.state,s=t.commit,a=e.popup,n=e.animated;a.options.showAnimated=n,s("addPopup",a);var o=i.popups,r=o.some((function(t){return t.options&&t.options.myClass&&"popup_extend"===t.options.myClass&&!t.options.ignoreBottomBanner}));r&&Yt.hide()},closePopup:function(t,e){for(var i=t.state,s=t.commit,a=e.popup,n=e.animated,o=e.onClose,r=i.popups,c=0;c<r.length;c++)if(r[c]===a){r[c].hide(n).then((function(){s("removePopup",a);var t=r.some((function(t){return t.options&&t.options.myClass&&"popup_extend"===t.options.myClass&&!t.options.ignoreBottomBanner}));t||Yt.show(),o&&o()}));break}}}},Xt={namespaced:!0,state:{visibleCards:[],isLoading:!1,filter:null,moderationStatus:0,dailyOpenLimit:0,feedLimit:null,counters:{chat:0,events:{incoming:0,mutual:0}},viewedCards:0,viewedCardsAfterPhotoRequest:0,requestPhotoChains:[5,17],requestPhotoChainsIndex:0,likeActionLocked:!1,suggestions:[]},getters:{hasCards:function(t){return t.visibleCards.length>0},currentCard:function(t,e){return e.hasCards?t.visibleCards[0]:null},totalNewNotify:function(t){return t.counters.event.new+t.counters.mutual.new},isEmpty:function(t,e){return!t.isLoading&&!e.hasCards},hasLimit:function(t,e){return null!=t.feedLimit&&e.isEmpty},needUploadPhoto:function(t){return t.moderationStatus===st||t.moderationStatus===at},numCardsBeforeRequestPhoto:function(t){return t.requestPhotoChains[t.requestPhotoChainsIndex]},tabCounter:function(t,e){return function(e){switch(e){case ct:return t.counters.events.incoming;case lt:return t.counters.events.mutual+t.counters.chat;case ut:return 0}return 0}},numNotify:function(t){return t.counters.events.incoming+t.counters.events.mutual+t.counters.chat},canOpenDialog:function(t){return t.dailyOpenLimit>0},hasSupportAnswer:function(t){return 0}},mutations:{addCard:function(t,e){t.visibleCards.length<3&&t.visibleCards.push(e)},removeCurrentCard:function(t){t.visibleCards.shift()},removeCardById:function(t,e){t.visibleCards=t.visibleCards.filter((function(t){return t.id!==e}))},clear:function(t){t.visibleCards.splice(0,t.visibleCards.length)},setLoading:function(t,e){t.isLoading=e},setCounters:function(t,e){t.counters=e},decreaseCounter:function(t,e){t.counters[e]&&t.counters[e]--},decreaseEventsCounter:function(t,e){t.counters.events[e]&&t.counters.events[e]--},setFilter:function(t,e){t.filter=e},setModerationStatus:function(t,e){t.moderationStatus=e},setDailyOpenLimit:function(t,e){t.dailyOpenLimit=e},setFeedLimit:function(t,e){t.feedLimit=e},resetFeedLimit:function(t){t.feedLimit=null},incrementViewedCards:function(t){t.viewedCards++,t.viewedCardsAfterPhotoRequest++},resetPhotoRequestCounter:function(t){t.viewedCardsAfterPhotoRequest=0,t.requestPhotoChainsIndex<t.requestPhotoChains.length-1&&t.requestPhotoChainsIndex++},setPhotoRequestInterval:function(t,e){t.requestPhotoChains=e},lockLikeAction:function(t){t.likeActionLocked=!0},unlockLikeAction:function(t){t.likeActionLocked=!1}},actions:{init:function(t,e){var i=t.commit;i("setModerationStatus",e.avatar_status),e.feed&&e.feed.photo_request_interval&&i("setPhotoRequestInterval",e.feed.photo_request_interval)}}},Qt={namespaced:!0,state:{hasVip:!1,purchaseOffer:null,trial:null},getters:{trialIsAvailable:function(t){return null!=t.trial}},mutations:{setVip:function(t,e){t.hasVip=e},setPurchaseOffer:function(t,e){t.purchaseOffer=e},setTrial:function(t,e){t.trial=e}},actions:{init:function(t,e){var i=t.commit;i("setVip",e.has_vip),e.vip_offers&&(i("setPurchaseOffer",e.vip_offers.purchase),i("setTrial",e.vip_offers.trial))}}},Kt={namespaced:!0,state:{showLoader:!1,placements:{ios:{feed:52853,profile:52854,banner:52854},android:{feed:53125,profile:53124,banner:52854}}},getters:{placementIds:function(t){switch(y()){case Ct:return t.placements.ios;case yt:default:return t.placements.android}}},mutations:{showLoader:function(t){t.showLoader=!0},hideLoader:function(t){t.showLoader=!1}}},te=(i("99af"),i("2909")),ee={dataSource:null,userId:0},ie=ee,se={namespaced:!0,state:{contacts:[],contactsOffset:0,contactsLimit:20,contactsExtraParams:{},contactsIsLoading:!1,contactsHasNext:!0,openedContact:null,openedContactAllowedToCorrespond:!0,messages:[],messagesLimit:20,messagesHasPrev:!0,messagesIsLoading:!1,messageIsSending:!1},getters:{contactsRequestParams:function(t){return Object(o["a"])({offset:t.contactsOffset,limit:t.contactsLimit},t.contactsExtraParams)},messagesRequestParams:function(t){var e={limit:t.messagesLimit,contactId:t.openedContact.id};return t.messages.length?e.before_time_id=t.messages[0].id:e.offset=0,e},getContactById:function(t){return function(e){for(var i=0;i<t.contacts.length;i++)if(parseInt(t.contacts[i].id)===e)return t.contacts[i]}}},mutations:{addNewContact:function(t,e){t.contacts=[e].concat(Object(te["a"])(t.contacts))},cleanMessages:function(t){t.messages=[],t.messagesOffset=0,t.messagesIsLoading=!1,t.messageIsSending=!1,t.messagesHasPrev=!0,t.openedContactAllowedToCorrespond=!0},readMineMessages:function(t,e){t.openedContact&&e===t.openedContact.id&&(t.openedContact.unread=!1);var i=!0,s=!1,a=void 0;try{for(var n,o=t.contacts[Symbol.iterator]();!(i=(n=o.next()).done);i=!0){var r=n.value;r.id==e&&(r.unread=!1)}}catch(c){s=!0,a=c}finally{try{i||null==o.return||o.return()}finally{if(s)throw a}}},resetNewCounter:function(t,e){t.openedContact&&e===t.openedContact.id&&(t.openedContact["new"]=0);for(var i=0;i<t.contacts.length;i++)if(t.contacts[i].id===e){s["default"].set(t.contacts[i],"new",0);break}}},actions:{loadContactsBatch:function(t){if(t.state.contactsHasNext)return t.state.contactsIsLoading=!0,ie.dataSource.getContacts(t.getters.contactsRequestParams).then((function(e){var i;(i=t.state.contacts).push.apply(i,Object(te["a"])(e.contacts)),t.state.contactsIsLoading=!1,t.state.contactsOffset+=t.state.contactsLimit,t.state.contactsHasNext=e.hasNext}))},loadContactsWithNewExtraParams:function(t,e){return t.state.contactsExtraParams=e,t.state.contacts=[],t.state.contactsHasNext=!0,t.state.contactsOffset=0,t.dispatch("loadContactsBatch")},loadMessagesBatch:function(t){if(t.state.messagesHasPrev)return t.state.messagesIsLoading=!0,ie.dataSource.getMessages(t.state.openedContact,t.getters.messagesRequestParams).then((function(e){var i;(i=t.state.messages).unshift.apply(i,Object(te["a"])(e.messages)),t.state.messagesIsLoading=!1,t.state.messagesHasPrev=e.hasPrev}))},addNewMessage:function(t,e){for(var i,a=e.contactId,n=e.message,o=0;o<t.state.contacts.length;o++)if(parseInt(t.state.contacts[o].id)===a){i=t.state.contacts[o],t.state.contacts.splice(o,1);break}if(i.lastmess=n,n.author_id===a){var r=i.new;s["default"].set(i,"new",r+1)}n.author_id===ie.userId&&t.state.openedContact&&(t.state.openedContact.has_my_messages=!0),t.state.contacts=[i].concat(Object(te["a"])(t.state.contacts)),t.state.openedContact&&parseInt(t.state.openedContact.id)===a&&(t.state.messages.push(n),t.state.openedContact.lastmess=n,t.state.openedContact.unread=n.author_id!==a,n.author_id===a&&t.dispatch("markReaded",a))},postMessage:function(t,e){return ie.dataSource.postMessage(Object(o["a"])({contactId:t.state.openedContact.id},e))},openContact:function(t,e){t.commit("cleanMessages"),t.state.openedContact=e},closeContact:function(t){t.commit("cleanMessages"),t.state.openedContact=null},markReaded:function(t,e){return ie.dataSource.markReaded(e).then((function(){t.commit("resetNewCounter",e)}))},removeContact:function(t,e){return ie.dataSource.removeContact(e).then((function(){t.state.openedContact&&e===t.state.openedContact.id&&t.dispatch("closeContact");for(var i=0;i<t.state.contacts.length;i++){if(t.state.contacts[i].id===e){t.state.contacts.splice(i,1);break}t.state.contacts=Object(te["a"])(t.state.contacts)}}))}}},ae=(i("b0c0"),{namespaced:!0,state:{name:"",gender:"m",age:0,cityName:"",cityId:""},getters:{params:function(t){return Object(o["a"])({},t)}},mutations:{setGender:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m";t.gender=e},setAge:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18;t.age=e},setName:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t.name=e},setCityId:function(t,e){t.cityId=e},setCityName:function(t,e){t.cityName=e}},actions:{}}),ne={namespaced:!0,state:{apiUrl:"",token:"",deviceId:"",assistId:"",supportId:"",appVersionCode:"",appVersionName:"",locale:"",vendor:""},getters:{},mutations:{setApiUrl:function(t,e){t.apiUrl=e},setToken:function(t,e){t.token=e},setAssistId:function(t,e){t.assistId=e},setSupportId:function(t,e){t.supportId=e},setAppVersionCode:function(t,e){t.appVersionCode=e},setAppVersionName:function(t,e){t.appVersionCode=e},setLocale:function(t,e){t.locale=e},setDeviceId:function(t,e){t.deviceId=e},setVendor:function(t,e){t.vendor=e}},actions:{setConfig:function(t){var e=t.commit,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e("setApiUrl",i.apiUrl),e("setToken",i.token),e("setAssistId",i.assistId),e("setSupportId",i.supportId),e("setAppVersionName",i.appVersionName),e("setAppVersionCode",i.appVersionCode),e("setLocale",i.locale),e("setVendor",i.vendor),e("setDeviceId",i.deviceId)}}};s["default"].use(J["a"]);var oe=new J["a"].Store({state:{config:null,currentUser:{id:100,name:"me",gender:"m",age:"31",avatars:{s1:"https://sun9-21.userapi.com/c847220/v847220850/ad672/5Luku6GutMw.jpg",s2:"https://sun9-21.userapi.com/c847220/v847220850/ad672/5Luku6GutMw.jpg",s3:"https://sun9-21.userapi.com/c847220/v847220850/ad672/5Luku6GutMw.jpg",s4:"https://sun9-21.userapi.com/c847220/v847220850/ad672/5Luku6GutMw.jpg",s5:"https://sun9-21.userapi.com/c847220/v847220850/ad672/5Luku6GutMw.jpg"}},currentTabId:0,bannerIsShown:!0},getters:{},mutations:{setNavigationTab:function(t,e){t.currentTabId=e},setBannerVisible:function(t,e){t.bannerIsShown=e},setCurrentUser:function(t,e){t.currentUser=e},updateUserAvatar:function(t,e){t.currentUser.avatars=e}},actions:{},modules:{popups:Jt,feed:Xt,vip:Qt,interstitials:Kt,messenger:se,signup:ae,common:ne}});function re(t){return new Promise((function(t,e){setTimeout((function(){t({status:1,data:{list:[{new:10,user:{id:1,name:"Name",online:!0,avatars:{s2:"//im0-tub-ru.yandex.net/i?id=ec20567ec262c7f41fe5232f2c538cff&n=13"}},lastmess:{time:100,text:"sdasdkajs dhsad hjksajhdsk "}},{user:{id:2,name:"Name 2",online:!0,avatars:{s2:"//im0-tub-ru.yandex.net/i?id=ec20567ec262c7f41fe5232f2c538cff&n=13"}},lastmess:{attaches:[{type:"image"}],time:100,text:"ksdhasjkd jdhadk jahd kjsahdajs dhasdkh sdasdkajs dhsad hjksajhdsk "}},{user:{id:3,name:"Name 3",online:!1,avatars:{s2:"https://im0-tub-ru.yandex.net/i?id=aaa0c700a686125e286e3d2aac86fd91&n=33&w=225&h=150"}},lastmess:{fromId:111,time:100,text:"hi"}},{new:3,user:{id:3,name:"Name 3",online:!1,avatars:{s2:"https://im0-tub-ru.yandex.net/i?id=aaa0c700a686125e286e3d2aac86fd91&n=33&w=225&h=150"}},lastmess:{fromId:111,time:100,text:"hi"}}]}})}),200)}))}function ce(t){return new Promise((function(t,e){setTimeout((function(){t({status:1,data:{has_my_messages:!0,user:{id:1,name:"Name",age:21,gender:"f",online:!0,avatars:{s1:"//im0-tub-ru.yandex.net/i?id=ec20567ec262c7f41fe5232f2c538cff&n=13",s2:"//im0-tub-ru.yandex.net/i?id=ec20567ec262c7f41fe5232f2c538cff&n=13",s5:"//im0-tub-ru.yandex.net/i?id=ec20567ec262c7f41fe5232f2c538cff&n=13"}},lastmess:{time:100,text:"sdasdkajs dhsad hjksajhdsk "}}})}),200)}))}function le(t){return new Promise((function(t,e){setTimeout((function(){t({status:1,meta:{has_next:!1},data:{messages:[{author_id:112,id:11,text:"sadsadsa dajkdh",time:12111},{author_id:112,id:12,text:"sadsadsa dajkdh",time:12111},{author_id:111,id:13,text:"sadsadsa dajkdh",time:12111},{author_id:111,id:112,text:"sadsadsa dajkdh",time:121111},{author_id:111,id:113,text:"sadsadsa dajkdh",time:12111,attaches:[{type:"photo",url_min:"//im0-tub-ru.yandex.net/i?id=ec20567ec262c7f41fe5232f2c538cff&n=13",url_orig:"//im0-tub-ru.yandex.net/i?id=ec20567ec262c7f41fe5232f2c538cff&n=13"}]},{author_id:112,id:115,text:"gift",time:12111,attaches:[{type:"gift",url_min:"https://st.fotocdn.net/images/gifts/146/14611/150.png",url_orig:"https://st.fotocdn.net/images/gifts/146/14611/150.png"}]},{author_id:111,id:114,text:"sadsadsa dajkdh",time:1211111}]}})}),200)}))}function ue(t){return Wt.post("api/chat/postMessage",t).then(pe)}function de(t){return Wt.post("api/chat/readAll",t).then(pe)}function pe(t){return t.meta&&(t.meta.counters&&oe.commit("feed/setCounters",t.meta.counters),void 0!==t.meta.daily_open_limit&&oe.commit("feed/setDailyOpenLimit",t.meta.daily_open_limit)),t}var me={getContacts:function(t){return re(t).then((function(t){return{contacts:t.data.list,hasNext:t.data.has_next}}))},getContact:function(t){return ce({contactId:t}).then((function(t){return{contact:t.data}}))},getMessages:function(t,e){return le(e).then((function(e){var i={messages:[],hasPrev:!1};return i.hasPrev=e.meta.has_next,i.messages=e.data.messages,t.mutual_ts&&!i.hasPrev&&i.messages.push(he(t)),i.messages.reverse(),i}))},postMessage:function(t){return ue(t)},markReaded:function(t){return de({contactId:t})},removeContact:function(t){var e=new FormData;return e.append("id",t),e.append("clear_history",1),e.append("action",2),post("/usercontact_chat/remove_contact/",e)}};function he(t){var e={id:"mutual"};return e.mutual_ts=t.mutual_ts,e}var fe,_e,ve=new s["default"],ge=ve,be=3,Ce={init:function(t){fe=t.chat_ws,ye()},checkConnection:function(){_e&&_e.readyState!==be||ye()}};function ye(){try{_e=new WebSocket(fe),_e.onopen=function(){},_e.onclose=function(){},_e.onerror=function(t){console.log("socket.onerror",t)},_e.onmessage=we,window.ts=_e}catch(t){console.log("Socket connect error",t)}}function we(t){var e=JSON.parse(t.data);switch(e.body.type){case"newmsg":ke(e);break;case"read":xe(e);break}}function ke(t){var e=t.body.message,i=Object(o["a"])({id:e.time_id,author_id:e.from_id,time:e.time},e.data),s=e.from_id===parseInt(ie.userId)?e.to_id:e.from_id,a=oe.getters["messenger/getContactById"](s);a?oe.dispatch("messenger/addNewMessage",{contactId:s,message:i}):me.getContact(s).then((function(t){var e=t.contact;ge.$emit("updateCouple",e);var a=!0;e.mutual_ts&&(e.has_my_messages?ge.$emit("removeCouple",s):a=!1),a&&(oe.commit("messenger/addNewContact",e),oe.dispatch("messenger/addNewMessage",{contactId:s,message:i}))}))}function xe(t){var e=t.body.contact;e.contact_id===ie.userId&&oe.commit("messenger/readMineMessages",e.user_id)}var Pe=i("a78e"),$e=i.n(Pe);function Oe(){return Wt.get("api/profile/getProfile")}function Se(t){return Wt.get("api/profile/saveField",t)}function je(t){return Wt.post("api/profile/photoUpload",t).then(Le)}function Ae(t){return Wt.get("api/profile/photoDelete",t).then(Le)}function Ie(t){return Wt.get("api/profile/setAvatar",t).then(Le)}function Le(t){return t.meta&&(void 0!==t.meta.avatar_status&&oe.commit("feed/setModerationStatus",t.meta.avatar_status),void 0!==t.meta.avatars&&oe.commit("updateUserAvatar",t.meta.avatars)),t}var Ne={name:"app",components:{Loader:m,NavBar:St,Popups:j,Push:G},data:function(){return{cookie:""}},computed:Object(o["a"])({},Object(J["e"])(["currentTabId","bannerIsShown"]),{},Object(J["e"])("feed",["moderationStatus"]),{},Object(J["c"])("feed",["numNotify"])),methods:Object(o["a"])({},Object(J["b"])("common",["setConfig"])),created:function(){var t=$e.a.get("apiUrl"),e=$e.a.get("assistId"),i=$e.a.get("supportId"),s=$e.a.get("token"),a=$e.a.get("appVersionName"),n=$e.a.get("appVersionCode"),o=$e.a.get("locale"),r=$e.a.get("vendor"),c=$e.a.get("deviceId");this.setConfig({apiUrl:t,assistId:e,supportId:i,token:s,appVersionName:a,appVersionCode:n,locale:o,vendor:r,deviceId:c}),this.$api.init({apiUrl:t,token:s,vendor:r,deviceId:c,appVersionCode:n,appVersionName:a}),ie.userId=111,ie.dataSource=me},watch:{moderationStatus:function(t){},numNotify:function(t){Lt.invokeNative("set_badge",{value:t.toString()})}}},Ee=Ne,Te=Object(d["a"])(Ee,a,n,!1,null,null,null),Me=Te.exports,Ue=i("a925"),Fe=i("a8e2");s["default"].use(Ue["a"]);var Re=new Ue["a"]({locale:vt,fallbackLocale:gt,messages:{ru_RU:Fe}}),Ve=i("dd66"),qe=i.n(Ve),De=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"meeting-feed"},[t.hasMainPhoto?t._e():[i("promo-photo")],t.hasMainPhoto?[i("waiters")]:t._e(),t.isEmpty?i("empty-feed",{on:{filterMode:t.showFilter}}):[i("cards",{attrs:{cards:t.visibleCards},on:{likeAction:t.handleLikeAction,dislikeAction:t.handleDislikeAction,hideCard:t.removeCardFromDeck}})],i("transition",{attrs:{name:"fade"}},[t.filterMode?i("filter-setting",{on:{close:function(e){t.filterMode=!1}}}):t._e()],1)],2)},He=[],Be=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"settings"},[i("div",{staticClass:"settings__button",on:{click:function(e){return t.$emit("filterMode")}}},[t._v(t._s(t.$t("setting.filters"))+" "),i("i",{staticClass:"ico ico_sort"})])])},Ge=[],We={name:"Settings"},ze=We,Ze=Object(d["a"])(ze,Be,Ge,!1,null,null,null),Ye=Ze.exports,Je=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cards"},[t.isCardsLoading?i("div",{staticClass:"loader-wrap loader-wrap-inside"},[i("loader")],1):t._e(),i("div",{staticClass:"cards__list"},t._l(t.cards,(function(e,s){return i("card",{key:e.id,attrs:{card:e,"is-current":0===s},on:{likeAction:function(e){return t.$emit("likeAction")},dislikeAction:function(e){return t.$emit("dislikeAction")},hideCard:function(e){return t.$emit("hideCard")},clickProfile:t.handleClickProfile}})})),1)])},Xe=[],Qe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.showing?i("div",{ref:"interactElement",staticClass:"card-item",class:{"card-item__is-current":t.isCurrent,"card-item__animated":t.interactAnimating},style:{transform:t.transformString}},[i("div",{staticClass:"card-item__photo",style:{backgroundImage:"url("+t.photoUrl+")"},on:{click:function(e){return t.$emit("clickProfile")}}}),i("div",{staticClass:"card-item__indicator card-item__indicator_like",style:t.indicatorLineStyles.like}),i("div",{staticClass:"card-item__indicator card-item__indicator_dislike",style:t.indicatorLineStyles.dislike}),i("div",{staticClass:"card-item__ico card-item__ico_like",style:t.isDraggedRight&&t.indicatorStyles}),i("div",{staticClass:"card-item__ico card-item__ico_dislike",style:t.isDraggedLeft&&t.indicatorStyles}),i("div",{staticClass:"card-item__extra"},[i("card-info",{attrs:{card:t.card},nativeOn:{click:function(e){return t.$emit("clickProfile")}}})],1),i("card-actions",{style:t.actionStyles,on:{like:t.likeAction,dislike:t.dislikeAction}}),t.card.additional_data?i("div",{staticClass:"card-item__additional",domProps:{innerHTML:t._s(t.card.additional_data)}}):t._e()],1):t._e()},Ke=[],ti=(i("f00c"),i("5014")),ei=i.n(ti),ii={data:function(){var t=void 0!==window?window.outerWidth:500;return{interactAnimating:!0,interactDragged:null,interactMaxRotation:0,interactLockXAxis:!1,interactLockYAxis:!1,interactLockSwipeLeft:!1,interactPosition:{x:0,y:0,rotation:0},interactOutOfSightXCoordinate:t,interactOutOfSightYCoordinate:600,interactYThreshold:150,interactXThreshold:100}},computed:{transformString:function(){if(!this.interactAnimating||this.interactDragged){var t=this.interactPosition,e=t.x,i=t.y,s=t.rotation;return"translate3D(".concat(e,"px, ").concat(i,"px, 0) rotate(").concat(s,"deg)")}return null}},mounted:function(){var t=this,e=this.$refs.interactElement;ei()(e).draggable({ignoreFrom:"button, .ignore-form",onstart:function(){t.interactAnimating=!1},onmove:function(e){var i=0,s=t.interactLockSwipeLeft&&t.interactPosition.x<=0&&e.dx<0;i=s||t.interactLockXAxis?0:(t.interactPosition.x||0)+e.dx;var a=t.interactLockYAxis?0:(t.interactPosition.y||0)+e.dy,n=t.interactMaxRotation*(i/t.interactXThreshold);n>t.interactMaxRotation?n=t.interactMaxRotation:n<-t.interactMaxRotation&&(n=-t.interactMaxRotation),t.interactSetPosition({x:i,y:a,rotation:n},!0)},onend:function(){var e=t.interactPosition,i=e.x,s=(e.y,t.interactXThreshold);t.interactAnimating=!0,i>s?t.draggedRight():i<-s?t.draggedLeft():t.interactSetPosition({x:0,y:0,rotation:0})}})},methods:{draggedRight:function(){},draggedLeft:function(){},interactSetPosition:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t.x,s=t.y,a=t.rotation;Number.isFinite(i)&&(this.interactPosition.x=i),Number.isFinite(s)&&(this.interactPosition.y=s),Number.isFinite(a)&&(this.interactPosition.rotation=a),this.$emit("drag",Object(o["a"])({},this.interactPosition,{isDragging:e}))},interactUnsetElement:function(){ei()(this.$refs.interactElement).unset(),this.interactDragged=!0}}},si=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card-info"},[i("div",{staticClass:"card-info__name-wrap ignore-form"},[i("div",{staticClass:"ellipsis"},[t.card.is_online?i("span",{staticClass:"online-status"}):t._e(),t._v(t._s(t.card.name)+" ")]),t.card.age?i("div",{staticClass:"card-info__age"},[t._v(", "+t._s(t.card.age))]):t._e()])])},ai=[],ni={name:"CardInfo",props:["card"]},oi=ni,ri=Object(d["a"])(oi,si,ai,!1,null,null,null),ci=ri.exports,li=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card-actions"},[i("button",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"card-actions__btn card-actions__btn_no ignore-form",on:{click:function(e){return t.$emit("dislike")}}},[i("span",{staticClass:"card-actions__ico"},[i("dislike-icon")],1)]),i("button",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"btn btn_turquoise card-actions__btn card-actions__btn_text card-actions__btn_care ignore-form",on:{click:function(e){return t.$emit("like")}}},[t._v(" "+t._s(t.$t("card.care"))+" ")])])},ui=[],di={functional:!0,render(t,e){const{_c:i,_v:s,data:a,children:n=[]}=e,{class:o,staticClass:r,style:c,staticStyle:l,attrs:u={},...d}=a;return i("svg",{class:[o,r],style:[c,l],attrs:Object.assign({width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u),...d},n.concat([i("path",{attrs:{d:"M23.667 2.333L2.333 23.666M2.333 2.333l21.334 21.333",stroke:"#E3E0EF","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"}})]))}},pi={name:"CardActions",components:{DislikeIcon:di}},mi=pi,hi=Object(d["a"])(mi,li,ui,!1,null,null,null),fi=hi.exports;function _i(t){for(var e=[],i=Math.floor(1e3*Math.random()),s=0;s<10;s++)e.push({name:"user random "+(i+s),id:i+s,gender:Math.random()>.5?"m":"f",age:i,is_online:!0,avatars:{s5:"https://sun9-10.userapi.com/c851320/v851320058/1386fd/Zrp4BcCGR8U.jpg"}});return new Promise((function(t,i){setTimeout((function(){t({users:e,hasNext:!0})}),200)}))}function vi(t){return new Promise((function(t,e){setTimeout((function(){t({status:"",data:{user:{id:112,name:"sadasda",gender:"f",avatars:{s1:"",s2:"",s3:"",s4:""},photos:[]}}})}),200)}))}function gi(t){return new Promise((function(t,e){setTimeout((function(){t({})}),200)}))}function bi(t){return new Promise((function(t,e){setTimeout((function(){t({})}),200)}))}function Ci(t){return new Promise((function(t,e){setTimeout((function(){t({})}),200)}))}function yi(t,e){return new Promise((function(t,e){setTimeout((function(){t({name:"City Name finded by geo",id:1})}),200)}))}function wi(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var t=[],e=Math.floor(100*Math.random()),i=Math.floor(100*Math.random()),s=0;s<20;s++)t.push({name:"City random "+(e+s),id:e+s,countryName:"Country random "+(i+s),countryId:i+s});return new Promise((function(e,i){setTimeout((function(){e(t)}),1e3)}))}function ki(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((function(t,e){setTimeout((function(){t()}),1e3)}))}i("b64b");var xi=i("99de"),Pi=i("7e84"),$i=i("262e"),Oi=function(){function t(e,i){Object(L["a"])(this,t),this.buffer=e||[],this.autoload=i,this.loading=!1,this.waiters=[],this.broken=!1,this.previousBufferIds={};var s=!0,a=!1,n=void 0;try{for(var o,r=this.buffer[Symbol.iterator]();!(s=(o=r.next()).done);s=!0){var c=o.value;this.previousBufferIds[c.id]=!0}}catch(l){a=!0,n=l}finally{try{s||null==r.return||r.return()}finally{if(a)throw n}}}return Object(N["a"])(t,[{key:"getNextItem",value:function(t){var e=this;if(this.loading){var i=new Promise((function(t,i){e.waiters.push({resolve:t,reject:i})}));t({status:"loading",promise:i})}else if(this.broken&&!this.buffer.length)t({status:"broken"});else if(this.buffer.length)t({status:"default",item:this.buffer.shift()}),this.buffer.length||!this.autoload||this.broken||this._load();else{var s=new Promise((function(t,i){e.waiters.push({resolve:t,reject:i})}));t({status:"loading",promise:s}),this._load()}}},{key:"load",value:function(t){throw Error("BufferedDataSource: load() method desn't implemented")}},{key:"_load",value:function(){var t=this;this.loading||(this.loading=!0,this.load(++this.page).then((function(e){t.loading=!1;var i=!0,s=!1,a=void 0;try{for(var n,o=e.buffer[Symbol.iterator]();!(i=(n=o.next()).done);i=!0){var r=n.value;t.previousBufferIds[r.id]||t.buffer.push(r)}}catch(h){s=!0,a=h}finally{try{i||null==o.return||o.return()}finally{if(s)throw a}}t.previousBufferIds={};var c=!0,l=!1,u=void 0;try{for(var d,p=e.buffer[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var m=d.value;t.previousBufferIds[m.id]=!0}}catch(h){l=!0,u=h}finally{try{c||null==p.return||p.return()}finally{if(l)throw u}}t.broken=!e.hasNext,t._onLoadSuccess()})).catch((function(){t.loading=!1,t.broken=!0,t._onLoadFail()})))}},{key:"_onLoadSuccess",value:function(){while(this.buffer.length&&this.waiters.length){var t=this.buffer.shift(),e=this.waiters.shift();e.resolve(t)}this.waiters.length&&this._load()}},{key:"_onLoadFail",value:function(){for(var t=0;t<this.waiters.length;t++)this.waiters[t].reject();this.waiters=[]}}]),t}(),Si=function(t){function e(t){return Object(L["a"])(this,e),Object(xi["a"])(this,Object(Pi["a"])(e).call(this,t||[],!0))}return Object($i["a"])(e,t),Object(N["a"])(e,[{key:"load",value:function(t){var e=this;return new Promise((function(t,i){oe.commit("feed/setLoading",!0),_i({include:"photos,interests",exclude_ids:e.getBufferIds()}).then((function(e){oe.commit("feed/setLoading",!1),e.users&&e.users.length>0?t({buffer:e.users,hasNext:!0}):i()})).catch(i)}))}},{key:"getBufferIds",value:function(){return Object.keys(this.previousBufferIds)}}]),e}(Oi),ji=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main-photo extend",style:{backgroundImage:"url("+t.photoUrl+")"}},[i("div",{staticClass:"main-photo__content"},[i("div",{staticClass:"main-photo__message"},[i("i",{staticClass:"ico ico_camera"}),i("span",{domProps:{innerHTML:t._s(t.message)}})]),i("div",{staticClass:"main-photo__buttons"},[i("button",{staticClass:"main-photo__btn-back",domProps:{innerHTML:t._s(t.$t("main_photo.bnt_later"))},on:{click:function(e){return t.$nav.back()}}}),i("button",{directives:[{name:"file-upload",rawName:"v-file-upload",value:t.onFileChange,expression:"onFileChange"},{name:"touch",rawName:"v-touch"}],staticClass:"btn_primary btn_size-m",attrs:{disabled:t.isUploading}},[t._v(" "+t._s(t.$t("main_photo.bnt_add"))+" ")])])]),t.isUploading?i("div",{staticClass:"loader-wrap loader-wrap-extend loader-wrap_black"},[i("loader",{attrs:{small:!0}})],1):t._e()])},Ai=[],Ii={uploadPhoto:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(i,s){t.files.length||s();var a=new FormData;a.append("file",t.files[0]),a.append("is_avatar",e),je(a).then((function(t){i(t)}))}))}},Li={name:"MainPhoto",components:{Loader:m},props:["card"],data:function(){return{user:this.$store.state.config.user,isUploading:!1}},computed:{photoUrl:function(){return this.card.avatars.s5},message:function(){return this.$t(this.isMan?"main_photo.msg_male":"main_photo.msg_female",{name:this.card.name})},isMan:function(){return this.$store.state.config.user.gender===nt}},mounted:function(){},methods:{onFileChange:function(t){var e=this;this.isUploading||(this.isUploading=!0,Ii.uploadPhoto(t,!0).then((function(t){e.isUploading=!1,e.$nav.back()})).catch((function(t){e.isUploading=!1,Nl.showUploadError()})))}}},Ni=Li,Ei=Object(d["a"])(Ni,ji,Ai,!1,null,null,null),Ti=Ei.exports,Mi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"real-photo"},[i("div",{staticClass:"real-photo__head"},[i("div",{staticClass:"real-photo__photo-wrap"},[i("div",{staticClass:"real-photo__photo",style:{backgroundImage:"url("+t.photoUrl+")"}})]),i("i",{staticClass:"ico ico_attention"})]),i("div",{staticClass:"real-photo__message"},[i("i",{staticClass:"ico ico_camera"}),t._v(" "+t._s(t.$t("real_photo.msg"))+" ")]),i("div",{staticClass:"real-photo__sub-title"},[t._v(t._s(t.$t("real_photo.subtitle")))]),i("button",{directives:[{name:"file-upload",rawName:"v-file-upload",value:t.onFileChange,expression:"onFileChange"},{name:"touch",rawName:"v-touch"}],staticClass:"btn_primary btn_size-m",attrs:{disabled:t.isUploading}},[t._v(t._s(t.$t("real_photo.btn_add")))]),i("button",{staticClass:"real-photo__btn-back",on:{click:function(e){return t.$nav.back()}}},[t._v(t._s(t.$t("real_photo.btn_later")))]),t.isUploading?i("div",{staticClass:"loader-wrap loader-wrap-extend loader-wrap_black"},[i("loader",{attrs:{small:!0}})],1):t._e()])},Ui=[],Fi={name:"RealPhoto",components:{Loader:m},props:["card"],data:function(){return{user:this.$store.state.config.user,isUploading:!1}},computed:{photoUrl:function(){return this.user.avatars.s1}},methods:{onFileChange:function(t){var e=this;this.isUploading||(this.isUploading=!0,Ii.uploadPhoto(t,!0).then((function(t){e.isUploading=!1,e.$nav.back()})).catch((function(t){e.isUploading=!1,Nl.showUploadError()})))}}},Ri=Fi,Vi=Object(d["a"])(Ri,Mi,Ui,!1,null,null,null),qi=Vi.exports,Di=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"swipe-tutor"},[i("div",{staticClass:"swipe-tutor__head"},[i("i",{staticClass:"ico",class:[t.isRightSwipe?"ico_face-hearts":"ico_face-confused"]})]),i("div",{staticClass:"swipe-tutor__message"},[i("i",{staticClass:"ico ico_pointign-up"}),t.isRightSwipe?i("div",{domProps:{innerHTML:t._s(t.likeMessage)}}):i("div",{domProps:{innerHTML:t._s(t.dislikeMessage)}})]),t.isRightSwipe?t._e():i("div",{staticClass:"swipe-tutor__sub-title",domProps:{innerHTML:t._s(t.dislikeSubTittle)}}),i("button",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"btn_primary btn_size-m",on:{click:function(e){return t.$nav.back()}}},[t._v(t._s(t.$t("swipe.btn")))])])},Hi=[],Bi={name:"SwipeTutor",props:["card","dir"],computed:{likeMessage:function(){var t=this.isMan?this.$t("swipe.like_her"):this.$t("swipe.like_him");return this.$t("swipe.like",{pronouns:t})},dislikeMessage:function(){var t=this.isMan?this.$t("swipe.like_her"):this.$t("swipe.like_him");return this.$t("swipe.dislike",{pronouns:t})},dislikeSubTittle:function(){var t=this.isMan?this.$t("personal_pronouns.she"):this.$t("personal_pronouns.he");return this.$t("swipe.dislike_sub",{pronouns:t})},isMan:function(){return this.$store.state.config.user.gender===nt},isRightSwipe:function(){return this.dir===ot}}},Gi=Bi,Wi=Object(d["a"])(Gi,Di,Hi,!1,null,null,null),zi=Wi.exports,Zi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"push-permissions"},[i("div",{staticClass:"push-permissions__head"},[i("div",{staticClass:"push-permissions__photo",style:{backgroundImage:"url("+t.card.avatars.s4+")"}}),t._m(0)]),i("div",{staticClass:"push-permissions__message",domProps:{innerHTML:t._s(t.message)}}),i("button",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"btn_secondary btn_size-m btn_mw220",on:{click:function(e){return t.$nav.back()}}},[t._v(t._s(t.$t("push_permission.decline")))]),i("button",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"btn_primary btn_size-m btn_mw220",on:{click:t.subscribe}},[t._v(t._s(t.$t("push_permission.accept")))])])},Yi=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"push-permissions__ico"},[i("i",{staticClass:"ico ico_bell"})])}],Ji={name:"PushPermissions",props:["card"],data:function(){return{user:this.$store.state.config.user}},computed:{message:function(){var t="m"===this.user.gender?this.$t("push_permission.female"):this.$t("push_permission.male");return this.$t("push_permission.message",{my_name:this.user.name,user_name:this.card.name,gender:t})}},methods:{subscribe:function(){Lt.invokeNative("push_subscribe"),this.$nav.back()}}},Xi=Ji,Qi=Object(d["a"])(Xi,Zi,Yi,!1,null,null,null),Ki=Qi.exports,ts=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vip-popup"},[i("div",{staticClass:"vip-popup__back",on:{click:t.closeOffer}},[i("i",{staticClass:"ico ico_arrow-left-white-24"})]),t.isLoading?i("div",{staticClass:"loader-wrap loader-wrap-inside"},[i("loader")],1):["profit"===t.step?[i("div",{staticClass:"vip-popup-profit"},[t._m(0),i("div",{staticClass:"vip-popup__title",domProps:{innerHTML:t._s(t.$t("vip_offer.title"))}}),i("ol",{staticClass:"vip-popup-profit__list"},[i("li",{staticClass:"vip-popup-profit__item",domProps:{innerHTML:t._s(t.$t("vip_offer.profit[0]"))}}),i("li",{staticClass:"vip-popup-profit__item",domProps:{innerHTML:t._s(t.$t("vip_offer.profit[1]"))}}),i("li",{staticClass:"vip-popup-profit__item",domProps:{innerHTML:t._s(t.$t("vip_offer.profit[2]"))}}),i("li",{staticClass:"vip-popup-profit__item",domProps:{innerHTML:t._s(t.$t("vip_offer.profit[3]"))}}),i("li",{staticClass:"vip-popup-profit__item",domProps:{innerHTML:t._s(t.$t("vip_offer.profit[4]"))}})])]),i("div",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"btn btn_orange vip-popup__btn vip-popup__btn_profit ripple ripple_white",on:{click:function(e){t.step="prices"}}},[t._v(" Получить преимущества ")])]:"prices"===t.step?[i("div",{staticClass:"vip-popup-prices"},[t._m(1),i("div",{staticClass:"vip-popup__title",domProps:{innerHTML:t._s(t.$t("vip_offer.title"))}}),i("div",{key:"listContainer",ref:"listContainer",staticClass:"vip-popup-prices-list"},t._l(t.products,(function(e,s){return i("div",{staticClass:"vip-popup-prices-item",class:{"vip-popup-prices-item_active":e.isActive},on:{click:function(i){return t.choiceProduct(e)}}},[e.isPopular?i("div",{staticClass:"vip-popup-prices-item__label"},[t._v("Popular")]):t._e(),i("div",{staticClass:"vip-popup-prices-item__period",domProps:{innerHTML:t._s(e.period)}}),i("div",{staticClass:"ico ico_crown",class:"vip-popup-prices-item__ico_"+s}),i("div",{staticClass:"vip-popup-prices-item__price"},[t._v(t._s(e.price))]),t._m(2,!0)])})),0)]),i("div",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"btn btn_orange vip-popup__btn ripple ripple_white"},[t._v(" Получить VIP-статус ")])]:t._e()]],2)},es=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vip-popup-user"},[i("div",{staticClass:"vip-popup-user__ava"}),i("div",{staticClass:"ico ico_crown-w80"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vip-popup-user"},[i("div",{staticClass:"vip-popup-user__ava"}),i("div",{staticClass:"ico ico_crown"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vip-popup-prices-item__ok"},[i("div",{staticClass:"ico2 ico2_ok-white"})])}],is=(i("4160"),i("159b"),0),ss=0,as={init:function(t){is=t,ss=(new Date).getTime()},getActualTime:function(){var t=((new Date).getTime()-ss)/1e3;return Math.floor(is+t)}},ns=0,os=[],rs=!1,cs=1e3,ls={isActive:function(t){return-1!==os.indexOf(t)},addCallback:function(t){this.isActive(t)||(rs||this.start(),os.push(t),t(as.getActualTime()))},removeCallback:function(t){if(this.isActive(t)){for(var e=os.length-1;e>=0;e--)if(os[e]===t){os.splice(e,1);break}rs&&0===os.length&&this.stop()}},start:function(){rs=!0,ns=setInterval(this.timerHandler,cs)},stop:function(){rs=!1,clearInterval(ns)},timerHandler:function(){for(var t=as.getActualTime(),e=os.length-1;e>=0;e--)os[e](t)}};function us(t,e,i){return new Promise((function(s,a){switch(t){case _t:default:return ds({billing_params:e.billing_params,offer:e.sku,type:"subs",source:i}).then(s).catch(a)}}))}function ds(t){return new Promise((function(e,i){Lt.isSupported()?Lt.invokeNative("buy",t,(function(t){e(t)})):i(new Error("Bridge buy not supported"))}))}var ps={name:"VipFullOffer",components:{Loader:m},props:["source"],data:function(){return{me:this.$store.state.currentUser,isBuying:!1,isLoading:!1,billingMethods:[],billingMeta:null,offer:null,confirmShown:!1,discountEndTimestamp:0,productPrice:{},step:"profit",products:[{id:1,period:"<b>1</b><br/>week",price:"100 rub",isPopular:!0,isActive:!0},{id:2,period:"<b>1</b><br/>month",price:"700 rub",isPopular:!1,isActive:!1},{id:3,period:"<b>6</b><br/>month",price:"1000 rub",isPopular:!1,isActive:!1}]}},computed:Object(o["a"])({trialIsAvailable:function(){return null!=this.vip.trial},isOneTimeOffer:function(){return this.offer.is_one_time_offer},priceMessage:function(){var t=parseInt(this.offer.period_value);return this.$t("vip_offer.price",{period:t,price:this.productPrice.price})}},Object(J["e"])("vip",["purchaseOffer","trial"])),created:function(){this.offer={},this.loadBillingMethods()},beforeDestroy:function(){this.stopTimer()},methods:{loadBillingMethods:function(){this.isLoading=!1},buyOffer:function(t){var e=this;this.isBuying=!0,us(t.id,this.offer,this.source).then((function(t){t.success&&(e.showSuccessNotify(),e.$store.commit("vip/setVip",!0),e.$nav.back({success:!0}))})).catch((function(t){console.log("Error buyVip",t.message)})).finally((function(){e.isBuying=!1}))},restorePurchases:function(){Lt.invokeNative("restore_purchases")},showSuccessNotify:function(){this.$push.emit("notification",{data:{text:this.$t("notification.vip"),ava:this.me.avatars.s1,ico:"ico ico_diamond-small",style:"yellow-gradient"}})},closeOffer:function(){"prices"===this.step?this.step="profit":this.$nav.back({success:!1})},choiceProduct:function(t){this.$refs.listContainer.style.height=this.$refs.listContainer.offsetHeight+"px",this.products.forEach((function(e){e.isActive=e.id===t.id}))},startTimer:function(){ls.addCallback(this.updateCountdown)},stopTimer:function(){ls.removeCallback(this.updateCountdown)},updateCountdown:function(t){var e=Math.max(0,this.discountEndTimestamp-t),i=Math.floor(e/60),s=e%60;this.discountCountdown="".concat(("0"+i).slice(-2),":").concat(("0"+s).slice(-2)),e<=0&&this.stopTimer()}}},ms=ps,hs=Object(d["a"])(ms,ts,es,!1,null,null,null),fs=hs.exports,_s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"confirm-popup"},[i("div",{staticClass:"confirm-popup__title"},[t._v(t._s(t.title))]),i("div",{staticClass:"confirm-popup__message",domProps:{innerHTML:t._s(t.message)}}),i("div",{staticClass:"confirm-popup__actions"},[i("div",{staticClass:"confirm-popup__action",on:{click:t.okClick}},[t._v(t._s(t.btnOk))]),i("div",{staticClass:"confirm-popup__action",on:{click:t.cancelClick}},[t._v(t._s(t.btnCancel))])])])},vs=[],gs={name:"ConfirmPopup",props:["title","message","btnOk","btnCancel"],methods:{okClick:function(){this.$nav.back({confirmed:!0})},cancelClick:function(){this.$nav.back({confirmed:!1})}}},bs=gs,Cs=Object(d["a"])(bs,_s,vs,!1,null,null,null),ys=Cs.exports,ws=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"message-limit extend"},[i("div",{staticClass:"message-limit__photo",style:{backgroundImage:"url("+t.photoUrl+")"}}),i("div",{staticClass:"message-limit__wrap"},[i("div",{staticClass:"message-limit__info"},[t._v(t._s(t.information))]),i("div",{staticClass:"message-limit__title"},[t._v(t._s(t.$t("message_limit.title")))])]),i("button",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"btn_primary btn_size-m",attrs:{disabled:t.isBuying},on:{click:t.showVipOffer}},[t._v(" "+t._s(t.trialIsAvailable?t.$t("message_limit.action_activate"):t.$t("message_limit.action_become"))+" ")]),i("div",{staticClass:"message-limit__back",on:{click:function(e){return t.$nav.back()}}},[i("i",{staticClass:"ico ico_exit"})])])},ks=[],xs={name:"MessageLimit",props:["user"],data:function(){return{limit:this.$store.state.config.daily_free_dialogs||5,isBuying:!1}},computed:Object(o["a"])({photoUrl:function(){return this.user.avatars.s5},isMan:function(){return this.user.gender===nt},information:function(){var t=this.isMan?this.$t("personal_pronouns.him"):this.$t("personal_pronouns.her");return this.$t("message_limit.info",{pronouns:t,count:this.limit})}},Object(J["c"])("vip",["trialIsAvailable"])),mounted:function(){this.$nativeStat.trackFirebaseEvent("item_action",{screen:"Chat Request Limit",action:"View"}),this.$nativeStat.trackMetricaEvent("item_action",{"Chat Request Limit":"View"}),this.$nativeStat.trackAppsFlyerEvent("fs_action",{af_content_type:"Chat Request Limit",ap_action:"View"}),this.$nativeStat.trackCommonEvent("chat_reach_request_limit"),this.$nativeStat.trackAppsFlyerEvent("ap_chat_reach_request_limit")},methods:{showVipOffer:function(){this.$nav.back().then((function(){Nl.showVipFullOffer({source:mt})}))}}},Ps=xs,$s=Object(d["a"])(Ps,ws,ks,!1,null,null,null),Os=$s.exports,Ss=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"messenger-chat"},[t.isLoading?i("div"):t.openedContact?[i("contact-header",{attrs:{contact:t.openedContact}}),t.requiresPhoto?i("chat-photo-block",{attrs:{contact:t.openedContact}}):[i("div",{staticClass:"messenger-chat__body"},[i("messages")],1),i("sendbox")]]:t._e()],2)},js=[],As=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"scrollWrapper",staticClass:"messenger-messages-wrapper"},[i("div",{staticClass:"messenger-messages"},[this.messages.length&&!t.contact.has_my_messages?i("monologue"):t._l(t.messages,(function(e,s){return i(t.getMessageComponent(e),{key:e.id,tag:"component",attrs:{contact:t.contact,message:e,"layout-props":t.getMessageLayoutProps(s)}})})),t.isLoading?i("messages-loader"):t._e(),t.isEmpty?i("messages-empty"):t._e()],2)])},Is=[],Ls=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"messenger-message",class:t.classes},[i("div",{staticClass:"messenger-message__ava",style:{backgroundImage:"url("+t.avaSrc+")"},on:{click:t.openProfile}}),i("div",{staticClass:"messenger-message__bubble-wrapper"},[t.getAttachInfo?i("div",{class:t.attachClasses},[t.attachments&&t.attachments.length?i("div",{staticClass:"messenger-message__attachments"},t._l(t.attachments,(function(e){return i("message-attachment",{key:e.id,attrs:{attachment:e},on:{"click-photo":function(i){return t.openPhoto(e)}}})})),1):t._e(),i("span",{staticClass:"messenger-message__date"},[t._v(t._s(t.date))])]):i("div",{staticClass:"messenger-message__bubble"},[i("div",{staticClass:"messenger-message__text-wrapper"},[t.text?i("span",{staticClass:"messenger-message__text",domProps:{innerHTML:t._s(t.text)}}):t._e(),i("span",{staticClass:"messenger-message__date"},[t._v(t._s(t.date))])])]),t.layoutProps.isLast&&t.layoutProps.isMine&&!t.contact.unread?i("div",{staticClass:"messenger-message__readed"},[t._v(" Просмотрено ")]):t._e()])])},Ns=[],Es=function(t,e,i,s){var a=[e,i,s],n=[2,0,1,1,1,2];return a[t%100>4&&t%100<20?2:n[t%10<5?t%10:5]]};function Ts(t){var e=Re.t("date.months"),i=e[t.getMonth()];return"".concat(t.getDate()," ").concat(i)}function Ms(t){var e=t.getMinutes();return e<10&&(e="0".concat(e)),"".concat(t.getHours(),":").concat(e)}function Us(t){var e=new Date,i=new Date(t),s=i.getTime()>(new Date).setHours(0,0,0);if(s)return Ms(i);var a=i.getTime()>e.setTime(e.getTime()-864e5);return a?Re.t("date.yesterday"):Ts(i)}var Fs=0,Rs=function(){function t(e){var i=e.component,s=e.props,a=e.options;Object(L["a"])(this,t),this.id=++Fs,this.component=i,this.props=s||{},this.options=a||{}}return Object(N["a"])(t,[{key:"show",value:function(t){throw new Error("Popup: method hide is not implemented!")}},{key:"hide",value:function(t){throw new Error("Popup: method hide is not implemented!")}}]),t}(),Vs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"topbar-container topbar-container_black"},[i("div",{staticClass:"topbar-container__header topbar topbar_opaque"},[i("div",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"topbar__action ripple ripple_white",on:{click:function(e){return t.$nav.back()}}},[i("i",{staticClass:"ico ico_arrow-left-white-24"})]),i("div",{staticClass:"topbar__title"},[t._v(" "+t._s(t.title)+" ")]),t.editable?i("div",{staticClass:"topbar__button",on:{click:function(e){t.isOpeningDialog=!t.isOpeningDialog}}},[i("i",{staticClass:"ico2 ico2_menu"})]):t._e()]),t.isLoading?i("div",{staticClass:"topbar-container__content"},[i("div",{staticClass:"topbar-container__content-loader"},[i("loader",{attrs:{color:"white",bg:"black"}})],1)]):i("div",{staticClass:"topbar-container__content photoviewer"},[i("div",{ref:"slider",staticClass:"photoviewer__slider photoviewer-slider"},[i("div",{ref:"slide1",staticClass:"photoviewer-slider__item"},[t.photo1?i("photo",{attrs:{photo:t.photo1,urlAlias:t.urlAlias}}):t._e()],1),i("div",{ref:"slide2",staticClass:"photoviewer-slider__item"},[t.photo2?i("photo",{attrs:{photo:t.photo2,urlAlias:t.urlAlias}}):t._e()],1),i("div",{ref:"slide3",staticClass:"photoviewer-slider__item"},[t.photo3?i("photo",{attrs:{photo:t.photo3,urlAlias:t.urlAlias}}):t._e()],1)]),t.user?i("div",{staticClass:"photoviewer__buttombar"}):t._e()]),t.isOpeningDialog?i("action-dialog",{attrs:{actions:t.currentPhotoActions},on:{close:function(e){t.isOpeningDialog=!1},select:t.onSelectAction}}):t._e(),t.isUploading?i("div",{staticClass:"loader-wrap loader-wrap-inside",style:{"z-index":11}},[i("loader")],1):t._e()],1)},qs=[],Ds=i("3835"),Hs=(i("b680"),function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bs.HORIZONTAL;Object(L["a"])(this,t),this.el=e,this.direction=i,this.pos=0,this.animationTime=.3,this.prefix=R("transform"),this.styleTransform=this.prefix+"transform",this.styleTransition=this.prefix+"transition",this.updateSizes()}return Object(N["a"])(t,[{key:"onResize",value:function(){this.updateSizes()}},{key:"updateSizes",value:function(){this.size=this.direction===Bs.HORIZONTAL?this.el.clientWidth:this.el.clientHeight}},{key:"move",value:function(t,e){var i=this;return new Promise((function(s,a){var n,o=Math.abs(t-i.pos);i.pos=t,e&&(n=o/i.size*i.animationTime,i.el.style[i.styleTransition]="all ease-in-out "+n.toFixed(3)+"s");var r=i.direction===Bs.HORIZONTAL?i.pos:0,c=i.direction===Bs.VERTICAL?i.pos:0;i.el.style[i.styleTransform]="translate3d(".concat(r,"px, ").concat(c,"px, 0)"),e?setTimeout(function(){this.el.style[this.styleTransition]="none",s()}.bind(i),1e3*parseFloat(n.toFixed(3))):s()}))}}]),t}()),Bs=function(){function t(e){var i=this,s=e.dataSource,a=e.el,n=e.cardElPrev,o=e.cardElCenter,r=e.cardElNext,c=e.swapObjectInWrapper,l=e.willMoveTo,u=e.didMoveTo,d=e.onSwipeBack,p=e.onSwipeNext,m=e.direction,h=void 0===m?t.HORIZONTAL:m;Object(L["a"])(this,t),this.queue=new V,this.animating=!1,this.cardsDeltaTmp=0,this.direction=h,this.scrollSize=this.direction===t.HORIZONTAL?a.clientWidth:a.clientHeight,this.dataSource=s,this.cardPrev=new Hs(n,this.direction),this.cardCenter=new Hs(o,this.direction),this.cardNext=new Hs(r,this.direction),this.swapObjectInWrapper=c,this.didMoveTo=u,this.willMoveTo=l,this.onSwipeBack=d,this.onSwipeNext=p,this.isDisabled=!1,this.cardPrev.move(-this.scrollSize),this.cardNext.move(this.scrollSize);var f=this.dataSource.getInitial(),_=Object(Ds["a"])(f,3),v=_[0],g=_[1],b=_[2];this.currentObject=g,this.swapObjectInWrapper(this.cardPrev.el,v),this.swapObjectInWrapper(this.cardCenter.el,g),this.swapObjectInWrapper(this.cardNext.el,b),this.willMoveTo({to:g,from:null,forwards:!1,initial:!0}),this.didMoveTo({to:g,from:null,forwards:!1,initial:!0}),this.gestureRecognizer=new U["GestureRecognizer"](a),this.gestureRecognizer.preventDefaultAnyway=!1;var C=new U["GestureHandler"];C.onStart=function(t){},C.onMove=function(e){if(!i.isDisabled&&!i.animating){var s=i.direction===t.HORIZONTAL?e.getDiffX():e.getDiffY();s>0&&!i.hasPrev||s<0&&!i.hasNext||(i.moveCards(s),i.cardsDeltaTmp=s)}},C.onEnd=function(){if(!i.isDisabled&&!i.animating){var t=i.cardsDeltaTmp;t>=0&&t<10?i.bounce():t<0?i.hasNext?(i.onSwipeNext&&i.onSwipeNext({from:i.currentObject,to:i.dataSource.getNext(i.currentObject)}),i.moveNext()):i.bounce():i.hasPrev?(i.onSwipeBack&&i.onSwipeBack({from:i.currentObject,to:i.dataSource.getPrev(i.currentObject)}),i.moveBack()):i.bounce(),i.cardsDeltaTmp=0}},this.gestureRecognizer.addHandler(this.direction===t.HORIZONTAL?U["Gesture"].TYPE_HORISONTAL:U["Gesture"].TYPE_VERTICAL,C)}return Object(N["a"])(t,null,[{key:"HORIZONTAL",get:function(){return"horizontal"}},{key:"VERTICAL",get:function(){return"vertical"}}]),Object(N["a"])(t,[{key:"switchDataSource",value:function(t){var e=this;this.queue.next((function(i){e.dataSource=t;var s=e.dataSource.getInitial(),a=Object(Ds["a"])(s,3),n=a[0],o=a[1],r=a[2];e.currentObject=o,e.swapObjectInWrapper(e.cardPrev.el,n),e.swapObjectInWrapper(e.cardCenter.el,o),e.swapObjectInWrapper(e.cardNext.el,r),e.willMoveTo({to:o,from:null,forwards:!1,initial:!0}),e.didMoveTo({to:o,from:null,forwards:!1,initial:!0}),i()}))}},{key:"moveCards",value:function(t){this.hasPrev&&this.cardPrev.move(-this.scrollSize+t),this.cardCenter.move(t),this.hasNext&&this.cardNext.move(this.scrollSize+t)}},{key:"bounce",value:function(){var t=this;this.queue.next((function(e){t.animating=!0,Promise.all([t.cardPrev.move(-t.scrollSize,!0),t.cardCenter.move(0,!0),t.cardNext.move(t.scrollSize,!0)]).then((function(){t.animating=!1,e()}))}))}},{key:"moveBack",value:function(){var t=this;return new Promise((function(e){t.queue.next((function(i){if(!t.hasPrev)return i(),void e();t.animating=!0;var s=t.dataSource.getPrev(t.currentObject);t.willMoveTo({to:s,from:t.currentObject,forwards:!1}),Promise.all([t.cardCenter.move(t.scrollSize,!0),t.cardPrev.move(0,!0)]).then((function(){var a=t.cardPrev,n=t.cardCenter,o=t.cardNext;t.cardPrev=o,t.cardCenter=a,t.cardNext=n,t.cardPrev.move(-t.scrollSize),t.dataSource.loadPrev(s),t.swapObjectInWrapper(t.cardPrev.el,t.dataSource.getPrev(s)),t.swapObjectInWrapper(t.cardCenter.el,s),t.swapObjectInWrapper(t.cardNext.el,t.currentObject);var r=t.currentObject;t.currentObject=s,t.didMoveTo({to:t.currentObject,from:r,forwards:!1}),t.animating=!1,i(),e()}))}))}))}},{key:"moveNext",value:function(){var t=this;return new Promise((function(e){t.queue.next((function(i){if(!t.hasNext)return i(),void e();t.animating=!0;var s=t.dataSource.getNext(t.currentObject);t.willMoveTo({to:s,from:t.currentObject,forwards:!0}),Promise.all([t.cardCenter.move(-t.scrollSize,!0),t.cardNext.move(0,!0)]).then((function(){var a=t.cardPrev,n=t.cardCenter,o=t.cardNext;t.cardPrev=n,t.cardCenter=o,t.cardNext=a,t.cardNext.move(t.scrollSize),t.dataSource.loadNext(s),t.swapObjectInWrapper(t.cardPrev.el,t.currentObject),t.swapObjectInWrapper(t.cardCenter.el,s),t.swapObjectInWrapper(t.cardNext.el,t.dataSource.getNext(s));var r=t.currentObject;t.currentObject=s,t.didMoveTo({to:t.currentObject,from:r,forwards:!0}),t.animating=!1,i(),e()}))}))}))}},{key:"enable",value:function(){this.isDisabled=!1}},{key:"disable",value:function(){this.isDisabled=!0}},{key:"hasPrev",get:function(){return this.dataSource.hasPrev(this.currentObject)}},{key:"hasNext",get:function(){return this.dataSource.hasNext(this.currentObject)}}]),t}(),Gs=function(){function t(){Object(L["a"])(this,t)}return Object(N["a"])(t,[{key:"getInitial",value:function(){}},{key:"getTotal",value:function(){}},{key:"getItemNumById",value:function(t){}},{key:"hasPrev",value:function(t){}},{key:"hasNext",value:function(t){}},{key:"getById",value:function(t){}},{key:"getPrev",value:function(t){}},{key:"getNext",value:function(t){}},{key:"loadPrev",value:function(t){}},{key:"loadNext",value:function(t){}}]),t}(),Ws=function(t){function e(t){var i,s=t.items,a=t.initialId;return Object(L["a"])(this,e),i=Object(xi["a"])(this,Object(Pi["a"])(e).call(this)),i.initialId=a,i.data=s,i._buildIndex(),i}return Object($i["a"])(e,t),Object(N["a"])(e,[{key:"_buildIndex",value:function(){this.index={};for(var t=0;t<this.data.length;t++)this.index[this.data[t].id]=t}},{key:"getInitial",value:function(){if(this.initialId){var t=this.getById(this.initialId),e=this.hasPrev(t)?this.getPrev(t):void 0,i=this.hasNext(t)?this.getNext(t):void 0;return[e,t,i]}return[void 0].concat(Object(te["a"])(this.data.slice(0,2)))}},{key:"getTotal",value:function(){return this.data.length}},{key:"getItemNumById",value:function(t){return this.index[t]+1}},{key:"hasPrev",value:function(t){return this.index[t.id]>0}},{key:"hasNext",value:function(t){return this.index[t.id]<this.data.length-1}},{key:"getById",value:function(t){return this.data[this.index[t]]}},{key:"getPrev",value:function(t){return this.data[this.index[t.id]-1]}},{key:"getNext",value:function(t){return this.data[this.index[t.id]+1]}}]),e}(Gs),zs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"image",staticClass:"photoviewer-slider__image",style:{backgroundImage:"url("+t.url+")"}})},Zs=[],Ys={props:["photo","urlAlias"],computed:{url:function(){return this.urlAlias?this.photo[this.urlAlias]:this.photo.url_l}}},Js=Ys,Xs=Object(d["a"])(Js,zs,Zs,!1,null,null,null),Qs=Xs.exports,Ks=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"actions-dialog"},[i("div",{staticClass:"actions-dialog__background",on:{click:function(e){return t.$emit("close")}}}),i("div",{staticClass:"actions-dialog__list"},[t._l(t.actions,(function(e,s){return[void 0!=e.fileUpload?i("div",{directives:[{name:"file-upload",rawName:"v-file-upload",value:e.fileUpload,expression:"item.fileUpload"}],key:s,staticClass:"actions-dialog__item"},[t._v(" "+t._s(e.label)+" ")]):i("div",{key:s,staticClass:"actions-dialog__item",on:{click:function(i){return t.$emit("select",e.id)}}},[t._v(" "+t._s(e.label)+" ")])]}))],2)])},ta=[],ea={name:"actions-dialog",props:["actions"]},ia=ea,sa=Object(d["a"])(ia,Ks,ta,!1,null,null,null),aa=sa.exports,na=1,oa=2,ra=3,ca={props:["fetch","initialId","user","urlAlias","onUpdate","editable"],components:{Photo:Qs,Loader:m,ActionDialog:aa},data:function(){return{isLoading:!0,isUploading:!1,photos:null,sliderDs:null,slider:null,photo1:null,photo2:null,photo3:null,activePhoto:null,swipedOnce:!1,isOpeningChat:!1,isOpeningDialog:!1}},computed:{title:function(){if(!this.photos||!this.activePhoto)return null;for(var t=0;t<this.photos.length;t++)if(this.photos[t]===this.activePhoto)return"".concat(t+1," из ").concat(this.photos.length);return null},currentPhotoActions:function(){var t=[{label:this.$t("photo_viewer.btn_add"),id:na,fileUpload:this.onUploadAction}];return console.log("this.activePhoto",this.activePhoto),this.activePhoto.can_set_avatar&&!this.activePhoto.is_avatar&&t.push({label:this.$t("photo_viewer.btn_main"),id:oa}),this.activePhoto.can_delete&&t.push({label:this.$t("photo_viewer.btn_delete"),id:ra}),t}},mounted:function(){var t=this;this.isLoading=!0,this.fetch().then((function(e){t.isLoading=!1,t.$nextTick((function(){t.photos=e,t.sliderDs=new Ws({items:e,initialId:t.initialId}),t.slider=new Bs({dataSource:t.sliderDs,el:t.$refs.slider,cardElPrev:t.$refs.slide1,cardElCenter:t.$refs.slide2,cardElNext:t.$refs.slide3,swapObjectInWrapper:t.swapPhoto,didMoveTo:t.didMoveTo,willMoveTo:function(){},onSwipeNext:t.onSwipeNext})}))}))},methods:{swapPhoto:function(t,e,i){t===this.$refs.slide1?this.photo1=e:t===this.$refs.slide2?this.photo2=e:t===this.$refs.slide3&&(this.photo3=e)},didMoveTo:function(t){var e=t.to;this.activePhoto=e},onSwipeNext:function(){this.swipedOnce||(this.swipedOnce=!0)},openChat:function(){},openProfile:function(){},onSelectAction:function(t){var e=this;switch(this.isOpeningDialog=!1,this.isUploading=!0,t){case oa:Ie({photo_id:this.activePhoto.id}).then((function(t){var i=t.objects;e.completeAction(i)})).finally((function(){e.isUploading=!1}));break;case ra:Ae({photo_id:this.activePhoto.id}).then((function(t){var i=t.objects;e.completeAction(i)})).finally((function(){e.isUploading=!1}));break}},onUploadAction:function(t){var e=this;this.isOpeningDialog=!1,this.isUploading=!0,Ii.uploadPhoto(t).then((function(t){var i=t.objects;e.completeAction(i)})).catch((function(t){Nl.showUploadError()})).finally((function(){e.isUploading=!1}))},completeAction:function(t){this.onUpdate&&this.onUpdate(t),this.$nav.back()}}},la=ca,ua=Object(d["a"])(la,Vs,qs,!1,null,null,null),da=ua.exports,pa={open:function(t){var e=t.fetch,i=t.initialId,s=t.user,a=t.urlAlias,n=t.onUpdate,o=t.editable,r=t.animated;"undefined"===typeof r&&(r=!0);var c=new Rs({component:da,props:{fetch:e,initialId:i,urlAlias:a,onUpdate:n,editable:o,user:s},options:{myClass:"popup_extend"}});return oe.dispatch("popups/openPopup",{popup:c,animated:r}),c},close:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0;oe.dispatch("popups/closePopup",{popup:t,animated:e,onClose:i})}},ma=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"messenger-message__attachment"},["photo"===t.attachment.type?[i("div",{staticClass:"messenger-message__attachment-photo",style:{backgroundImage:"url("+t.attachment.url_min+")"},on:{click:function(e){return t.$emit("click-photo")}}})]:"gift"===t.attachment.type?[i("div",{staticClass:"messenger-message__light"}),i("div",{staticClass:"messenger-message__attachment-gift",style:{backgroundImage:"url("+t.attachment.url_min+")"}})]:t._e()],2)},ha=[],fa={props:["attachment"]},_a=fa,va=Object(d["a"])(_a,ma,ha,!1,null,null,null),ga=va.exports,ba={components:{MessageAttachment:ga},props:["contact","message","layout-props"],computed:{classes:function(){var t=[];return this.layoutProps.isMine&&t.push("messenger-message_mine"),this.layoutProps.isUserFirst&&t.push("messenger-message_user-first"),this.layoutProps.isUserLast&&t.push("messenger-message_user-last"),this.layoutProps.isFirst&&t.push("messenger-message_first"),this.layoutProps.isLast&&t.push("messenger-message_last"),t},attachClasses:function(){var t=["messenger-message__bubble"];return"photo"===this.getAttachInfo.type?t.push("messenger-message__bubble_photo"):"gift"===this.getAttachInfo.type&&t.push("messenger-message__bubble_gift"),t},avaSrc:function(){return this.contact.user.avatars.s1},text:function(){return this.message.text},attachments:function(){return this.message.attaches},date:function(){return Us(1e3*this.message.time)},getAttachInfo:function(){var t=!1;return void 0!==this.message.attaches&&this.message.attaches.length&&this.message.attaches.forEach((function(e){t=e})),t}},methods:{openProfile:function(){this.contact.can_view_profile&&Nl.openProfile({id:this.contact.id})},openPhoto:function(t){var e;t.url_orig&&this.$nav.pushInstant({activate:function(i){e=pa.open({fetch:function(){return new Promise((function(e){e([t])}))},urlAlias:"url_orig",animated:i})},unload:function(t){pa.close(e,t)}})}}},Ca=ba,ya=Object(d["a"])(Ca,Ls,Ns,!1,null,null,null),wa=ya.exports,ka=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mutual-message"},[i("div",{staticClass:"mutual-message__title"},[t._v(t._s(t.$t("mutual_message.title")))]),i("div",{staticClass:"mutual-message__text",domProps:{innerHTML:t._s(this.$t("mutual_message.text",{dateDiff:t.dateDiff}))}})])},xa=[],Pa={name:"MutualMessage",props:["contact","message","layout-props"],computed:{dateDiff:function(){return Us(1e3*this.message.mutual_ts)}}},$a=Pa,Oa=Object(d["a"])($a,ka,xa,!1,null,null,null),Sa=Oa.exports,ja=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"p_m row row_justify-content-center"},[i("loader",{attrs:{"extra-small":!0}})],1)},Aa=[],Ia={components:{Loader:m}},La=Ia,Na=Object(d["a"])(La,ja,Aa,!1,null,null,null),Ea=Na.exports,Ta=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"messages-empty"},[i("div",{staticClass:"messages-empty__ava",style:{backgroundImage:"url("+t.avaSrc+")"}}),t.openedContact.mutual_ts?[i("div",{staticClass:"messages-empty__mutual-title"},[t._v(t._s(t.$t("messenger_chat.mutual_label")))]),i("div",{staticClass:"messages-empty__mutual-text",domProps:{innerHTML:t._s(t.mutualText)}})]:i("div",{staticClass:"messages-empty__title"},[t._v(t._s(t.title))])],2)},Ma=[],Ua={computed:Object(o["a"])({avaSrc:function(){return this.openedContact.user.avatars.s4},title:function(){var t=this.openedContact.user.gender===nt;return this.$t(t?"messenger_chat.empty_m":"messenger_chat.empty_f")},mutualText:function(){return this.$t("messenger_chat.mutual_msg",{name:this.openedContact.name,dateDiff:this.dateDiff})},dateDiff:function(){return Us(1e3*this.openedContact.mutual_ts)}},Object(J["e"])("messenger",["openedContact"]))},Fa=Ua,Ra=Object(d["a"])(Fa,Ta,Ma,!1,null,null,null),Va=Ra.exports,qa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"monologue"},[i("div",{staticClass:"monologue__ava",style:{backgroundImage:"url("+t.avaSrc+")"}}),t.openedContact.mutual_ts?[i("div",{staticClass:"monologue__mutual-title"},[t._v(t._s(t.$t("messenger_chat.mutual_label")))]),i("div",{staticClass:"monologue__mutual-with ellipsis"},[t._v(t._s(t.$t("messenger_chat.mutual_you_and",{name:t.openedContact.user.name}))+" ")]),i("div",{staticClass:"monologue__mutual-text",domProps:{innerHTML:t._s(t.mutualText)}})]:i("div",{staticClass:"monologue__name",domProps:{innerHTML:t._s(t.openedContact.user.name)}}),t._l(t.filteredMessages,(function(e,s){return i(t.getMessageComponent(e),{key:e.id,tag:"component",attrs:{contact:t.openedContact,message:e,"layout-props":t.getMessageLayoutProps(s)}})}))],2)},Da=[],Ha={name:"Monologue",computed:Object(o["a"])({avaSrc:function(){return this.openedContact.user.avatars.s4},mutualText:function(){return this.$t("messenger_chat.mutual_msg",{name:this.openedContact.user.name,dateDiff:this.dateDiff})},dateDiff:function(){return Us(1e3*this.openedContact.mutual_ts)},filteredMessages:function(){return this.messages.filter((function(t){return"mutual"!==t.id}))}},Object(J["e"])("messenger",["openedContact","messages"])),methods:{getMessageComponent:function(t){return t.mutual_ts?Sa:wa},getMessageLayoutProps:function(t){var e={};return 0===t&&(e.isFirst=!0),e}}},Ba=Ha,Ga=Object(d["a"])(Ba,qa,Da,!1,null,null,null),Wa=Ga.exports,za={components:{MessagesEmpty:Va,MessagesLoader:Ea,Monologue:Wa},data:function(){return{scrolledBottomOnce:!1,isLoadingHistoryTriggered:!1,wrapperHeight:0,savedScrollHeight:0,savedScrollValue:0}},computed:Object(o["a"])({},Object(J["e"])("messenger",{contact:function(t){return t.openedContact},messages:function(t){return t.messages},isLoading:function(t){return t.messagesIsLoading},hasPrev:function(t){return t.messagesHasPrev}}),{isEmpty:function(){return!this.isLoading&&!this.messages.length}}),watch:{contact:function(){this.scrolledBottomOnce=!1},messages:function(){var t=this;this.savedScrollHeight=this.$refs.scrollWrapper.scrollHeight,this.savedScrollValue=this.$refs.scrollWrapper.scrollTop,this.$nextTick((function(){var e=t.$refs.scrollWrapper.scrollHeight;t.scrolledBottomOnce?t.isLoadingHistoryTriggered?t.$refs.scrollWrapper.scrollTop=t.savedScrollValue+(e-t.savedScrollHeight):t.savedScrollHeight-t.wrapperHeight-t.savedScrollValue<100&&(t.$refs.scrollWrapper.scrollTop=e-t.wrapperHeight):e>t.wrapperHeight&&(t.$refs.scrollWrapper.scrollTop=e-t.wrapperHeight,t.scrolledBottomOnce=!0)}))}},mounted:function(){this.loadMessagesBatch(),this.wrapperHeight=this.$refs.scrollWrapper.clientHeight,this.$refs.scrollWrapper.addEventListener("scroll",this.onScroll)},updated:function(){this.wrapperHeight=this.$refs.scrollWrapper.clientHeight},methods:Object(o["a"])({},Object(J["b"])("messenger",["loadMessagesBatch"]),{onScroll:function(){this.hasPrev&&!this.isLoading&&this.$refs.scrollWrapper.scrollTop<20&&(this.isLoadingHistoryTriggered=!0,this.loadMessagesBatch())},getMessageComponent:function(t){return t.mutual_ts?Sa:wa},getMessageLayoutProps:function(t){var e={};0===t&&(e.isFirst=!0),t===this.messages.length-1&&(e.isLast=!0);var i=t>0?this.messages[t-1]:null,s=this.messages[t],a=t<this.messages.length-1?this.messages[t+1]:null;return i&&i.author_id===s.author_id||(e.isUserFirst=!0),a&&a.author_id===s.author_id||(e.isUserLast=!0),s.author_id===ie.userId&&(e.isMine=!0),e}})},Za=za,Ya=Object(d["a"])(Za,As,Is,!1,null,null,null),Ja=Ya.exports,Xa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"messenger-sendbox"},[t.openedContact.restriction_message?i("restriction",{attrs:{message:t.openedContact.restriction_message}}):i("Form",{attrs:{user:t.openedContact.user,isSending:t.isSending,photoIsUploading:t.photoIsUploading,placeholder:t.placeholder},on:{submitMessage:t.submitMessage,submitFile:t.submitFile}})],1)},Qa=[],Ka=(i("498a"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"messenger-form"},[i("div",{staticClass:"messenger-form__left-side"},[i("div",{staticClass:"ico2 ico2_gift-mess",on:{click:t.openGiftPopup}})]),i("div",{staticClass:"messenger-form__input-wrapper"},[i("div",{ref:"hiddenInput",staticClass:"messenger-form__hidden-input",domProps:{innerHTML:t._s(t.textHidden)}}),i("textarea",{staticClass:"messenger-form__input",attrs:{placeholder:t.placeholder},domProps:{value:t.text},on:{input:function(e){t.text=e.target.value}}})]),i("div",{staticClass:"messenger-form__right-side"},[i("button",{staticClass:"messenger-form__button",on:{click:t.submit}},[t.isSending?[i("loader",{attrs:{"extra-small":!0}})]:[t.text.trim().length>0?i("SendIcon"):i("button",{staticClass:"messenger-form__button messenger-form__attach-photo"},[t.photoIsUploading?[i("loader",{attrs:{"extra-small":!0}})]:[i("div",{staticClass:"ico2 ico2_photo-messenger"}),i("input",{ref:"file",attrs:{type:"file"},on:{change:function(e){return t.onSelectPhoto(e)}}})]],2)]],2)])])}),tn=[],en=(i("4d63"),i("ac1f"),i("5319"),{functional:!0,render(t,e){const{_c:i,_v:s,data:a,children:n=[]}=e,{class:o,staticClass:r,style:c,staticStyle:l,attrs:u={},...d}=a;return i("svg",{class:[o,r],style:[c,l],attrs:Object.assign({width:"20",height:"16",viewBox:"0 0 20 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u),...d},n.concat([i("path",{attrs:{d:"M10 6a3 3 0 100 6 3 3 0 000-6zm8-3h-2.4a.89.89 0 01-.79-.57L14.19.57A.891.891 0 0013.4 0H6.6a.89.89 0 00-.79.57L5.19 2.43A.891.891 0 014.4 3H2C.9 3 0 3.9 0 5v9c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 11a5 5 0 110-10 5 5 0 010 10zm7.3-7.601a.7.7 0 110-1.4.7.7 0 010 1.4z",fill:"#999"}})]))}}),sn={functional:!0,render(t,e){const{_c:i,_v:s,data:a,children:n=[]}=e,{class:o,staticClass:r,style:c,staticStyle:l,attrs:u={},...d}=a;return i("svg",{class:[o,r],style:[c,l],attrs:Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u),...d},n.concat([i("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 24c6.627 0 12-5.373 12-12S18.627 0 12 0 0 5.373 0 12s5.373 12 12 12zm1-7a1 1 0 11-2 0V8.8l-2.9 2.9a.99.99 0 11-1.4-1.4L12 5l5.3 5.3a.99.99 0 11-1.4 1.4L13 8.8V17z",fill:"#FF6125"}})]))}},an={functional:!0,render(t,e){const{_c:i,_v:s,data:a,children:n=[]}=e,{class:o,staticClass:r,style:c,staticStyle:l,attrs:u={},...d}=a;return i("svg",{class:[o,r],style:[c,l],attrs:Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u),...d},n.concat([i("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 24c6.627 0 12-5.373 12-12S18.627 0 12 0 0 5.373 0 12s5.373 12 12 12zm1-7a1 1 0 11-2 0V8.8l-2.9 2.9a.99.99 0 11-1.4-1.4L12 5l5.3 5.3a.99.99 0 11-1.4 1.4L13 8.8V17z",fill:"#DDD"}})]))}},nn={components:{CameraIcon:en,SendIcon:sn,SendDisabledIcon:an,Loader:m},props:["isSending","photoIsUploading","placeholder","user"],data:function(){return{text:"",textHidden:""}},methods:{submit:function(){this.isSending||0===this.text.trim().length||this.$emit("submitMessage",this.text)},onSelectPhoto:function(){this.$emit("submitFile",this.$refs.file.files[0])},openGiftPopup:function(){Nl.openSendGift({user:this.user})}},watch:{text:function(t){this.textHidden=t.replace(new RegExp("\n","g"),"<br/>&nbsp;")},isSending:function(t){t||(this.text="")}}},on=nn,rn=Object(d["a"])(on,Ka,tn,!1,null,null,null),cn=rn.exports,ln=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"messenger-restriction"},[t._v(" "+t._s(t.$t(t.message))+" ")])},un=[],dn={props:["message"]},pn=dn,mn=Object(d["a"])(pn,ln,un,!1,null,null,null),hn=mn.exports,fn={components:{Form:cn,Restriction:hn},data:function(){return{isSending:!1,photoIsUploading:!1,me:{id:111,avatars:{s1:"",s2:"",s3:""}}}},computed:Object(o["a"])({placeholder:function(){var t=this.openedContact.user.gender===nt,e=t?this.$t("personal_pronouns.him"):this.$t("personal_pronouns.her");return this.$t("messenger_chat.placeholder",{pronouns:e})}},Object(J["e"])("messenger",["openedContact"])),methods:Object(o["a"])({submitMessage:function(t){var e=this;this.isSending||(this.isSending=!0,this.postMessage({message:t.trim()}).then((function(){e.isSending=!1})))},submitFile:function(t){var e=this,i=new FormData;i.append("contactId",this.openedContact.id),i.append("file",t),this.photoIsUploading=!0,me.postMessage(i).then((function(){})).finally((function(){e.photoIsUploading=!1}))}},Object(J["b"])("messenger",["postMessage"]))},_n=fn,vn=Object(d["a"])(_n,Xa,Qa,!1,null,null,null),gn=vn.exports,bn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"messenger-chat-head"},[i("div",{staticClass:"messenger-chat-head__button",on:{click:function(e){return t.$nav.back()}}},[i("div",{staticClass:"ico ico_arrow-left-blue-24"})]),i("div",{staticClass:"messenger-chat-user"},[i("div",{staticClass:"messenger-chat-user__ava-wrapper",on:{click:t.openProfile}},[i("div",{staticClass:"messenger-chat-user__ava",style:{backgroundImage:"url("+t.avaSrc+")"}}),t.contact.user.online?i("div",{staticClass:"online"}):t._e()]),i("div",{staticClass:"messenger-chat-user__name"},[t._v(t._s(t.contact.user.name))])]),i("div",{staticClass:"messenger-chat-head__controls"},[i("div",{staticClass:"messenger-chat-head__button",on:{click:t.openMenu}},[i("div",{staticClass:"ico ico_menu-blue-24"})])]),t.isOpeningDialog?i("actions-dialog",{attrs:{actions:t.actions},on:{close:function(e){t.isOpeningDialog=!1},select:t.onSelectAction}}):t._e()],1)},Cn=[],yn={name:"contact-header",components:{ActionsDialog:aa},props:["contact"],data:function(){return{isOpeningDialog:!1,actions:[{label:"Пожаловаться",id:1},{label:"Удалить",id:2}]}},computed:{avaSrc:function(){return this.contact.user.avatars.s1}},methods:Object(o["a"])({openProfile:function(){Nl.openProfile({id:this.contact.id})},complain:function(){Nl.complain(this.contact.user)},askRemove:function(){var t=this;confirm("Вы действительно хотите удалить контакт и очистить историю переписки?")&&this.removeContact(this.contact.id).then((function(){return t.$nav.back()}))},openMenu:function(){this.isOpeningDialog=!0},onSelectAction:function(t){switch(this.isOpeningDialog=!1,this.isUploading=!0,t){case 1:this.complain();break;case 2:break}}},Object(J["b"])("messenger",["removeContact"]))},wn=yn,kn=Object(d["a"])(wn,bn,Cn,!1,null,null,null),xn=kn.exports,Pn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"chat-photo-block"},[i("div",{staticClass:"chat-photo-block__ava",style:{backgroundImage:"url("+t.avaSrc+")"}}),i("div",{staticClass:"chat-photo-block__title",domProps:{innerHTML:t._s(t.title)}}),i("button",{directives:[{name:"file-upload",rawName:"v-file-upload",value:t.onFileChange,expression:"onFileChange"},{name:"touch",rawName:"v-touch"}],staticClass:"btn_primary btn_size-m btn_mw220",attrs:{disabled:t.isUploading}},[t._v(" "+t._s(t.$t("chat_photo_block.btn"))+" ")]),t.isUploading?i("div",{staticClass:"loader-wrap loader-wrap-extend loader-wrap_black"},[i("loader",{attrs:{small:!0}})],1):t._e()])},$n=[],On={name:"ChatPhotoBlock",components:{Loader:m},props:["contact"],data:function(){return{isUploading:!1}},computed:{avaSrc:function(){return this.contact.user.avatars.s4},title:function(){var t=this.contact.user.gender===nt,e=t?this.$t("personal_pronouns.him"):this.$t("personal_pronouns.her");return this.$t("chat_photo_block.title",{pronouns:e})}},mounted:function(){this.$nativeStat.trackFirebaseEvent("item_action",{screen:"Chat Photo Required",action:"View"}),this.$nativeStat.trackMetricaEvent("item_action",{"Chat Photo Required":"View"}),this.$nativeStat.trackAppsFlyerEvent("fs_action",{af_content_type:"Chat Photo Required",ap_action:"View"}),this.$nativeStat.trackCommonEvent("chat_photo_required"),this.$nativeStat.trackAppsFlyerEvent("ap_chat_photo_required")},methods:{onFileChange:function(t){var e=this;this.isUploading||(this.isUploading=!0,Ii.uploadPhoto(t,!0).then((function(t){e.isUploading=!1,e.$nativeStat.trackCommonEvent("my_photo_upload",{source:"Chat Photo Required"}),e.$nativeStat.trackAppsFlyerEvent("ap_my_photo_upload",{ap_source:"Chat Photo Required"})})).catch((function(t){e.isUploading=!1,Nl.showUploadError()})))}}},Sn=On,jn=Object(d["a"])(Sn,Pn,$n,!1,null,null,null),An=jn.exports,In={components:{ContactHeader:xn,ChatPhotoBlock:An,Messages:Ja,Sendbox:gn},props:["id"],data:function(){return{isLoading:!1}},computed:Object(o["a"])({requiresPhoto:function(){return this.openedContact.requires_photo&&this.needUploadPhoto}},Object(J["e"])("messenger",["openedContact"]),{},Object(J["c"])("feed",["needUploadPhoto"])),created:function(){Ce.checkConnection(),this.loadContact()},destroyed:function(){this.closeContact()},methods:Object(o["a"])({loadContact:function(){var t,e=this;this.isLoading=!0,this.$nav.activeIntent.params.id?t=this.$nav.activeIntent.params.id:this.id&&(t=this.id),me.getContact(t).then((function(i){e.openContact(i.contact),e.resetNewCounter(t),e.isLoading=!1}))},navUpdated:function(){var t=this.$nav.activeIntent.params.id||this.id;this.openedContact&&this.openedContact.id!==t&&this.loadContact()}},Object(J["b"])("messenger",["openContact","setContactSettings","closeContact","markReaded"]),{},Object(J["d"])("messenger",["resetNewCounter"]))},Ln=In,Nn=Object(d["a"])(Ln,Ss,js,!1,null,null,null),En=Nn.exports,Tn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"complaint"},[t.complaintSent?[i("div",{staticClass:"complaint__title",domProps:{innerHTML:t._s(t.$t("complaint.result.title"))}}),i("div",{staticClass:"complaint__message",domProps:{innerHTML:t._s(t.$t("complaint.result.msg"))}})]:[i("div",{staticClass:"complaint__black-list"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"checked"}],attrs:{type:"checkbox",name:"checkbox-field-group",id:"complaint-checkbox",checked:""},domProps:{checked:Array.isArray(t.checked)?t._i(t.checked,null)>-1:t.checked},on:{change:function(e){var i=t.checked,s=e.target,a=!!s.checked;if(Array.isArray(i)){var n=null,o=t._i(i,n);s.checked?o<0&&(t.checked=i.concat([n])):o>-1&&(t.checked=i.slice(0,o).concat(i.slice(o+1)))}else t.checked=a}}}),i("label",{attrs:{for:"complaint-checkbox"}},[t._v(t._s(t.$t("complaint.check")))])]),i("button",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"btn btn_orange ripple ripple_white complaint__send-btn",on:{click:t.complaint}},[t._v(t._s(t.$t("complaint.btn")))])],i("div",{staticClass:"popup__close",on:{click:function(e){return t.$nav.back({ignoreUpdate:!0,success:t.complaintSent})}}},[i("i",{staticClass:"ico ico_close-gray"})])],2)},Mn=[],Un={name:"Complaint",props:["user"],data:function(){return{complaintSent:!1,checked:!0}},methods:{complaint:function(){Ci({to_user_id:this.user.id,black_list:this.checked}),this.complaintSent=!0}}},Fn=Un,Rn=Object(d["a"])(Fn,Tn,Mn,!1,null,null,null),Vn=Rn.exports,qn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"start-promo extend"},[i("div",{staticClass:"start-promo__title",domProps:{innerHTML:t._s(t.$t("start_promo.title"))}}),i("div",{staticClass:"start-promo__photo-wrap",class:t.countryClass}),i("div",{staticClass:"start-promo__counter",domProps:{innerHTML:t._s(t.countMessage)}}),i("div",{staticClass:"start-promo__message"},[t._v(t._s(t.$t("start_promo.message")))]),i("button",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"start-promo__button btn_size-m",on:{click:function(e){return t.$nav.back()}}},[t._v(t._s(t.$t("start_promo.button"))+" ")])])},Dn=[],Hn=(i("baa5"),{name:"StartPromo",props:["promo"],computed:{countryClass:function(){return"country_".concat(this.$store.state.config.country)},countMessage:function(){var t=["ru","br","tr","id","fr","in","us","de","gb","ca"],e=this.$store.state.config.country,i=t.lastIndexOf(e)>=0?this.$t("start_promo.countries.".concat(e)):"";return this.$t("start_promo.counter",{number:this.promo.installs_so_far,country:i})}}}),Bn=Hn,Gn=Object(d["a"])(Bn,qn,Dn,!1,null,null,null),Wn=Gn.exports,zn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"photo-request extend",class:t.countryClass},[i("div",{staticClass:"photo-request__couple"}),i("div",{staticClass:"photo-request__extra"},[i("div",{staticClass:"photo-request__title"},[t._v(t._s(t.$t("photo_request.title")))]),i("div",{staticClass:"photo-request__subtitle"},[t._v(t._s(t.$t("photo_request.subtitle")))]),i("button",{directives:[{name:"file-upload",rawName:"v-file-upload",value:t.onFileChange,expression:"onFileChange"},{name:"touch",rawName:"v-touch"}],staticClass:"btn_primary btn_size-m btn_mw240",attrs:{disabled:t.isUploading}},[t._v(t._s(t.$t("photo_request.btn"))+" ")])]),i("div",{staticClass:"extend__close",on:{click:function(e){return t.$nav.back()}}},[i("i",{staticClass:"ico ico_exit-gray"})]),t.isUploading?i("div",{staticClass:"loader-wrap loader-wrap-extend loader-wrap_black"},[i("loader",{attrs:{small:!0}})],1):t._e()])},Zn=[],Yn={name:"PhotoRequest",components:{Loader:m},data:function(){return{isUploading:!1}},computed:{countryClass:function(){return"country_".concat(this.$store.state.config.country)}},mounted:function(){this.$nativeStat.trackFirebaseEvent("item_action",{screen:"Add Photo",action:"View"}),this.$nativeStat.trackMetricaEvent("item_action",{"Add Photo":"View"}),this.$nativeStat.trackAppsFlyerEvent("fs_action",{af_content_type:"Add Photo",ap_action:"View"})},methods:{onFileChange:function(t){var e=this;this.isUploading||(this.isUploading=!0,Ii.uploadPhoto(t,!0).then((function(t){e.isUploading=!1,e.$nativeStat.trackCommonEvent("my_photo_upload",{source:"Add Photo"}),e.$nativeStat.trackAppsFlyerEvent("ap_my_photo_upload",{ap_source:"Add Photo"}),e.$nav.back()})).catch((function(t){e.isUploading=!1,Nl.showUploadError()})))}}},Jn=Yn,Xn=Object(d["a"])(Jn,zn,Zn,!1,null,null,null),Qn=Xn.exports,Kn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-settings extend"},[i("div",{staticClass:"extend-header"},[i("div",{staticClass:"extend-header__back",on:{click:function(e){return t.$nav.back()}}},[i("i",{staticClass:"ico ico_close-gray"})]),i("div",{staticClass:"extend-header__title"},[t._v(t._s(t.$t("app_settings.title")))])]),i("div",{staticClass:"extend-content"},[i("div",{staticClass:"app-settings__fields"},[i("div",{staticClass:"app-settings__field"},[i("a",{attrs:{href:"//sites.google.com/view/evermatch/terms-of-use",target:"_blank"}},[t._v(t._s(t.$t("app_settings.field_terms")))])]),i("div",{staticClass:"app-settings__field"},[i("a",{attrs:{href:"//sites.google.com/view/evermatch/privacy-policy",target:"_blank"}},[t._v(t._s(t.$t("app_settings.privacy_policy")))])]),i("div",{staticClass:"app-settings__field"},[t._v("ID: "+t._s(t.me.id))]),t.isAdmin?i("div",{staticClass:"app-settings__field",on:{click:t.openSettings}},[t._v("Настройки")]):t._e()]),i("div",{staticClass:"app-settings__extra"},[i("button",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"app-settings__btn-support btn btn_orange ripple ripple_white",on:{click:t.openSupport}},[t._v(t._s(t.$t("app_settings.support"))+" "),t.hasSupportAnswer?i("strong",[t._v("+1")]):t._e()]),i("button",{staticClass:"app-settings__btn-remove btn_link",on:{click:t.remove}},[t._v(t._s(t.$t("app_settings.delete")))])])])])},to=[],eo={name:"AppSettings",data:function(){return{isAdmin:!1,me:{}}},computed:Object(o["a"])({mailHref:function(){return"mailto:support@evermatch.me?subject=".concat(this.me.name,",%20ID:%20").concat(this.me.id)}},Object(J["e"])("vip",["hasVip","status"]),{},Object(J["c"])("feed",["hasSupportAnswer"])),methods:{remove:function(){Nl.showConfirmPopup({title:this.$t("delete_profile.title"),message:this.$t("delete_profile.message"),btnOk:this.$t("delete_profile.bnt_ok"),btnCancel:this.$t("delete_profile.btn_cancel")}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.confirmed&&Lt.invokeNative("logout",{delete:!0,source:"test"})}))},openSettings:function(){Lt.invokeNative("settings")},openSupport:function(){location.href=this.mailHref}}},io=eo,so=Object(d["a"])(io,Kn,to,!1,null,null,null),ao=so.exports,no=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"send-gift"},["choice"===t.step?[i("div",{staticClass:"send-gift-head"},[i("div",{staticClass:"send-gift-head__button",on:{click:function(e){return t.$nav.back()}}},[i("div",{staticClass:"ico ico_arrow-left-white-24"})]),i("div",{staticClass:"send-gift-head__aim"},[i("div",{staticClass:"send-gift-aim"},[i("div",{staticClass:"send-gift-aim__ava",style:{backgroundImage:"url("+t.user.avatars.s1+")"}}),i("div",{staticClass:"send-gift-aim__fio"},[t._v(" "+t._s(t.user.name+(t.user.age?", "+t.user.age:""))+" ")])])])]),i("div",{staticClass:"send-gift__content"},[i("div",{staticClass:"send-gift__list"},t._l(t.gifts,(function(e){return i("div",{staticClass:"send-gift__item",on:{click:function(i){return t.choiceGift(e)}}},[i("div",{staticClass:"send-gift__img",style:{backgroundImage:"url("+e.urls[150]+")"}})])})),0)])]:"subscribe"===t.step?[i("div",{staticClass:"send-gift-subscribe__back",on:{click:t.backToList}},[i("div",{staticClass:"ico ico_arrow-left-white-24"})]),i("div",{staticClass:"send-gift-subscribe__content"},[i("div",{staticClass:"send-gift-subscribe__title"},[t._v(" Натаща будет впечатлена вашим подарком! ")]),i("div",{staticClass:"send-gift-subscribe__gift"},[i("div",{staticClass:"send-gift-subscribe__aim",style:{backgroundImage:"url("+t.user.avatars.s1+")"}}),i("img",{staticClass:"send-gift-img",attrs:{src:t.giftChoiced.urls[150]}})]),i("div",{staticClass:"send-gift-subscribe__field"},[i("div",{staticClass:"send-gift-subscribe__hidden-text",domProps:{innerHTML:t._s(t.textHidden)}}),i("textarea",{staticClass:"send-gift-subscribe__text text-field",attrs:{placeholder:"Подпишите подарок"},on:{input:function(e){t.text=e.target.value}}})]),i("button",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"send-gift-subscribe__btn ripple ripple_white btn btn_orange"},[t._v("Отправить подарок")])])]:t._e()],2)},oo=[],ro=(i("cb29"),i("d81d"),{name:"send-gift",props:["gift","user"],data:function(){var t=14611,e=new Array(30).fill({}).map((function(e,i){var s=t+i,a=String(s).slice(0,3);return{id:s,title:"Gift ".concat(s),urls:{150:"https://st.fotocdn.net/images/gifts/".concat(a,"/").concat(s,"/150.png"),100:"https://st.fotocdn.net/images/gifts/".concat(a,"/").concat(s,"/100.png"),50:"https://st.fotocdn.net/images/gifts/".concat(a,"/").concat(s,"/50.png")}}}));return{gifts:e,giftChoiced:null,step:"choice",textHidden:"",text:""}},mounted:function(){},methods:{choiceGift:function(t){this.giftChoiced=t,this.step="subscribe"},backToList:function(){this.step="choice",this.giftChoiced=null}},watch:{text:function(t){console.log(t),this.textHidden=t.replace(new RegExp("\n","g"),"<br/>&nbsp;")}}}),co=ro,lo=Object(d["a"])(co,no,oo,!1,null,"7c242239",null),uo=lo.exports,po=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user-profile extend"},[t.isLoading?i("div",{staticClass:"loader-wrap loader-wrap-inside"},[i("loader")],1):[i("div",{staticClass:"user-profile__sticky"},[i("div",{staticClass:"user-profile__exit",on:{click:function(e){return t.$nav.back()}}},[i("i",{staticClass:"ico ico_arrow-left-white-24"})]),i("div",{staticClass:"user-profile__menu",on:{click:t.complain}},[i("i",{staticClass:"ico2 ico2_menu"})])]),i("div",{ref:"content",staticClass:"user-profile__content"},[i("div",{staticClass:"user-profile-photo",style:{backgroundImage:"url("+t.getPhotoUrl(0)+")"},on:{click:function(e){return t.openPhoto(0)}}},[t._m(0)]),t._m(1)]),i("div",{class:t.actionsClasses},[i("profile-actions",{on:{like:t.likeAction,dislike:t.dislikeAction}})],1)]],2)},mo=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user-profile-photo__info"},[i("div",{staticClass:"ico ico_photo-white"}),t._v(" 1 / 13 ")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user-profile__info"},[i("div",{staticClass:"user-profile-info user-profile-info_base"},[i("div",{staticClass:"user-profile-info__header"},[i("div",{staticClass:"user-profile-info__title ellipsis"},[i("span",{staticClass:"online-status"}),t._v("Name, 32 ")])]),i("div",{staticClass:"user-profile-info__content user-profile-info__content_location"},[i("div",{staticClass:"ico ico_location"}),t._v("Moscow ")])]),i("div",{staticClass:"user-profile-info user-profile-info_photo"},[i("div",{staticClass:"user-profile-info__header"},[i("div",{staticClass:"user-profile-info__title"},[t._v("Photo")])]),i("div",{staticClass:"user-profile-info__content"},[i("div",{staticClass:"user-profile-photos"},[i("div",{staticClass:"user-profile-photos__group"},[i("div",{staticClass:"user-profile-photos__item",staticStyle:{"background-image":"url('https://im0-tub-ru.yandex.net/i?id=aaa0c700a686125e286e3d2aac86fd91&n=33&w=225&h=150')"}})]),i("div",{staticClass:"user-profile-photos__group"},[i("div",{staticClass:"user-profile-photos__shower"},[i("div",{staticClass:"ico ico_photo-white"}),t._v(" Ещё 2 фото ")]),i("div",{staticClass:"user-profile-photos__item",staticStyle:{"background-image":"url('https://im0-tub-ru.yandex.net/i?id=2a81d92675aa40ca17cc84259845ba60&n=33&w=221&h=150')"}})])]),i("div",{staticClass:"user-profile-photos"},[i("div",{staticClass:"user-profile-photos__group"},[i("div",{staticClass:"user-profile-photos__item",staticStyle:{"background-image":"url('https://im0-tub-ru.yandex.net/i?id=aaa0c700a686125e286e3d2aac86fd91&n=33&w=225&h=150')"}})]),i("div",{staticClass:"user-profile-photos__group"},[i("div",{staticClass:"user-profile-photos__shower"},[i("div",{staticClass:"ico ico_photo-white"}),t._v(" Ещё 2 фото ")]),i("div",{staticClass:"user-profile-photos__item user-profile-photos__item_small",staticStyle:{"background-image":"url('https://im0-tub-ru.yandex.net/i?id=2a81d92675aa40ca17cc84259845ba60&n=33&w=221&h=150')"}}),i("div",{staticClass:"user-profile-photos__item user-profile-photos__item_small",staticStyle:{"background-image":"url('https://im0-tub-ru.yandex.net/i?id=2a81d92675aa40ca17cc84259845ba60&n=33&w=221&h=150')"}}),i("div",{staticClass:"user-profile-photos__item user-profile-photos__item_small",staticStyle:{"background-image":"url('https://im0-tub-ru.yandex.net/i?id=2a81d92675aa40ca17cc84259845ba60&n=33&w=221&h=150')"}}),i("div",{staticClass:"user-profile-photos__item user-profile-photos__item_small",staticStyle:{"background-image":"url('https://im0-tub-ru.yandex.net/i?id=2a81d92675aa40ca17cc84259845ba60&n=33&w=221&h=150')"}})])])])]),i("div",{staticClass:"user-profile-info"},[i("div",{staticClass:"user-profile-info__header"},[i("div",{staticClass:"user-profile-info__title"},[t._v("Title")])]),i("div",{staticClass:"user-profile-info__content"},[t._v(" Люблю гулять под луной. Живу с родителями. Я танцую и пою, и себя не узнаю. А еще много чит... ")])]),i("div",{staticClass:"user-profile-info"},[i("div",{staticClass:"user-profile-info__header"},[i("div",{staticClass:"user-profile-info__title"},[t._v("Title")])]),i("div",{staticClass:"user-profile-info__content"},[t._v(" Люблю гулять под луной. Живу с родителями. Я танцую и пою, и себя не узнаю. А еще много чит... ")])]),i("div",{staticClass:"user-profile-info"},[i("div",{staticClass:"user-profile-info__header"},[i("div",{staticClass:"user-profile-info__title"},[t._v("Title")])]),i("div",{staticClass:"user-profile-info__content"},[t._v(" Люблю гулять под луной. Живу с родителями. Я танцую и пою, и себя не узнаю. А еще много чит... ")])])])}],ho=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user-profile__actions"},[i("button",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"user-profile__btn btn btn_orange ripple ripple_white",on:{click:function(e){return t.$emit("like")}}},[t._v(" Показать ему меня ")])],2)},fo=[],_o={name:"ProfileActions"},vo=_o,go=Object(d["a"])(vo,ho,fo,!1,null,null,null),bo=go.exports,Co=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"inline-message"},[i("input",{ref:"inputField",staticClass:"inline-message__input",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.message},on:{input:function(e){t.message=e.target.value},focus:function(e){return t.$emit("focus")},blur:function(e){return t.$emit("blur")},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)}}}),i("i",{staticClass:"ico ico_send",class:{"inline-message__disabled-send":0==t.message.trim().length},on:{click:t.submit}})])},yo=[],wo={name:"InlineMessage",props:["placeholder"],data:function(){return{message:""}},methods:{submit:function(){var t=this.message.trim();t.length>0&&(this.$refs.inputField.blur(),this.$emit("submit",t),this.message="")}}},ko=wo,xo=Object(d["a"])(ko,Co,yo,!1,null,null,null),Po=xo.exports,$o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",{directives:[{name:"file-upload",rawName:"v-file-upload",value:t.onFileChange,expression:"onFileChange"},{name:"touch",rawName:"v-touch"}],staticClass:"user-profile__require-photo btn_primary",attrs:{disabled:t.isUploading}},[i("i",{staticClass:"ico ico_photos"}),t._v(" "+t._s(t.requirePlaceholder)+" ")])},Oo=[],So={name:"RequirePhoto",props:["user"],data:function(){return{isUploading:!1}},computed:{requirePlaceholder:function(){var t=this.user.gender===nt,e=t?this.$t("personal_pronouns.him"):this.$t("personal_pronouns.her");return this.$t("user_profile.require_photo",{pronouns:e})}},mounted:function(){this.$nativeStat.trackFirebaseEvent("item_action",{screen:"Profile",action:"Chat Photo Required"}),this.$nativeStat.trackMetricaEvent("item_action",{Profile:"Chat Photo Required"}),this.$nativeStat.trackAppsFlyerEvent("fs_action",{af_content_type:"Profile",ap_action:"Chat Photo Required"})},methods:{onFileChange:function(t){var e=this;this.isUploading||(this.isUploading=!0,Ii.uploadPhoto(t,!0).then((function(t){e.isUploading=!1,e.$nativeStat.trackCommonEvent("my_photo_upload",{source:"Chat Photo Required"}),e.$nativeStat.trackAppsFlyerEvent("ap_my_photo_upload",{ap_source:"Chat Photo Required"})})).catch((function(t){e.isUploading=!1,Nl.showUploadError()})))}}},jo=So,Ao=Object(d["a"])(jo,$o,Oo,!1,null,null,null),Io=Ao.exports,Lo=function(t){function e(t,i){var s;return Object(L["a"])(this,e),s=Object(xi["a"])(this,Object(Pi["a"])(e).call(this)),s.name=t,s.id=i.place_id,s.options=i,s.status="",s}return Object($i["a"])(e,t),Object(N["a"])(e,[{key:"updateStatus",value:function(t){this.status=t,this.emit("update_status",{status:this.status})}}]),e}(E),No=Lo,Eo="Error",To="Closed",Mo={},Uo={init:function(){Lt.registerMethod("ad_status_changed",Uo.statusHandler)},createPlacement:function(t){var e=t.name,i=t.options;if(Mo[e])return!1;Mo[e]=new No(e,i)},load:function(t){var e=Mo[t];if(!e)return!1;var i=oe.state.config.country||"",s=Object(o["a"])({country:i.toUpperCase()},e.options.params);Lt.invokeNative("load_ad",{place_id:e.id,params:s})},present:function(t){return new Promise((function(e,i){var s=Mo[t];if(s){var a=function t(i){var a=i.status;a!=To&&a!=Eo||(s.off("update_status",t),e())};s.on("update_status",a),Lt.invokeNative("intent_ad",{place_id:s.id}),Lt.invokeNative("present_ad",{place_id:s.id,params:s.options.present_params})}else i()}))},getPlacement:function(t){return Mo[t]},statusHandler:function(t){for(var e in Mo){var i=Mo[e];if(i.id==t.place_id){i.updateStatus(t.status);break}}}},Fo=Uo,Ro="",Vo={name:"UserProfile",components:{Loader:m,ProfileActions:bo,InlineMessage:Po,RequirePhoto:Io},props:["id","card"],data:function(){return{me:{},user:null,focused:!1,isLoading:!1,actionCollapsed:!1}},computed:Object(o["a"])({numPhotos:function(){return 1},isMe:function(){return!1},actionsClasses:function(){var t=["user-profile__bottom"];return this.actionCollapsed&&t.push("user-profile__bottom_big"),t}},Object(J["e"])("vip",["hasVip"]),{},Object(J["e"])("feed",["likeActionLocked","viewedCardsAfterPhotoRequest"]),{},Object(J["c"])("vip",["trialIsAvailable"]),{},Object(J["c"])("feed",["needUploadPhoto","numCardsBeforeRequestPhoto","canOpenDialog"])),created:function(){var t=this,e=this.$nav.activeIntent,i=this.card||e.options.user;if(Ro=this,i)this.user=i;else{this.isLoading=!0;var s=this.id||decodeURIComponent(e.query.id);vi({user_id:s,include:"photos,interests"}).then((function(e){t.user=e.data.user,t.isLoading=!1}))}},mounted:function(){this.hasVip},beforeDestroy:function(){this.$refs.content&&this.$refs.content.removeEventListener("scroll",this.onScroll)},hidePopupHandler:function(){!Ro.hasVip&&Ro.isMe},watch:{user:function(t){void 0!==t&&this.$refs.content&&this.$refs.content.addEventListener("scroll",this.onScroll)}},methods:Object(o["a"])({likeAction:function(){Nl.likeAction(this.user),this.$store.commit("feed/removeCardById",this.user.id),this.$nav.back()},dislikeAction:function(){Nl.dislikeAction(this.user),this.$store.commit("feed/removeCardById",this.user.id),this.$nav.back()},getPhotoUrl:function(t){return"https://im0-tub-ru.yandex.net/i?id=aaa0c700a686125e286e3d2aac86fd91&n=33&w=225&h=150"},openPhoto:function(t){var e;this.$nav.pushInstant({activate:function(t){e=pa.open({fetch:function(){return new Promise((function(t){var e=[{id:1,url:"https://im0-tub-ru.yandex.net/i?id=aaa0c700a686125e286e3d2aac86fd91&n=33&w=225&h=150"},{id:2,url:"https://im0-tub-ru.yandex.net/i?id=aaa0c700a686125e286e3d2aac86fd91&n=33&w=225&h=150"},{id:3,url:"https://im0-tub-ru.yandex.net/i?id=aaa0c700a686125e286e3d2aac86fd91&n=33&w=225&h=150"}];t(e)}))},initialId:0,urlAlias:"url",animated:t})},unload:function(t){pa.close(e,t)}})},complain:function(){var t=this;Nl.complain(this.user).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.success&&(Nl.skipAction(t.user),t.$nav.back())}))},onScroll:function(){var t=this.$refs.content.clientHeight,e=this.$refs.content.scrollHeight,i=this.$refs.content.scrollTop;this.actionCollapsed=e-t-i<20},showOffer:function(){Nl.showVipFullOffer({source:mt})}},Object(J["d"])("feed",["lockLikeAction","unlockLikeAction","resetPhotoRequestCounter"]))},qo=Vo,Do=Object(d["a"])(qo,po,mo,!1,null,null,null),Ho=Do.exports,Bo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"profile-editor extend"},[i("div",{staticClass:"extend-header"},[i("div",{staticClass:"extend-header__back",on:{click:function(e){return t.$nav.back()}}},[i("i",{staticClass:"ico ico_circle-back"})]),i("div",{staticClass:"extend-header__title"},[t._v(t._s(t.$t("profile_editor.title")))]),i("div",{staticClass:"extend-header__actions"},[i("button",{staticClass:"btn_link",on:{click:t.previewProfile}},[t._v(t._s(t.$t("profile_editor.btn_view")))])])]),t.isLoading?i("div",{staticClass:"loader-wrap loader-wrap-inside"},[i("loader")],1):i("div",{staticClass:"extend-content"},[t.gallery?i("photo-gallery",{attrs:{photos:t.gallery},on:{update:t.onUpdateGallery}}):t._e(),i("div",{staticClass:"profile-editor__form"},[i("div",{staticClass:"profile-editor__section"},[i("div",{staticClass:"profile-editor__field"},[i("div",{staticClass:"profile-editor__field-label"},[t._v(t._s(t.$t("profile_editor.field_name")))]),i("div",{staticClass:"profile-editor__field-value ellipsis",on:{click:function(e){return t.editField(t.userName)}}},[t._v(" "+t._s(t.user.name)+" "),i("i",{staticClass:"ico ico_arrow-right"})])]),i("div",{staticClass:"profile-editor__field"},[i("div",{staticClass:"profile-editor__field-label"},[t._v(t._s(t.$t("profile_editor.field_age")))]),i("div",{staticClass:"profile-editor__field-value"},[t._v(t._s(t.user.age)+", "+t._s(t.$t("w"===t.user.gender?"profile_editor.female":"profile_editor.male"))+" ")])]),i("div",{staticClass:"profile-editor__field"},[i("div",{staticClass:"profile-editor__field-label"},[t._v(t._s(t.aim.label))]),i("div",{staticClass:"profile-editor__field-value ellipsis",on:{click:function(e){return t.editField(t.aim)}}},[t._v(" "+t._s(t.user[t.aim.field]?t.parseFieldValue(t.aim,t.user[t.aim.field]):t.labelAdd)),i("i",{staticClass:"ico ico_arrow-right"})])])]),i("div",{staticClass:"profile-editor__section"},[i("div",{staticClass:"profile-editor__section-title"},[t._v(" "+t._s(t.$t("profile_editor.section_about"))+" "),i("button",{staticClass:"btn_link",on:{click:function(e){return t.editField(t.about)}}},[t._v(t._s(t.$t("profile_editor.btn_edit")))])]),t.user.about_me?i("div",{staticClass:"profile-editor__about"},[t._v(t._s(t.user.about_me))]):i("div",{staticClass:"profile-editor__about-empty"},[t._v(t._s(t.$t("profile_editor.about_description")))]),t._l(t.customFields,(function(e,s){return i("div",{key:s,staticClass:"profile-editor__field"},[i("div",{staticClass:"profile-editor__field-label"},[t._v(t._s(e.label))]),i("div",{staticClass:"profile-editor__field-value ellipsis",on:{click:function(i){return t.editField(e)}}},[t._v(" "+t._s(t.user[e.field]?t.parseFieldValue(e,t.user[e.field]):t.labelAdd)),i("i",{staticClass:"ico ico_arrow-right"})])])}))],2),i("div",{staticClass:"profile-editor__section"},[i("div",{staticClass:"profile-editor__section-title"},[t._v(t._s(t.$t("profile_editor.section_location")))]),i("div",{staticClass:"profile-editor__field"},[i("div",{staticClass:"profile-editor__field-label"},[t._v(t._s(t.city.label))]),i("div",{staticClass:"profile-editor__field-value ellipsis",on:{click:function(e){return t.editField(t.city)}}},[t._v(" "+t._s(t.user.city?t.user.city.name:t.labelAdd)),i("i",{staticClass:"ico ico_arrow-right"})])])])])],1)])},Go=[],Wo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"photo-gallery"},[t.photos.length>0?i("div",{staticClass:"photo-gallery__list"},t._l(t.photos,(function(e,s){return i("div",{key:e.id,staticClass:"photo-gallery__photo",class:{"photo-gallery__photo_main":e.is_avatar},style:{backgroundImage:"url("+e.urls.s3+")"},on:{click:function(e){return t.openPhoto(s)}}})})),0):i("div",{staticClass:"photo-gallery__empty"},[i("div",{directives:[{name:"file-upload",rawName:"v-file-upload",value:t.onFileSelect,expression:"onFileSelect"}],staticClass:"photo-gallery__photo-slot"},[i("i",{staticClass:"ico ico_plus-yellow"})]),i("div",{staticClass:"photo-gallery__message"},[i("div",[t._v(t._s(t.$t("photo_gallery.title")))]),i("div",[t._v(t._s(t.$t("photo_gallery.subtitle")))])])]),i("div",{staticClass:"photo-gallery__actions"},[i("button",{directives:[{name:"touch",rawName:"v-touch"},{name:"file-upload",rawName:"v-file-upload",value:t.onFileSelect,expression:"onFileSelect"}],staticClass:"btn_secondary",attrs:{disabled:t.isUploading||t.galleryIsFull}},[t._v(t._s(t.$t("photo_gallery.btn_photo"))+" ")])])])},zo=[],Zo={name:"PhotoGallery",props:["photos","onUpdate"],data:function(){return{isUploading:!1}},computed:{galleryIsFull:function(){return this.photos&&this.photos.length>=10}},methods:{onFileSelect:function(t){var e=this;this.isUploading||(this.isUploading=!0,Ii.uploadPhoto(t).then((function(t){var i=t.objects;e.isUploading=!1,e.onUpdateGallery(i)})).catch((function(t){e.isUploading=!1,Nl.showUploadError()})))},openPhoto:function(t){var e,i=this,s=this.photos[t];this.$nav.pushInstant({activate:function(t){e=pa.open({fetch:function(){return new Promise((function(t){var e=i.photos.map((function(t){return Object(o["a"])({url:t.urls.o},t)}));t(e)}))},initialId:s&&s.id,urlAlias:"url",onUpdate:i.onUpdateGallery,editable:!0,animated:t})},unload:function(t){pa.close(e,t)}})},onUpdateGallery:function(t){this.$emit("update",t)}}},Yo=Zo,Jo=Object(d["a"])(Yo,Wo,zo,!1,null,null,null),Xo=Jo.exports,Qo={name:"ProfileEditor",components:{PhotoGallery:Xo,Loader:m},data:function(){return{isLoading:!1,user:{},gallery:[],fieldValues:{},customFields:{},aim:{label:this.$t("profile_editor.field_target"),field:"rel_aim",type:"checkbox"},about:{label:this.$t("profile_editor.section_about"),field:"about_me",type:"text",description:this.$t("profile_editor.about_description2"),placeholder:this.$t("profile_editor.about_placeholder")},userName:{label:this.$t("profile_editor.user_name.label"),field:"name",type:"input",placeholder:this.$t("profile_editor.user_name.placeholder")},city:{label:this.$t("profile_editor.field_city"),field:"city",type:"geo"},me:this.$store.state.config.user}},computed:{labelAdd:function(){return this.$t("profile_editor.btn_add")}},created:function(){var t=this;this.isLoading=!0,Oe().then((function(e){var i=e.objects[0];t.customFields=i.custom_fields,t.fieldValues=i.field_values,t.gallery=i.photo||[],t.user=i.user,t.isLoading=!1}))},methods:{previewProfile:function(){Nl.openProfile({id:this.me.id})},editField:function(t){var e=this.user[t.field],i=this.fieldValues[t.field];Nl.editField({item:t,defaultValue:e,options:i,onUpdate:this.onUpdateUser})},parseFieldValue:function(t,e){switch(t.type){case"radio":return e.title;case"number":return e+(t.units?" ".concat(t.units):"");case"checkbox":return e.map((function(t){return t.title})).join(", ");case"text":default:return e}},onUpdateUser:function(t){this.user=t,this.$store.state.config.user.name=this.user.name},onUpdateGallery:function(t){this.gallery=t}}},Ko=Qo,tr=Object(d["a"])(Ko,Bo,Go,!1,null,null,null),er=tr.exports,ir=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"field-editor"},[i("div",{staticClass:"popup__close",on:{click:function(e){return t.$nav.back()}}},[i("i",{staticClass:"ico ico_close-gray"})]),i("div",{staticClass:"field-editor__header"},[i("div",{staticClass:"field-editor__title"},[t._v(t._s(t.item.label))])]),this.item.description?i("div",{staticClass:"field-editor__description"},[t._v(t._s(this.item.description))]):t._e(),i(t.getFieldComponent(),{ref:"fieldComponent",tag:"comment",attrs:{item:t.item,options:t.options},on:{validate:t.onValidate},model:{value:t.editableValue,callback:function(e){t.editableValue=e},expression:"editableValue"}}),i("div",{staticClass:"field-editor__actions"},[i("button",{staticClass:"field-editor__btn btn btn_turquoise",attrs:{disabled:!t.isValid},on:{click:t.save}},[t._v(t._s(t.$t("field_editor.action_save")))])]),t.isLoading?i("div",{staticClass:"loader-wrap loader-wrap-inside"},[i("loader")],1):t._e()],1)},sr=[],ar=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"input-field"},[i("textarea",{staticClass:"text-field",attrs:{type:"text",placeholder:t.item.placeholder},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}})])},nr=[],or={name:"TextField",props:["item","value"]},rr=or,cr=Object(d["a"])(rr,ar,nr,!1,null,null,null),lr=cr.exports,ur=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"radio-field"},t._l(t.advancedOptions,(function(e,s){return i("div",{staticClass:"radio-field__option",class:{"radio-field__option-not-set":-1===e.value}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.picked,expression:"picked"}],attrs:{type:"radio",name:"radio-field-group",id:e.value},domProps:{value:e.value,checked:t._q(t.picked,e.value)},on:{change:function(i){t.picked=e.value}}}),i("label",{attrs:{for:e.value}},[t._v(t._s(e.title))])])})),0)},dr=[],pr=-1,mr={name:"RadioField",data:function(){return{picked:null}},props:["item","value","options"],created:function(){this.picked=this.value||pr},computed:{advancedOptions:function(){return[{title:this.$t("field_editor.not_set"),value:pr}].concat(Object(te["a"])(this.options))}},watch:{picked:function(t,e){this.$emit("input",this.picked==pr?null:this.picked)}}},hr=mr,fr=Object(d["a"])(hr,ur,dr,!1,null,null,null),_r=fr.exports,vr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"checkbox-field"},t._l(t.options,(function(e,s){return i("div",{staticClass:"checkbox-field__option"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"checked"}],attrs:{type:"checkbox",name:"checkbox-field-group",id:e.value},domProps:{value:e.value,checked:Array.isArray(t.checked)?t._i(t.checked,e.value)>-1:t.checked},on:{change:function(i){var s=t.checked,a=i.target,n=!!a.checked;if(Array.isArray(s)){var o=e.value,r=t._i(s,o);a.checked?r<0&&(t.checked=s.concat([o])):r>-1&&(t.checked=s.slice(0,r).concat(s.slice(r+1)))}else t.checked=n}}}),i("label",{attrs:{for:e.value}},[t._v(t._s(e.title))])])})),0)},gr=[],br={name:"CheckboxField",data:function(){return{checked:[]}},props:["item","value","options"],created:function(){this.checked=this.value||[]},watch:{checked:function(t,e){this.$emit("input",this.checked.join(","))}}},Cr=br,yr=Object(d["a"])(Cr,vr,gr,!1,null,null,null),wr=yr.exports,kr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"number-field"},[i("smooth-picker",{ref:"numberPicker",staticClass:"number-field__picker",attrs:{data:t.values,change:t.onChange}}),t.item.units?i("div",{staticClass:"number-field__units"},[t._v(t._s(t.item.units))]):t._e()],1)},xr=[],Pr=i("ea88"),$r={name:"NumberField",components:{SmoothPicker:Pr["SmoothPicker"]},props:["item","value","options"],data:function(){return{values:[]}},created:function(){var t=this.createList(),e=t.indexOf(this.value);this.values=[{currentIndex:e,list:t,textAlign:"center",className:"item-group"}]},mounted:function(){var t=this;setTimeout((function(){t.$refs.numberPicker.safeGetGroupRectList()}),400)},methods:{createList:function(){for(var t=["---"],e=this.item.min;e<=this.item.max;e++)t.push(e);return t},onChange:function(t,e){var i=this.values[0].list[e];this.$emit("input",e>0?i:"")}}},Or=$r,Sr=Object(d["a"])(Or,kr,xr,!1,null,null,null),jr=Sr.exports,Ar=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"geo-field"},[i("input",{staticClass:"geo-field__input",attrs:{placeholder:t.$t("profile_editor.geo.placeholder"),type:"text",readonly:""},domProps:{value:t.city&&t.city.name||""},on:{input:function(e){t.city=e.target.value},click:function(e){return t.showListOfCities()}}}),i("div",{staticClass:"geo-field__message",on:{click:function(e){return t.showListOfCities()}}},[t._v(t._s(t.$t("profile_editor.geo.message")))])])},Ir=[],Lr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cities-popup"},[i("input",{staticClass:"cities-popup__input",attrs:{placeholder:t.$t("profile_editor.geo.placeholder"),type:"text"},domProps:{value:t.search},on:{input:function(e){t.search=e.target.value}}}),t.items?i("div",{staticClass:"cities-popup__list"},t._l(t.items,(function(e){return i("div",{key:e.id,staticClass:"cities-popup__list-item",on:{click:function(i){return t.selectItem(e)}}},[i("div",{staticClass:"cities-popup__city-title"},[t._v(t._s(e.name))]),i("div",{staticClass:"cities-popup__city-description"},[e.subdivision?[t._v(t._s(e.subdivision)+",")]:t._e(),t._v(" "+t._s(e.country)+" ")],2)])})),0):t._e()])},Nr=[],Er=(i("841c"),{name:"CitiesPopup",props:["detectedCityId","onSelect"],components:{Loader:m},data:function(){return{search:"",items:[],cachedResults:{},isLoading:!1}},mounted:function(){this.loadСities()},methods:{"loadСities":function(){var t=this,e=this.search.trim();this.cachedResults[e]?this.items=this.cachedResults[e]:(this.isLoading=!0,wi({name:e,detectedCityId:this.detectedCityId}).then((function(i){var s=i.objects;t.items=s,t.cachedResults[e]=s,t.isLoading=!1})))},selectItem:function(t){this.onSelect&&this.onSelect(t),this.$nav.back()}},watch:{search:function(t,e){this.loadСities()}}}),Tr=Er,Mr=Object(d["a"])(Tr,Lr,Nr,!1,null,null,null),Ur=Mr.exports,Fr={name:"GeoField",props:["item","value","options"],data:function(){return{city:null}},created:function(){this.city=this.value},methods:{showListOfCities:function(){var t=this,e=new Rs({component:Ur,props:{detectedCityId:this.city&&this.city.id||0,onSelect:this.onSelect},options:{myClass:"popup_fixed-top"}});this.$nav.pushInstant({activate:function(i){t.$store.dispatch("popups/openPopup",{popup:e,animated:i})},unload:function(i){t.$store.dispatch("popups/closePopup",{popup:e,animated:i})}})},onSelect:function(t){this.city=t,this.$emit("input",parseInt(t.id))}}},Rr=Fr,Vr=Object(d["a"])(Rr,Ar,Ir,!1,null,null,null),qr=Vr.exports,Dr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"input-field"},[i("input",{staticClass:"input-field__input",class:{"input-field__input_invalid":null!=t.error},attrs:{type:"text",placeholder:t.item.placeholder},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}}),t.error?i("div",{staticClass:"input-field__error"},[t._v(t._s(t.error))]):t._e()])},Hr=[],Br={name:"InputField",props:["item","value"],data:function(){return{error:null}},methods:{validate:function(t){return t.trim().length<2?{isValid:!1,error:this.$t("field_editor.name_error_incorrect")}:/^.{0,50}$/.test(t)?/^((?!http:\/\/|https:\/\/|www\.).)*$/i.test(t)?{isValid:!0,error:null}:{isValid:!1,error:this.$t("field_editor.name_error_link")}:{isValid:!1,error:this.$t("field_editor.name_error_long")}},errorHandler:function(t){this.error=t.message}},watch:{value:function(){var t=this.validate(this.value);this.error=t.error,this.$emit("validate",t.isValid)}}},Gr=Br,Wr=Object(d["a"])(Gr,Dr,Hr,!1,null,null,null),zr=Wr.exports,Zr={name:"FieldEditor",components:{Loader:m},props:["item","defaultValue","options","onUpdate"],data:function(){return{isLoading:!1,isValid:!0,editableValue:null}},created:function(){this.editableValue=this.getFieldValue()},computed:{},methods:{save:function(){var t=this;switch(this.item.type){case"geo":if(this.editableValue==this.defaultValue)return void this.$nav.back();break}this.isLoading=!0,Se({field_name:this.item.field,field_value:this.editableValue||""}).then((function(e){t.isLoading=!1;var i=e.objects[0].user;t.onUpdate&&t.onUpdate(i),t.$nativeStat.trackAppsFlyerEvent("af_update",{af_content_id:[t.item.field]}),t.$nav.back()}))},getFieldComponent:function(){switch(this.item.type){case"radio":return _r;case"number":return jr;case"checkbox":return wr;case"geo":return qr;case"input":return zr;case"text":default:return lr}},getFieldValue:function(){switch(this.item.type){case"radio":return this.defaultValue&&this.defaultValue.value;case"checkbox":return this.defaultValue&&this.defaultValue.map((function(t){return t.value}));case"input":return this.defaultValue;case"text":default:return this.defaultValue}},onValidate:function(t){this.isValid=t},getErrorMessage:function(t){switch(t){case"long_name":return this.$t("field_editor.name_error_long");case"bad_name":default:return this.$t("field_editor.name_invalid")}}}},Yr=Zr,Jr=Object(d["a"])(Yr,ir,sr,!1,null,null,null),Xr=Jr.exports,Qr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-error-popup"},[i("div",{staticClass:"popup__close",on:{click:function(e){return t.$nav.back()}}},[i("i",{staticClass:"ico ico_cross-gray"})]),i("div",{staticClass:"upload-error-popup__title"},[t._v(t._s(t.$t("upload_error.title")))]),i("div",{staticClass:"upload-error-popup__message"},[t._v(t._s(t.$t("upload_error.message")))])])},Kr=[],tc={name:"UploadErrorPopup"},ec=tc,ic=Object(d["a"])(ec,Qr,Kr,!1,null,null,null),sc=ic.exports,ac=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"waiters-popup__container"},[i("div",{staticClass:"popup__back",on:{click:function(e){return t.$nav.back()}}},[i("i",{staticClass:"ico ico_arrow-left-white-24"})]),t._m(0),t._m(1),i("div",{staticClass:"waiters-popup__bottom"},[i("div",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"waiters-popup__btn btn btn_orange"},[t._v(" "+t._s(t.$t("waiters.watch_all"))+" ")])])])},nc=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"waiters-popup__top"},[i("div",{staticClass:"waiters-popup-aim"},[i("div",{staticClass:"waiters-popup-aim__user"})]),i("div",{staticClass:"waiters-popup__title ellipsis"},[t._v(" Это лфвофрывлфрволфрволф ")]),i("div",{staticClass:"waiters-popup__text"},[t._v(" Она захотела, чтобы вы обратили на нее внимание ")]),i("div",{staticClass:"waiters-popup-motivator"},[i("div",{staticClass:"waiters-popup-motivator__ico ico ico_cards-blue"}),i("div",{staticClass:"waiters-popup-motivator__text"},[i("div",{staticClass:"waiters-popup-motivator__title"},[t._v(" Пролистайте 15 карточек ")]),t._v(" чтобы увидеть ее ")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"waiters-popup__middle"},[i("div",{staticClass:"waiters-popup-queue"},[i("div",{staticClass:"waiters-popup-queue__line"}),i("div",{staticClass:"waiters-popup-queue__user"}),i("div",{staticClass:"waiters-popup-queue__user"}),i("div",{staticClass:"waiters-popup-queue__user"}),i("div",{staticClass:"waiters-popup-queue__user"})]),i("div",{staticClass:"waiters-popup__info"},[t._v(" Больше 3 девушек ждут вашего внимания ")])])}],oc={name:"waiters-popup",props:["onClose"]},rc=oc,cc=Object(d["a"])(rc,ac,nc,!1,null,null,null),lc=cc.exports,uc=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"waiter-popup__container"},[t._m(0),i("div",{staticClass:"waiter-popup__bottom"},[i("div",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"waiter-popup__btn btn btn_purple"},[i("div",{staticClass:"ico ico_heart"}),t._v(" Побороться за неё ")]),i("span",{staticClass:"waiter-popup__link",on:{click:function(e){return t.$nav.back()}}},[t._v(" Не сейчас ")])])])},dc=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"waiter-popup__top"},[i("div",{staticClass:"waiter-popup-user"},[i("div",{staticClass:"waiter-popup-user__ava",staticStyle:{"background-image":"url(https://sun9-10.userapi.com/c851320/v851320058/1386fd/Zrp4BcCGR8U.jpg)"}}),i("div",{staticClass:"waiter-popup-user__shadow"}),i("div",{staticClass:"waiter-popup-user__name ellipsis"},[t._v(" asdasdkjahs djkahd asdjas dkjashd ajsdkah ")])]),i("div",{staticClass:"waiter-popup__text"},[t._v(" захотела, чтобы вы обратили на нее внимание ")])])}],pc={name:"get-waiter-popup"},mc=pc,hc=Object(d["a"])(mc,uc,dc,!1,null,null,null),fc=hc.exports,_c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"gamePopup",staticClass:"game-popup"},[t.state===t.states.GAME_STATE_START?[i("game-start",{attrs:{states:t.states,aim:t.aim,boosterAvailable:t.boosterAvailable,boosterPoints:t.boosterPoints,boosterRecoveryTime:t.boosterRecoveryTime},on:{playGame:t.playGame}})]:t._e(),t.state===t.states.GAME_STATE_PLAY?[i("game-play",{attrs:{states:t.states,enemy:t.enemy,aim:t.aim,boosterAvailable:t.boosterAvailable,boosterRecoveryTime:t.boosterRecoveryTime,boosterPoints:t.boosterPoints},on:{gameFinal:t.gameFinal}})]:t._e(),t.state===t.states.GAME_STATE_FINAL?[i("game-final",{attrs:{states:t.states,enemy:t.enemy,aim:t.aim,myScore:t.myScore,enemyScore:t.enemyScore,boosterAvailable:t.boosterAvailable}})]:t._e()],2)},vc=[],gc=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"game-popup-start"},[i("div",{staticClass:"game-popup__top game-popup__top_start"},[i("div",{staticClass:"game-popup-header"},[i("div",{staticClass:"game-popup-header__back",on:{click:function(e){return t.$nav.back()}}},[i("div",{staticClass:"ico ico_arrow-left-white-24"})]),i("div",{staticClass:"game-popup-header__name"},[t._v(t._s(t.aim.name))])])]),t._m(0),i("div",{staticClass:"game-popup-start__middle"},[i("div",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"btn btn_yellow game-popup-start__btn",on:{click:function(e){return t.$emit("playGame")}}},[t._v("Начать игру")])]),i("div",{staticClass:"game-popup-start__bottom"},[t.boosterAvailable?[i("div",{staticClass:"game-popup-start-booster"},[i("div",{staticClass:"game-popup-start-booster__info"},[i("div",{staticClass:"game-popup-start-booster__title"},[t._v("У вас преимущество!")]),t._v(" Вы "),i("span",[t._v("Premium")]),t._v(" пользователь! Во время игры вы сможете активировать +"+t._s(t.boosterPoints)+" очков раз в "+t._s(t.boosterRecoveryTime)+" секунд ")])]),i("div",{staticClass:"game-popup-start-booster__ico ico2 ico2_booster-promo-heart"},[t._v(" +"+t._s(t.boosterPoints)+" ")])]:[t._m(1),i("div",{staticClass:"game-popup-start-booster__ico ico2 ico2_booster-promo-heart"},[t._v(" +"+t._s(t.boosterPoints)+" ")]),i("div",{staticClass:"game-popup-start-booster__btn btn btn_purple",on:{click:t.openVipPopup}},[t._v(" Получить бустер "),i("span",[t._v("+"+t._s(t.boosterPoints)+" очков раз в "+t._s(t.boosterRecoveryTime)+" секунд")])])]],2)])},bc=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"game-popup-start__top"},[i("div",{staticClass:"ico2 ico2_heart-game"}),i("div",{staticClass:"game-popup-start__info"},[t._v(" Попади аватаркой девушки "),i("br"),t._v(" в сердце и опереди соперника ")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"game-popup-start-booster"},[i("div",{staticClass:"game-popup-start-booster__info"},[i("div",{staticClass:"game-popup-start-booster__title"},[t._v("Получи преимущество")]),t._v(" во время игры с "),i("span",[t._v("Premium")])])])}],Cc={functional:!0,render(t,e){const{_c:i,_v:s,data:a,children:n=[]}=e,{class:o,staticClass:r,style:c,staticStyle:l,attrs:u={},...d}=a;return i("svg",{class:[o,r],style:[c,l],attrs:Object.assign({width:"152",height:"40",viewBox:"0 0 152 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u),...d},n.concat([i("path",{attrs:{d:"M145.398 34C127.414 16.663 102.952 6 76 6 49.048 6 24.586 16.663 6.603 34",stroke:"#F0A0DF","stroke-width":"12","stroke-linecap":"round"}}),i("path",{attrs:{d:"M116 14.32C103.751 8.97 90.222 6 76 6c-14.222 0-27.75 2.969-40 8.32",stroke:"#FD6464","stroke-width":"12","stroke-linecap":"round"}})]))}},yc={functional:!0,render(t,e){const{_c:i,_v:s,data:a,children:n=[]}=e,{class:o,staticClass:r,style:c,staticStyle:l,attrs:u={},...d}=a;return i("svg",{class:[o,r],style:[c,l],attrs:Object.assign({viewBox:"0 0 360 26",xmlns:"http://www.w3.org/2000/svg",fill:"none"},u),...d},n.concat([i("path",{attrs:{d:"M0 26C80 6 280 6 360 26",fill:"#fff"}})]))}},wc=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"game-popup__top-decoration",style:{height:t.height+"px"}},[i("svg",{attrs:{viewBox:t.viewBoxString,xmlns:"http://www.w3.org/2000/svg",fill:"none"}},[i("path",{attrs:{d:t.pathString,fill:t.fillColor}})])])},kc=[],xc={name:"game-decor",props:["height","width","fillColor"],computed:{viewBoxString:function(){return"0 0 ".concat(this.width," ").concat(this.height)},pathString:function(){return"M0,".concat(this.height," C").concat(.22*this.width,",").concat(.23*this.height," ").concat(.77*this.width,",").concat(.23*this.height," ").concat(this.width,",").concat(this.height)}}},Pc=xc,$c=Object(d["a"])(Pc,wc,kc,!1,null,null,null),Oc=$c.exports,Sc={name:"game-start",components:{PlaceholderGame:Cc,DecorationTop:yc,GameDecor:Oc},props:{states:{type:Object},changeState:{type:Function},aim:{type:Object},boosterAvailable:{type:Boolean},boosterPoints:{type:Number},boosterRecoveryTime:{type:Number}},created:function(){},computed:{windowWidth:function(){return window.innerWidth}},methods:{openVipPopup:function(){Nl.showVipFullOffer()}}},jc=Sc,Ac=Object(d["a"])(jc,gc,bc,!1,null,null,null),Ic=Ac.exports,Lc=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"game-popup-play"},[i("game-countdown",{attrs:{timeToStart:t.timeToStart}}),i("div",{staticClass:"game-popup__top"},[i("game-decor",{attrs:{width:t.windowWidth,height:26,fillColor:"#fff"}}),i("div",{staticClass:"game-popup-header"},[i("div",{staticClass:"game-popup-header__back",on:{click:function(e){return t.$nav.back()}}},[i("div",{staticClass:"ico ico_arrow-left-white-24"})]),i("div",{staticClass:"game-popup-header__user"},[i("div",{staticClass:"game-popup-header__name"},[t._v(t._s(t.aim.name))])])]),i("users-scores",{attrs:{enemy:t.enemy,myScore:t.myScore,enemyScore:t.enemyScore}})],1),i("div",{staticClass:"game-popup-play__middle"},[i("div",{staticClass:"game-popup-play__circle"},[i("div",{staticClass:" game-popup-circle",style:t.transformCircleStyles},[i("div",{staticClass:"game-popup-circle__ava",style:{transform:t.transformUserAva}}),i("div",{staticClass:"game-popup-circle__inline",style:{transform:t.transformInline}},[i("div",{staticClass:"game-popup-circle__heart",class:{"game-popup-circle__heart_animated":t.gameIsRun}},[i("heart")],1),i("placeholder-game")],1),i("div",{staticClass:"game-popup-circle__timer",class:{"game-popup-circle__timer_alarm":t.gameEndIsNear}},[t._v(" "+t._s(t.timeEndString)+" ")]),i("div",{staticClass:"game-popup-circle-points"},[t._l(t.pointsForAnimation,(function(e){return[i("div",{staticClass:"game-popup-circle-points__count",class:t.getClassForPoints(e)},[i("div",{staticClass:"game-popup-circle-points__layer_1"}),i("div",{staticClass:"game-popup-circle-points__layer_2"}),i("div",{staticClass:"game-popup-circle-points__layer_3"},[t._v(" "+t._s(e)+" ")])])]}))],2)])]),i("users-progresses",{attrs:{enemy:t.enemy,myScore:t.myScore,enemyScore:t.enemyScore}}),t.boosterAvailable?i("game-booster",{attrs:{boosterSecondsFromLastUsedTime:t.boosterSecondsFromLastUsedTime},on:{activeBooster:t.activeBooster}}):t._e(),t.boosterAvailable?t._e():i("game-booster-promo",{attrs:{boosterPoints:t.boosterPoints,boosterRecoveryTime:t.boosterRecoveryTime}}),i("div",{staticClass:"game-popup-play__bottom"},[i("div",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"game-popup-play__btn btn btn_orange ripple ripple_white",class:{"game-popup-play__btn_disabled":!t.gameIsRun},on:{mousedown:t.shoot,touchstart:t.shoot}},[t._v("Попасть")])])],1)],1)},Nc=[],Ec={functional:!0,render(t,e){const{_c:i,_v:s,data:a,children:n=[]}=e,{class:o,staticClass:r,style:c,staticStyle:l,attrs:u={},...d}=a;return i("svg",{class:[o,r],style:[c,l],attrs:Object.assign({width:"126",height:"108",viewBox:"0 0 126 108",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u),...d},n.concat([i("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M20.626 2.902C36.373-4.226 54.37 2.23 63 17.315 71.62 2.23 89.618-4.226 105.37 2.902c17.244 7.807 25.264 28.952 17.885 47.231-7.301 18.12-59.364 57.195-60.25 57.851V108l-.005-.005-.005.005-.006-.016c-.88-.656-52.943-39.73-60.247-57.85-7.374-18.28.633-39.425 17.883-47.232",fill:"#FE4567"}})]))}},Tc=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"game-popup-play__sides"},[i("div",{staticClass:"game-popup-play-side game-popup-play-side_my",class:{"game-popup-play-side_lose":t.myScore<t.enemyScore}},[i("div",{staticClass:"game-popup-play-side__ava",style:{backgroundImage:"url("+t.currentUser.avatars.s5+")"}}),i("div",{staticClass:"game-popup-play-side__content"},[i("div",{staticClass:"game-popup-play-side__name"},[t._v(t._s(t.currentUser.name))]),i("div",{ref:"myScore",staticClass:"game-popup-play-side__score"},[t._v(" "+t._s(t.myScore)+" ")])])]),i("div",{staticClass:"game-popup-play-side game-popup-play-side_enemy",class:{"game-popup-play-side_lose":t.myScore>t.enemyScore}},[i("div",{staticClass:"game-popup-play-side__ava",style:{backgroundImage:"url("+t.enemy.user.avatars.s5+")"}}),i("div",{staticClass:"game-popup-play-side__content"},[i("div",{staticClass:"game-popup-play-side__name"},[t._v(t._s(t.enemy.user.name))]),i("div",{ref:"enemyScore",staticClass:"game-popup-play-side__score"},[t._v(" "+t._s(t.enemyScore)+" ")])])])])},Mc=[],Uc={name:"users-scores",props:{myScore:{type:Number,default:0},enemyScore:{type:Number,default:0},enemy:{type:Object,default:{}}},computed:Object(o["a"])({},Object(J["e"])(["currentUser"])),watch:{myScore:function(t,e){var i=this,s="#2CFFB3";t<e&&(s="#FF689E"),this.$refs.myScore.style.color=s,this.$refs.myScore.style.transform="scale(1.5)",setTimeout((function(){i&&i.$refs&&i.$refs.myScore&&(i.$refs.myScore.style.color="#fff",i.$refs.myScore.style.transform="scale(1)")}),700)},enemyScore:function(t,e){var i=this,s="#2CFFB3";t<e&&(s="#FF689E"),this.$refs.enemyScore.style.color=s,this.$refs.enemyScore.style.transform="scale(1.5)",setTimeout((function(){i&&i.$refs&&i.$refs.enemyScore&&(i.$refs.enemyScore.style.color="#fff",i.$refs.enemyScore.style.transform="scale(1)")}),700)}}},Fc=Uc,Rc=Object(d["a"])(Fc,Tc,Mc,!1,null,null,null),Vc=Rc.exports,qc=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"game-popup-play-progress"},[i("div",{staticClass:"game-popup-play-progress__line"},[i("div",{staticClass:"game-popup-play-progress__ava",style:t.progressStyles.my}),i("div",{staticClass:"game-popup-play-progress__ava",style:t.progressStyles.enemy})])])},Dc=[],Hc={name:"users-progresses",props:{myScore:{type:Number,default:0},enemyScore:{type:Number,default:0},enemy:{type:Object,default:{}}},computed:Object(o["a"])({progressStyles:function(){var t=100,e=0,i=0,s={backgroundImage:"url(".concat(this.currentUser.avatars.s5,")")},a={backgroundImage:"url(".concat(this.enemy.user.avatars.s5,")")};return this.myScore===this.enemyScore&&(s.left="-10px",a.left="10px"),this.myScore!==this.enemyScore&&(i=Math.abs(this.myScore-this.enemyScore),i=i>t?t:i,e=100*(t-i)/t,this.myScore>this.enemyScore?(s.top="".concat(e,"%"),a.top="100%"):(s.top="100%",a.top="".concat(e,"%"))),{my:s,enemy:a}}},Object(J["e"])(["currentUser"]))},Bc=Hc,Gc=Object(d["a"])(Bc,qc,Dc,!1,null,null,null),Wc=Gc.exports,zc=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"game-popup-play-booster",class:{"game-popup-play-booster_disabled":t.boosterSecondsFromLastUsedTime<t.boosterRecoveryTime}},[i("div",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"game-popup-play-booster__circle",on:{click:function(e){return t.$emit("activeBooster")}}},[i("circle-progress",{ref:"boosterCircleProgress",attrs:{diameter:72,percent:100,strokeWidth:8,strokeFill:"#FFC960",strokeFillBg:"#CA68EC"}}),i("div",{staticClass:"game-popup-play-booster__btn"},[i("div",{staticClass:"ico2 ico2_booster-heart"}),i("div",{staticClass:"game-popup-play-booster__points"},[t._v("+"+t._s(t.boosterPoints))])])],1),t.boosterSecondsFromLastUsedTime<t.boosterRecoveryTime?i("div",{staticClass:"game-popup-play-booster__title"},[t._v(" "+t._s(t.boosterRecoveryTime-t.boosterSecondsFromLastUsedTime)+" сек ")]):i("div",{staticClass:"game-popup-play-booster__title"},[t._v("Бустер")])])},Zc=[],Yc=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{style:{transform:"rotate("+t.anglePosition+"deg)"},attrs:{width:t.diameter,height:t.diameter,viewBox:"0 0 "+t.diameter+" "+t.diameter}},[i("circle",{attrs:{"stroke-width":t.strokeWidth,stroke:t.strokeFillBg,r:t.r,cx:t.center,cy:t.center,fill:t.circleFill}}),i("circle",{style:{strokeDasharray:t.dashData.array,strokeDashoffset:t.dashData.offset},attrs:{"stroke-width":t.strokeWidth,stroke:t.strokeFill,r:t.r,cx:t.center,cy:t.center,fill:"rgba(0,0,0,0)"}})])},Jc=[],Xc={name:"circle-progress",props:{diameter:{type:Number,required:!1,default:60},percent:{type:Number,required:!1,default:0},strokeWidth:{type:Number,required:!1,default:6},strokeFill:{type:String,required:!1,default:"rgba(0,0,0,1)"},strokeFillBg:{type:String,required:!1,default:"rgba(0,0,0,.1)"},circleFill:{type:String,required:!1,default:"rgba(0,0,0,0)"},anglePosition:{type:Number,required:!1,default:-90}},data:function(){return{currentPercent:0,center:30,r:27,dashArray:0,dashOffset:0}},computed:{dashData:function(){return this.dashArray=2*this.r*Math.PI,this.dashOffset=this.dashArray-this.dashArray*this.currentPercent/100,{array:this.dashArray,offset:this.dashOffset}}},created:function(){void 0!==this.percent&&(this.currentPercent=this.percent),this.center=this.diameter/2,this.r=this.center-this.strokeWidth/2},methods:{updatePercent:function(t){void 0!==t&&t>=0&&t<=100&&(this.currentPercent=t)}}},Qc=Xc,Kc=Object(d["a"])(Qc,Yc,Jc,!1,null,"106aeedc",null),tl=Kc.exports,el={name:"game-booster",props:{boosterSecondsFromLastUsedTime:{type:Number,default:25}},data:function(){return{boosterRecoveryTime:25,boosterPoints:25}},components:{CircleProgress:tl},watch:{boosterSecondsFromLastUsedTime:function(t){var e=100*t/this.boosterRecoveryTime;e=e>=100?100:e,this.$refs.boosterCircleProgress.updatePercent(e)}}},il=el,sl=Object(d["a"])(il,zc,Zc,!1,null,null,null),al=sl.exports,nl=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"game-popup-play-booster-promo"},[i("div",{staticClass:"game-popup-play-booster-promo__icon"},[i("div",{staticClass:"ico2 ico2_booster-promo-heart"}),i("div",{staticClass:"game-popup-play-booster-promo__points"},[t._v("+"+t._s(t.boosterPoints))]),i("div",{staticClass:"game-popup-play-booster-promo__title"},[t._v("VIP")])]),t._v(" С VIP вы можете получить +"+t._s(t.boosterPoints)+" очков каждые "+t._s(t.boosterRecoveryTime)+" секунд ")])},ol=[],rl={name:"game-booster-promo",props:{boosterPoints:{type:Number},boosterRecoveryTime:{type:Number}}},cl=rl,ll=Object(d["a"])(cl,nl,ol,!1,null,null,null),ul=ll.exports,dl=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"game-popup-countdown",class:{"game-popup-countdown_hidden":t.timeToStart<=0}},[t._v(" До старта игры: "),i("div",{staticClass:"game-popup-countdown__digit"},[t._v(" "+t._s(t.timeToStart)+" ")])])},pl=[],ml={name:"game-countdown",props:{timeToStart:{type:Number,default:3}}},hl=ml,fl=Object(d["a"])(hl,dl,pl,!1,null,null,null),_l=fl.exports,vl={name:"GamePlay",components:{GameBooster:al,PlaceholderGame:Cc,Heart:Ec,DecorationTop:yc,GameDecor:Oc,UsersProgresses:Wc,UsersScores:Vc,GameCountdown:_l,GameBoosterPromo:ul},data:function(){return{gameIsRun:!1,requestId:null,intervalUpdater:null,currentAvaRadian:0,deltaStartAngle:90,currentAimAngle:360,angleIn:56,timeEndGame:10,timeToStart:3,timeInGame:0,lastDrawTimestamp:0,deltaRadian:.04,speedMultiple:1.1,radius:100,myScore:0,enemyScore:0,pointsForAnimation:[],boosterSecondsFromLastUsedTime:25}},props:{aim:{type:Object,default:{avatars:{}}},enemy:{type:Object,default:{avatars:{}}},boosterAvailable:{type:Boolean},boosterPoints:{type:Number},boosterRecoveryTime:{type:Number}},computed:Object(o["a"])({windowWidth:function(){return window.innerWidth},timeEndString:function(){var t=this.timeEndGame,e=Math.floor(t/60);return t-=60*e,"".concat(e>=10?e:"0"+e,":").concat(t>=10?t:"0"+t)},transformUserAva:function(){var t=Math.cos(this.currentAvaRadian)*this.radius,e=Math.sin(this.currentAvaRadian)*this.radius;return"translateY(".concat(e,"px) translateX(").concat(t,"px)")},transformInline:function(){return"rotate(".concat(this.currentAimAngle,"deg)")},progressStyles:function(){var t=100,e=0,i=0,s={backgroundImage:"url(".concat(this.currentUser.avatars.s5,")")},a={backgroundImage:"url(".concat(this.enemy.user.avatars.s5,")")};return this.myScore===this.enemyScore&&(s.left="-10px",a.left="10px"),this.myScore!==this.enemyScore&&(i=Math.abs(this.myScore-this.enemyScore),i=i>t?t:i,e=100*(t-i)/t,this.myScore>this.enemyScore?(s.top="".concat(e,"%"),a.top="100%"):(s.top="100%",a.top="".concat(e,"%"))),{my:s,enemy:a}},gameEndIsNear:function(){return this.timeEndGame<=5},transformCircleStyles:function(){var t=180,e=(this.windowWidth-t)/(2*this.radius);return e=e>2?2:e,{transform:"scale(".concat(e,")")}}},Object(J["e"])(["currentUser"])),mounted:function(){var t=this;this.intervalUpdater=setInterval((function(){t.timeToStart>0?t.decrementTimeForStart():t.decrementTimeForEnd()}),1e3)},destroyed:function(){this.requestId&&window.cancelAnimationFrame(this.requestId),this.intervalUpdater&&clearInterval(this.intervalUpdater)},methods:{decrementTimeForStart:function(){this.timeToStart--,0===this.timeToStart&&(this.gameIsRun=!0,this.startGame())},startGame:function(){this.draw()},decrementTimeForEnd:function(){this.timeEndGame--,this.boosterSecondsFromLastUsedTime++,this.checkEndGame()},shoot:function(){var t=this;this.gameIsRun&&(this.pauseGame(),this.animateShootPoints().then((function(){t.updateAngleIn(),t.resumeGame()})))},activeBooster:function(){this.boosterSecondsFromLastUsedTime<this.boosterRecoveryTime||(this.animatePoints(this.boosterPoints),this.boosterSecondsFromLastUsedTime=0)},updateAngleIn:function(){var t=this.deltaStartAngle+this.angleIn/2,e=360+this.deltaStartAngle-this.angleIn/2;this.currentAimAngle=Math.floor(Math.random()*(e-t+1))+t},pauseGame:function(){this.gameIsRun=!1},resumeGame:function(){this.gameIsRun=!0,this.lastDrawTimestamp=+new Date,this.draw()},checkEndGame:function(){this.timeEndGame<0&&this.$emit("gameFinal",{myScore:this.myScore,enemyScore:this.enemyScore,isWin:this.myScore>=this.enemyScore})},draw:function(){if(this.gameIsRun){var t=+new Date,e=0;0===this.lastDrawTimestamp&&(this.lastDrawTimestamp=t),e=t-this.lastDrawTimestamp,this.timeInGame+=e,this.lastDrawTimestamp=t,this.drawAim(),this.drawScores(),this.requestId=window.requestAnimationFrame(this.draw)}},drawAim:function(){this.currentAvaRadian+=this.deltaRadian*this.speedMultiple},drawScores:function(){var t=this.timeInGame/1e3,e=!1;for(var i in this.enemy.timeLine){if(i>t)break;e=i}this.enemyScore=e?this.enemy.timeLine[e]:0},animateShootPoints:function(){var t=2*Math.PI,e=Math.floor(this.currentAvaRadian/t),i=this.currentAvaRadian-e*t,s=180*i/Math.PI,a=this.currentAimAngle-this.deltaStartAngle,n=0;return s>=a-this.angleIn/2&&s<=a+this.angleIn/2?(n=10,this.speedMultiple*=1.2):n=-5,this.animatePoints(n)},animatePoints:function(t){var e=this;return this.myScore=this.myScore+t<0?0:this.myScore+t,new Promise((function(i){e.pointsForAnimation.push(t),setTimeout((function(){e&&e.pointsForAnimation&&e.pointsForAnimation.shift(),i()}),1e3)}))},getClassForPoints:function(t){return t>0?"game-popup-circle-points__count_positive":"game-popup-circle-points__count_negative"}}},gl=vl,bl=Object(d["a"])(gl,Lc,Nc,!1,null,null,null),Cl=bl.exports,yl=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"game-popup-final",class:t.classCover},[i("div",{staticClass:"game-popup-final__lightning"}),i("div",{staticClass:"game-popup-final__top"},[i("div",{staticClass:"game-popup-final__title"},[t._v(" "+t._s(t.titlePopup)+" ")]),i("div",{staticClass:"extend-header__back game-popup-final__back",on:{click:function(e){return t.$nav.back()}}},[i("i",{staticClass:"ico ico_close-gray"})])]),i("div",{staticClass:"game-popup-final__middle"},[i("div",{staticClass:"game-popup-final__avatars"},[t.isWin?[i("div",{staticClass:"game-popup-final__pairs"},[i("div",{staticClass:"game-popup-final__avatar game-popup-final__avatar_my",style:{backgroundImage:"url("+t.currentUser.avatars.s5+")"}}),i("div",{staticClass:"game-popup-final__avatar",style:{backgroundImage:"url("+t.aim.avatars.s5+")"}}),i("div",{staticClass:"ico ico_feed-like"})]),i("div",{staticClass:"game-popup-final__avatar game-popup-final__avatar_enemy",style:{backgroundImage:"url("+t.enemy.user.avatars.s5+")"}})]:[i("div",{staticClass:"game-popup-final__avatar game-popup-final__avatar_my",style:{backgroundImage:"url("+t.currentUser.avatars.s5+")"}}),i("div",{staticClass:"game-popup-final__pairs"},[i("div",{staticClass:"game-popup-final__avatar game-popup-final__avatar_enemy",style:{backgroundImage:"url("+t.enemy.user.avatars.s5+")"}}),i("div",{staticClass:"game-popup-final__avatar",style:{backgroundImage:"url("+t.aim.avatars.s5+")"}}),i("div",{staticClass:"ico ico_feed-like"})])]],2),i("div",{staticClass:"game-popup-final-scores"},[i("div",{staticClass:"game-popup-final-scores__side game-popup-final-scores__side_my"},[i("div",{staticClass:"game-popup-final-scores__name"},[t._v(" Вы ")]),i("div",{staticClass:"game-popup-final-scores__score"},[t._v(" "+t._s(t.myScore)+" ")])]),i("div",{staticClass:"game-popup-final-scores__side game-popup-final-scores__side_enemy"},[i("div",{staticClass:"game-popup-final-scores__name"},[t._v(" "+t._s(t.enemy.user.name)+" ")]),i("div",{staticClass:"game-popup-final-scores__score"},[t._v(" "+t._s(t.enemyScore)+" ")])])])]),i("div",{staticClass:"game-popup-final__bottom"},[t.isWin?[i("div",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"btn btn_turquoise ripple_white ripple",on:{click:t.openChat}},[t._v(" Написать сообщение ")])]:[i("div",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"btn btn_yellow ripple_white ripple",on:{click:t.openChat}},[t._v(" Попросить второй шанс ")])],i("div",{staticClass:"game-popup-final__or"},[t._v("или")]),i("div",{staticClass:"game-popup-final__refuse",on:{click:function(e){return t.$nav.back()}}},[t._v(" Отказаться от нее ")])],2)])},wl=[],kl={name:"final",props:{boosterAvailable:{type:Boolean},myScore:{type:Number},enemyScore:{type:Number},enemy:{type:Object},aim:{type:Object}},computed:Object(o["a"])({isWin:function(){return this.myScore>=this.enemyScore},classCover:function(){return this.isWin?"game-popup-final_win":"game-popup-final_lose"},titlePopup:function(){return this.isWin?"Победа!":"Вы проиграли"}},Object(J["e"])(["currentUser"])),created:function(){console.log(this.boosterAvailable)},methods:{openChat:function(){this.boosterAvailable?Nl.openSendGift({user:this.aim}):this.$nav.push("/app/messenger/"+this.aim.id)}}},xl=kl,Pl=Object(d["a"])(xl,yl,wl,!1,null,null,null),$l=Pl.exports,Ol={name:"game-wrapper",components:{GameStart:Ic,GamePlay:Cl,GameFinal:$l},props:{card:{type:Object,default:{}}},data:function(){return{state:wt,aim:{},enemy:{user:{id:11,name:"EnemyName",gender:"m",age:121,avatars:{s1:"https://img.beauty.ua/pictures/content/14/14703.jpg",s2:"https://img.beauty.ua/pictures/content/14/14703.jpg",s3:"https://img.beauty.ua/pictures/content/14/14703.jpg",s4:"https://img.beauty.ua/pictures/content/14/14703.jpg",s5:"https://img.beauty.ua/pictures/content/14/14703.jpg"}},timeLine:{4:10,8:20,13:30,20:40,24:35,28:30,36:40}},boosterAvailable:!0,boosterRecoveryTime:25,boosterPoints:25,states:{GAME_STATE_START:wt,GAME_STATE_PLAY:kt,GAME_STATE_FINAL:xt},myScore:0,enemyScore:0}},created:function(){this.aim=this.card.card},methods:{playGame:function(){this.state=kt},gameFinal:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.myScore=t.myScore,this.enemyScore=t.enemyScore,this.state=xt}}},Sl=Ol,jl=Object(d["a"])(Sl,_c,vc,!1,null,null,null),Al=jl.exports,Il=y(),Ll={feedDS:null,queue:new V,init:function(){var t=this;this.feedDS=new Si([]),this.initCards(),Lt.registerMethod("disableAds",(function(){t.showVipFullOffer({source:ft})}))},checkPromo:function(t){var e=t.promo,i=t.rating,s=t.ask_photo;e&&this.showStartPromo(e),s&&this.showPhotoRequest(),i&&this.showAppReview()},initCards:function(){var t=2;while(t--)this.getNextCard()},getNextCard:function(){this.feedDS.getNextItem((function(t){"default"===t.status?oe.commit("feed/addCard",t.item):"loading"===t.status&&t.promise.then((function(t){oe.commit("feed/addCard",t)})).catch((function(){}))}))},likeAction:function(t){gi({to_user_id:t.id,type:et}).then((function(t){})),oe.commit("feed/incrementViewedCards"),this.getNextCard()},dislikeAction:function(t){gi({to_user_id:t.id,type:it}),oe.commit("feed/incrementViewedCards"),this.getNextCard()},skipAction:function(t){oe.commit("feed/removeCardById",t.id),this.getNextCard()},openPopup:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(i){sm.nav.pushInstant({unloadOther:e,activate:function(e){oe.dispatch("popups/openPopup",{popup:t,animated:e})},unload:function(e,s){oe.dispatch("popups/closePopup",{popup:t,animated:e,onClose:i(s)})}})}))},showPhotoUpload:function(t){var e,i={};switch(oe.state.feed.moderationStatus){case st:e=Ti,i=Object(o["a"])({},i,{},{myClass:"popup_extend"});break;default:e=qi}var s=new Rs({component:e,props:{card:t},options:i});this.openPopup(s)},showSwipeTutorial:function(t,e){var i=this,s="serious_swipe_".concat(t);if(!localStorage.getItem(s)){var a={component:zi,props:{dir:t,card:e}};t===ot&&Il===Ct&&(a.component=Ki);var n=new Rs(a);setTimeout((function(){i.openPopup(n)}),350),localStorage.setItem(s,"1")}},complain:function(t){var e=new Rs({component:Vn,props:{user:t}});return this.openPopup(e)},showStartPromo:function(t){var e=this,i=new Rs({component:Wn,props:{promo:t},options:{myClass:"popup_extend"}});this.queue.next((function(t){e.openPopup(i)}))},showAppReview:function(){var t=this,e=new Rs({component:Review});this.queue.next((function(i){t.openPopup(e)}))},showReviewResult:function(t){var e=new Rs({component:ReviewResult,props:t});this.openPopup(e)},showPhotoRequest:function(){var t=this,e=new Rs({component:Qn,options:{myClass:"popup_extend"}});this.queue.next((function(i){t.openPopup(e).then(i)}))},showSettings:function(){var t=new Rs({component:ao,options:{myClass:"popup_extend"}});this.openPopup(t)},openProfile:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=new Rs({component:Ho,props:t,options:{myClass:"popup_extend"}});this.openPopup(i,e)},openSendGift:function(t){var e=new Rs({component:uo,props:t,options:{myClass:"popup_extend"}});this.openPopup(e,!1)},editProfile:function(){var t=new Rs({component:er,options:{myClass:"popup_extend"}});this.openPopup(t)},editField:function(t){var e=new Rs({component:Xr,props:t,options:{}});this.openPopup(e)},filterBy:function(t){var e=this;bi(t).then((function(){e.resetCards()}))},resetCards:function(){oe.commit("feed/clear"),this.feedDS=new Si([]),this.initCards()},showVipFullOffer:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=new Rs({component:fs,props:e,options:{myClass:"popup_extend"}});return this.openPopup(i).then((function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=oe.state.vip.purchaseOffer;return s&&s.is_one_time_offer&&!i.success?t.showVipFullOffer({source:e.source}):i}))},showConfirmPopup:function(t){var e=new Rs({component:ys,props:t});return this.openPopup(e)},showMessageLimit:function(t){var e=this,i=new Rs({component:Os,props:{user:t},options:{myClass:"popup_extend"}});this.queue.next((function(t){e.openPopup(i).then(t)}))},showUploadError:function(){var t=new Rs({component:sc});this.openPopup(t)},openChatWithUser:function(t){var e=new Rs({component:En,props:{id:t},options:{myClass:"popup_extend",ignoreBottomBanner:!0}});this.openPopup(e)},showWaiters:function(){var t=new Rs({component:lc,options:{myClass:"popup_extend popup_waiters"}});this.openPopup(t)},showGetWaiter:function(){var t=new Rs({component:fc,options:{myClass:"popup_extend popup_waiter"}});this.openPopup(t)},showGame:function(t){var e=new Rs({component:Al,props:{card:t},options:{myClass:"popup_extend popup_game"}});this.openPopup(e)}},Nl=Ll,El={name:"Card",mixins:[ii],components:{CardInfo:ci,CardActions:fi},data:function(){return{showing:!0,interactMaxRotation:5}},props:["card","isCurrent"],computed:Object(o["a"])({photoUrl:function(){return this.card.avatars.s5},isDraggedLeft:function(){return!this.interactAnimating&&this.interactPosition.x<0},isDraggedRight:function(){return!this.interactAnimating&&this.interactPosition.x>0},absoluteDraggedDistance:function(){return Math.abs(this.interactPosition.x)},indicatorStyles:function(){return{opacity:1}},indicatorLineStyles:function(){var t=this.isDraggedLeft||0===this.interactPosition.x;return{like:{opacity:t?0:1},dislike:{opacity:t?1:0}}},actionStyles:function(){return{opacity:0!==this.interactPosition.x?0:1}},dialogLockedByDailyLimit:function(){return!this.hasVip&&!this.card.is_open&&!this.canOpenDialog}},Object(J["e"])("vip",["hasVip"]),{},Object(J["e"])("feed",["likeActionLocked","viewedCardsAfterPhotoRequest"]),{},Object(J["c"])("feed",["needUploadPhoto","numCardsBeforeRequestPhoto","canOpenDialog"])),mounted:function(){this.isCurrent&&this.trackViewEvent()},methods:Object(o["a"])({draggedRight:function(){this.likeAction()},draggedLeft:function(){this.dislikeAction()},likeAction:function(){this.playCard(),this.interactSetPosition({x:this.interactOutOfSightXCoordinate,rotation:this.interactMaxRotation}),this.$emit("likeAction"),Nl.showGame({card:this.card}),this.hideCard()},dislikeAction:function(){this.likeActionLocked&&(this.unlockLikeAction(),this.resetPhotoRequestCounter()),this.playCard(),this.interactSetPosition({x:-this.interactOutOfSightXCoordinate,rotation:-this.interactMaxRotation}),this.$emit("dislikeAction"),this.hideCard()},playCard:function(){this.interactUnsetElement()},hideCard:function(){var t=this;setTimeout((function(){t.showing=!1,t.$emit("hideCard",t.card)}),300)},sendMessage:function(){this.dialogLockedByDailyLimit?Nl.showMessageLimit(this.card):Nl.openChatWithUser(this.card.id)},trackViewEvent:function(){}},Object(J["d"])("feed",["lockLikeAction","unlockLikeAction","resetPhotoRequestCounter"])),watch:{isCurrent:function(t){}}},Tl=El,Ml=Object(d["a"])(Tl,Qe,Ke,!1,null,null,null),Ul=Ml.exports,Fl={name:"Cards",components:{Card:Ul,Loader:m},props:["cards"],data:function(){return{visibleVipPromo:!1}},computed:Object(o["a"])({isCardsLoading:function(){return this.isLoading&&0===this.cards.length}},Object(J["e"])("vip",["hasVip"]),{},Object(J["e"])("feed",["isLoading","viewedCards"]),{},Object(J["c"])("feed",["currentCard"])),methods:{handleClickProfile:function(){Nl.openProfile({card:this.currentCard})}},watch:{viewedCards:function(t){}}},Rl=Fl,Vl=Object(d["a"])(Rl,Je,Xe,!1,null,null,null),ql=Vl.exports,Dl=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cards"},[i("div",{staticClass:"cards__list"},[i("div",{staticClass:"card-item card-item__is-current"},[i("div",{staticClass:"empty-feed"},[i("div",{staticClass:"empty-feed__title",domProps:{innerHTML:t._s(t.title)}}),i("div",{staticClass:"empty-feed__message",domProps:{innerHTML:t._s(t.$t("empty_feed.msg"))}})])]),i("div",{staticClass:"card-item"}),i("div",{staticClass:"card-item"})])])},Hl=[],Bl={name:"EmptyFeed",computed:{title:function(){return this.$t("empty_feed.title",{search_gender:this.$t("search_gender_female")})}}},Gl=Bl,Wl=Object(d["a"])(Gl,Dl,Hl,!1,null,null,null),zl=Wl.exports,Zl=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"feed-limit"},[i("div",{staticClass:"feed-limit__title",domProps:{innerHTML:t._s(t.title)}}),i("div",{staticClass:"feed-limit__message",domProps:{innerHTML:t._s(t.$t("feed_limit.msg"))}})])},Yl=[],Jl={name:"FeedLimit",props:["limitData"],computed:{title:function(){var t=this.isMan?this.$t("feed_limit.female"):this.$t("feed_limit.male");return this.$t("feed_limit.title",{gender:t})},isMan:function(){return this.$store.state.config.user.gender===nt}}},Xl=Jl,Ql=Object(d["a"])(Xl,Zl,Yl,!1,null,null,null),Kl=Ql.exports,tu=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"feed-promo-photo"},[t._m(0),i("div",{staticClass:"feed-promo-photo__text"},[t._v(" Сейчас ни одна девушка не видит вас ")]),i("div",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"feed-promo-photo__btn btn btn_orange ripple ripple_white"},[t._v("Загрузить")])])},eu=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"feed-promo-photo__title"},[t._v(" Загрузите фото "),i("div",{staticClass:"feed-promo-photo__circle"})])}],iu={name:"promo-photo"},su=iu,au=Object(d["a"])(su,tu,eu,!1,null,null,null),nu=au.exports,ou=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"filter-settings"},[i("div",{staticClass:"filter-settings__back",on:{click:function(e){return t.$emit("close")}}}),i("div",{staticClass:"filter-settings__content"},[i("div",{staticClass:"filter-settings__head"},[t._v(" "+t._s(t.$t("filter.head"))+" "),i("button",{on:{click:t.save}},[t._v(t._s(t.$t("filter.action")))])]),i("div",{staticClass:"filter-settings__params"},[i("div",{staticClass:"filter-settings__params-title"},[t._v(" "+t._s(t.$t("filter.age"))+" "),i("span",[t._v(t._s(t.ageRange[0])+"-"+t._s(t.ageRange[1]))])]),i("vue-slider",t._b({on:{change:function(e){t.isChanged=!0}},model:{value:t.ageRange,callback:function(e){t.ageRange=e},expression:"ageRange"}},"vue-slider",t.sliderOptions,!1))],1)])])},ru=[],cu=i("4971"),lu=i.n(cu),uu={name:"FilterSettings",components:{VueSlider:lu.a},data:function(){return{ageRange:[0,100],sliderOptions:{dotSize:20,height:2,min:18,max:100,tooltip:"none",duration:0},isChanged:!1}},computed:Object(o["a"])({},Object(J["e"])("feed",["filter"])),created:function(){this.ageRange[0]=this.filter.age_from,this.ageRange[1]=this.filter.age_to},methods:Object(o["a"])({save:function(){this.isChanged&&this.setFilter({age_from:this.ageRange[0],age_to:this.ageRange[1]}),this.$emit("close")}},Object(J["d"])("feed",["setFilter"]))},du=uu,pu=Object(d["a"])(du,ou,ru,!1,null,null,null),mu=pu.exports,hu=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.containerClasses,on:{click:t.showGetWaiter}},[i("div",{staticClass:"waiters__progress"},[t._v(" "+t._s(t.titleProgress)+" ")]),i("div",{staticClass:"waiters__motivator"},[i("div",{staticClass:"waiters__users"},[i("div",{staticClass:"waiters-user waiters-user_current"},[i("svg",{staticClass:"waiters-user__progress",attrs:{width:"60",height:"60",viewBox:"0 0 60 60"}},[i("circle",{staticClass:"waiters-user__circle",attrs:{stroke:"6",r:"27",cx:"30",cy:"30"}}),i("circle",{staticClass:"waiters-user__circle waiters-user__circle_current",staticStyle:{"stroke-dasharray":"87.96459430051421","stroke-dashoffset":"85.73615791156784"},attrs:{stroke:"6",r:"27",cx:"30",cy:"30"}})])]),i("div",{staticClass:"waiters-user"}),i("div",{staticClass:"waiters-user"})]),t._v(" "+t._s(t.titleMotivation)+" ")])])},fu=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"waiters-user waiters-user_empty"},[i("div",{staticClass:"ico ico_question-blue"})])}],_u={name:"waiters",data:function(){return{aimCountCards:25,waiters:[{id:1,name:"Name",gender:"f",countFor:25,avatars:{s:"https://sun9-38.userapi.com/c858032/v858032599/128d97/P7hNkmD0F70.jpg"}},{id:1,name:"Name",gender:"f",countFor:25,avatars:{s:"https://sun9-38.userapi.com/c858032/v858032599/128d97/P7hNkmD0F70.jpg"}}]}},computed:Object(o["a"])({containerClasses:function(){var t=["waiters"];return 0===this.waiters.length&&t.push("waiters_empty"),t},titleProgress:function(){var t="";if(this.aimCountCards>0){var e=this.$t("waiters.aim_cards_count",{count:this.aimCountCards});t=this.waiters.length?this.$t("waiters.progress_aim",{aim:"m"===this.waiters[0].gender?this.$t("for_him"):this.$t("for_her"),aim_distance:e}):this.$t("waiters.progress_empty",{aim_distance:e})}return t},titleMotivation:function(){return this.waiters.length?this.$t("waiters.watch_all"):this.$t("waiters.watch_vip")}},Object(J["e"])("feed",["viewedCards"])),watch:{viewedCards:function(t){}},methods:{showWaiters:function(){Nl.showWaiters()},showGetWaiter:function(){Nl.showGetWaiter()}}},vu=_u,gu=Object(d["a"])(vu,hu,fu,!1,null,null,null),bu=gu.exports,Cu={name:"Feed",components:{Settings:Ye,Cards:ql,EmptyFeed:zl,FeedLimit:Kl,FilterSetting:mu,Waiters:bu,PromoPhoto:nu},data:function(){return{filterMode:!1,hasMainPhoto:!0}},computed:Object(o["a"])({},Object(J["e"])("feed",["visibleCards","filter","feedLimit","viewedCards","viewedCardsAfterPhotoRequest"]),{},Object(J["e"])("vip",["hasVip"]),{},Object(J["c"])("feed",["currentCard","isEmpty","hasLimit","needUploadPhoto"])),created:function(){var t=this.$nav.activeIntent&&this.$nav.activeIntent.query||{};Nl.init(Object(o["a"])({},{},{},t))},methods:{handleLikeAction:function(){Nl.likeAction(this.currentCard)},handleDislikeAction:function(){Nl.dislikeAction(this.currentCard)},removeCardFromDeck:function(){this.$store.commit("feed/removeCurrentCard")},showFilter:function(){this.filterMode=!0}},watch:{filter:function(t,e){t&&e&&(t.age_from===e.age_from&&t.age_to===e.age_to||Nl.filterBy(t))},feedLimit:function(t,e){null==t&&null!=e&&Nl.resetCards()},viewedCards:function(t){var e=Fo.getPlacement(pt);if(!this.hasVip&&e){var i=e.options.interval||10;t%i===1?Fo.load(pt):t%i===0&&Fo.present(pt)}}}},yu=Cu,wu=Object(d["a"])(yu,De,He,!1,null,null,null),ku=wu.exports,xu=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"incoming"},[t._m(0),i("div",{staticClass:"incoming__content"},[t.isLoading?i("div",{staticClass:"loader-wrap loader-wrap-inside"},[i("loader")],1):t.list.length>0?t._l(t.list,(function(t,e){return i("incoming-item",{key:t.id,attrs:{item:t}})})):i("div",{staticClass:"incoming__empty"},[i("div",{staticClass:"incoming__empty-text",domProps:{innerHTML:t._s(t.emptyStateText)}}),i("div",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"btn btn_orange ripple ripple_white",on:{click:function(e){return t.$nav.push("/app/feed")}}},[t._v(" "+t._s(t.$t("incoming.empty.btn_view"))+" ")])])],2)])},Pu=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"incoming__top"},[t._v(" События "),i("div",{staticClass:"incoming__counter"},[t._v("+1")])])}];function $u(t){return new Promise((function(t,e){setTimeout((function(){t({status:1,data:{list:[{new:10,user:{id:1,name:"Name",online:!0,avatars:{s2:"https://sun9-45.userapi.com/c856520/v856520560/953a6/Z8U-GqMOI7s.jpg?ava=1"}},lastEvent:{time:100,type:1}},{new:0,user:{id:2,name:"Name 2",online:!0,avatars:{s2:"https://sun9-45.userapi.com/c856520/v856520560/953a6/Z8U-GqMOI7s.jpg?ava=1"}},lastEvent:{time:120,type:2}},{new:0,user:{id:2,name:"Name 2",online:!0,avatars:{s2:"https://sun9-45.userapi.com/c856520/v856520560/953a6/Z8U-GqMOI7s.jpg?ava=1"}},lastEvent:{time:120,type:3}},{new:0,user:{id:2,name:"Name 2",online:!0,avatars:{s2:"https://sun9-45.userapi.com/c856520/v856520560/953a6/Z8U-GqMOI7s.jpg?ava=1"}},lastEvent:{time:120,type:4}},{new:0,user:{id:2,name:"Name 2",online:!0,avatars:{s2:"https://sun9-45.userapi.com/c856520/v856520560/953a6/Z8U-GqMOI7s.jpg?ava=1"}},lastEvent:{time:120,type:5}},{new:0,user:{id:2,name:"Name 2",online:!0,avatars:{s2:"https://sun9-45.userapi.com/c856520/v856520560/953a6/Z8U-GqMOI7s.jpg?ava=1"}},lastEvent:{time:120,type:6}}]}})}),200)}))}var Ou=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"incoming-item ripple ripple_lightblue",class:t.classes,on:{click:t.openIncomingForUser}},[i("div",{staticClass:"incoming-item__ava-wrapper"},[i("div",{staticClass:"incoming-item__ava",style:{backgroundImage:"url("+t.photoUrl+")"}},[t.item.user.online?i("div",{staticClass:"online-status"}):t._e()])]),i("div",{staticClass:"incoming-item__right-side"},[i("div",{staticClass:"incoming-item__title"},[i("div",{staticClass:"incoming-item__name",domProps:{innerHTML:t._s(t.item.user.name)}}),t.item.lastEvent?i("div",{staticClass:"incoming-item__date"},[t._v(" "+t._s(t.date)+" ")]):t._e()]),i("div",{staticClass:"incoming-item__message"},[i("div",{staticClass:"incoming-item__message-text ellipsis",domProps:{innerHTML:t._s(t.message)}}),t.item.new>0?i("div",{staticClass:"incoming-item__count"},[t._v("+"+t._s(t.item.new))]):t._e()])])])},Su=[],ju={name:"IncomingItem",props:{item:{type:Object}},computed:{photoUrl:function(){return this.item.user.avatars.s2},date:function(){return Us(1e3*this.item.lastEvent.time)},classes:function(){var t=[];return this.item.new>0?t.push("incoming-item_unread-theirs"):this.item.unread&&t.push("incoming-item_unread-mine"),this.item.user.online&&t.push("incoming-item_online"),t},message:function(){var t="";switch(this.item.lastEvent.type){case 1:t="Увидел вас";break;case 2:t="Посмотрел ваши фотографии";break;case 3:t="Зашёл в гости";break;case 4:t="Не захотел добавиться вас";break;case 5:t="Выйграл вас";break;case 6:t="Попросил дать ещё шанс ему";break}return t}},methods:{openIncomingForUser:function(){this.$nav.push("/app/incoming/"+this.item.user.id)}}},Au=ju,Iu=Object(d["a"])(Au,Ou,Su,!1,null,null,null),Lu=Iu.exports,Nu={name:"Incoming",components:{Loader:m,IncomingItem:Lu},data:function(){return{isLoading:!1,isUploading:!1,isBuying:!1,isAutoOpen:!1,list:[]}},computed:Object(o["a"])({emptyStateText:function(){var t=this.isMan?this.$t("incoming.empty.first_m"):this.$t("incoming.empty.first_w");return this.$t("incoming.empty.like",{gender:t})},emptyStateTextPhoto:function(){var t=this.isMan?this.$t("incoming.empty.female"):this.$t("incoming.empty.male");return this.$t("incoming.empty.photo_msg",{gender:t})},isMan:function(){return this.currentUser.gender===nt}},Object(J["e"])(["currentUser"]),{},Object(J["e"])("feed",["counters"])),created:function(){this.loadNotifications()},methods:Object(o["a"])({loadNotifications:function(){var t=this;this.isLoading=!0,$u({offset:0,include:"user,user.photos",limit:100}).then((function(e){t.list=e.data.list,t.isLoading=!1}))},markAsRead:function(t){},onFileChange:function(t){var e=this;this.isUploading||(this.isUploading=!0,Ii.uploadPhoto(t,!0).then((function(t){e.isUploading=!1,e.$nativeStat.trackCommonEvent("my_photo_upload",{source:"Likes"}),e.$nativeStat.trackAppsFlyerEvent("ap_my_photo_upload",{ap_source:"Likes"})})).catch((function(){e.isUploading=!1,Nl.showUploadError()})))}},Object(J["d"])("feed",["decreaseEventsCounter"]))},Eu=Nu,Tu=Object(d["a"])(Eu,xu,Pu,!1,null,null,null),Mu=Tu.exports,Uu=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"incoming-user"},[t.isLoading?void 0:[i("div",{staticClass:"incoming-user-head"},[i("div",{staticClass:"incoming-user-head__button",on:{click:function(e){return t.$nav.back()}}},[i("div",{staticClass:"ico ico_arrow-left-blue-24"})]),i("div",{staticClass:"incoming-user-head-user"},[i("div",{staticClass:"incoming-user-head-user__ava-wrapper",on:{click:t.openProfile}},[i("div",{staticClass:"incoming-user-head-user__ava",style:{backgroundImage:"url("+t.avaSrc+")"}}),t.user.online?i("div",{staticClass:"online"}):t._e()]),i("div",{staticClass:"incoming-user-head-user__name"},[t._v(t._s(t.user.name))])]),i("div",{staticClass:"messenger-chat-head__controls"},[i("div",{staticClass:"messenger-chat-head__button",on:{click:t.openMenu}},[i("div",{staticClass:"ico ico_menu-blue-24"})])]),t.isOpeningDialog?i("actions-dialog",{attrs:{actions:t.actions},on:{close:function(e){t.isOpeningDialog=!1},select:t.onSelectAction}}):t._e()],1),i("div",{staticClass:"incoming-user-list"},t._l(t.list,(function(e,s){return i("incoming-user-item",{key:s,attrs:{user:t.user,item:e}})})),1)]],2)},Fu=[],Ru=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.classes},[i("div",{staticClass:"incoming-user-item__bubble"},[i("div",{staticClass:"incoming-user-item__text",domProps:{innerHTML:t._s(t.text)}}),i("div",{staticClass:"incoming-user-item__link",domProps:{innerHTML:t._s(t.link)}})])])},Vu=[],qu={name:"incoming-user-item",props:{item:{type:Object},user:{}},computed:Object(o["a"])({isMine:function(){return this.currentUser.id===this.user.id},classes:function(){var t=["incoming-user-item"];return this.isMine&&t.push("incoming-user-item_mine"),t},text:function(){var t="";switch(this.item.type){case 1:t="Первый тип сигнала отправляемого от пользователя";break;case 2:t="Второй тип сигнала отправляемого от пользователя";break;case 3:t="Третий тип сигнала отправляемого от пользователя";break;case 4:t="Четвёртый тип сигнала отправляемого от пользователя";break;case 5:t="Пятый тип сигнала отправляемого от пользователя";break}return t},link:function(){var t="";switch(this.item.type){case 1:t="Ссылка первого типа";break;case 2:t="Ссылка второго типа";break;case 3:t="Ссылка третьего типа";break;case 4:t="Ссылка четвёртого типа";break;case 5:t="Ссылка пятого типа";break}return t}},Object(J["e"])(["currentUser"]))},Du=qu,Hu=Object(d["a"])(Du,Ru,Vu,!1,null,null,null),Bu=Hu.exports,Gu={name:"incoming-user",components:{ActionsDialog:aa,IncomingUserItem:Bu},props:{incomingItem:{type:Object}},computed:{avaSrc:function(){return this.user.avatars.s5}},created:function(){this.loadIncoming()},data:function(){return{isLoading:!1,isOpeningDialog:!1,list:[],user:{},actions:[{label:"Почистить",id:1}]}},methods:{onSelectAction:function(t){switch(this.isOpeningDialog=!1,this.isUploading=!0,t){case 1:this.complain();break;case 2:break}},openProfile:function(){},openMenu:function(){this.isOpeningDialog=!0},loadIncoming:function(){this.isLoading=!1,this.user={id:10,name:"Name",gander:"f",online:!0,avatars:{s1:"https://sun9-54.userapi.com/c851520/v851520118/1bf303/_ZG4yGzlOQU.jpg?ava=1",s2:"https://sun9-54.userapi.com/c851520/v851520118/1bf303/_ZG4yGzlOQU.jpg?ava=1",s3:"https://sun9-54.userapi.com/c851520/v851520118/1bf303/_ZG4yGzlOQU.jpg?ava=1",s4:"https://sun9-54.userapi.com/c851520/v851520118/1bf303/_ZG4yGzlOQU.jpg?ava=1",s5:"https://sun9-54.userapi.com/c851520/v851520118/1bf303/_ZG4yGzlOQU.jpg?ava=1"}},this.list=[{userId:111,type:1,time:200},{userId:10,type:2,time:200},{userId:111,type:3,time:200},{userId:111,type:4,time:200}]}}},Wu=Gu,zu=Object(d["a"])(Wu,Uu,Fu,!1,null,null,null),Zu=zu.exports,Yu=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"extend"},[i("div",{staticClass:"my-profile"},[i("div",{staticClass:"my-profile__top"},[i("div",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"my-profile__settings ripple ripple_white",on:{click:t.settings}},[i("div",{staticClass:"ico ico_setting"})]),i("my-profile-avatar")],1),i("div",{staticClass:"my-profile__middle"},[i("my-profile-vip"),i("div",{staticClass:"my-profile__divider"})],1),i("div",{staticClass:"user-profile-info user-profile-info_base"},[i("div",{staticClass:"user-profile-info__header"},[t._m(0),i("div",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"user-profile-info__change ripple_lightblue ripple",on:{click:function(e){return t.editField(t.age)}}},[t._v("change")])]),t._m(1)]),i("div",{staticClass:"user-profile-info user-profile-info_photo"},[i("div",{staticClass:"user-profile-info__header"},[i("div",{staticClass:"user-profile-info__title"},[t._v("Photo")]),i("div",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"user-profile-info__change ripple_lightblue ripple"},[t._v("add")])]),i("div",{staticClass:"user-profile-info__content"},[i("div",{staticClass:"my-profile__photos"},[i("div",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"my-profile__photo my-profile__photo_add ripple ripple_white"},[i("div",{staticClass:"ico-native ico-native_plus"}),t._v(" Добавить ")]),i("div",{staticClass:"my-profile__photo",staticStyle:{"background-image":"url('https://im0-tub-ru.yandex.net/i?id=aaa0c700a686125e286e3d2aac86fd91&n=33&w=225&h=150')"},on:{click:t.openPhoto}}),i("div",{staticClass:"my-profile__photo",staticStyle:{"background-image":"url('https://im0-tub-ru.yandex.net/i?id=2a81d92675aa40ca17cc84259845ba60&n=33&w=221&h=150')"},on:{click:t.openPhoto}}),i("div",{staticClass:"my-profile__photo",staticStyle:{"background-image":"url('https://im0-tub-ru.yandex.net/i?id=8d3bd36b42c2b190ed9f8030f1dd88e5&n=33&w=252&h=150')"},on:{click:t.openPhoto}})])])]),i("div",{staticClass:"user-profile-info"},[i("div",{staticClass:"user-profile-info__header"},[i("div",{staticClass:"user-profile-info__title"},[t._v("Title")]),i("div",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"user-profile-info__change ripple_lightblue ripple",on:{click:function(e){return t.editField(t.about)}}},[t._v("change")])]),i("div",{staticClass:"user-profile-info__content"},[t._v(" Люблю гулять под луной. Живу с родителями. Я танцую и пою, и себя не узнаю. А еще много чит... ")])])])])},Ju=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user-profile-info__title ellipsis"},[i("span",{staticClass:"online-status"}),t._v("Name, 32 ")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user-profile-info__content user-profile-info__content_location"},[i("div",{staticClass:"ico ico_location"}),t._v("Moscow ")])}],Xu=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"my-profile-avatar",style:t.avatarStyles},[t.hasMainPhoto?i("div",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"my-profile-avatar__uploader my-profile-avatar__uploader_mini ripple ripple_white",on:{click:t.uploaderOpen}},[i("div",{staticClass:"ico ico_photo-add-small"})]):i("div",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"my-profile-avatar__uploader my-profile-avatar__uploader_big ripple ripple_white",on:{click:t.uploaderOpen}},[i("div",{staticClass:"ico ico_photo-add-big"}),i("div",{staticClass:"my-profile-avatar__text"},[t._v(" Добавить фото ")])])])},Qu=[],Ku={name:"my-profile-avatar",data:function(){return{isLoadingStatus:!1,hasMainPhoto:!0}},computed:{avatarStyles:function(){return this.hasMainPhoto?{backgroundImage:"url(https://avatars.mds.yandex.net/get-pdb/27625/3d12982b-61d2-4458-b5e0-f8cbe4db85cc/s1200)"}:{}},uploaderClass:function(){var t=["my-profile-avatar__uploader"];return this.hasMainPhoto?t.push("my-profile-avatar__uploader_mini"):t.push("my-profile-avatar__uploader_big"),t}},methods:{uploaderOpen:function(){console.log("uploader open")}}},td=Ku,ed=Object(d["a"])(td,Xu,Qu,!1,null,null,null),id=ed.exports,sd=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},ad=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"my-profile-soft my-profile-soft_views"},[i("div",{staticClass:"my-profile-soft__ico ico ico_views"}),i("div",{staticClass:"my-profile-soft__text"},[i("div",{staticClass:"my-profile-soft__title"},[t._v("Показы")]),i("div",{staticClass:"my-profile-soft__link"},[t._v("Добавить")])]),i("div",{staticClass:"my-profile-soft__side"},[i("div",{staticClass:"my-profile-soft-views"},[i("div",{staticClass:"my-profile-soft-views__count"},[t._v(" 1000 ")]),i("div",{staticClass:"my-profile-soft-views__add"})])])])}],nd={name:"my-profile-views"},od=nd,rd=Object(d["a"])(od,sd,ad,!1,null,null,null),cd=rd.exports,ld=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"my-profile-soft my-profile-soft_vip"},[i("div",{staticClass:"my-profile-soft__ico ico ico_crown"}),i("div",{staticClass:"my-profile-soft__text"},[i("div",{staticClass:"my-profile-soft__title"},[t._v("Premium")]),i("div",{staticClass:"my-profile-soft__link",on:{click:t.showVipPopup}},[t._v("Активировать")])]),i("div",{staticClass:"my-profile-soft__side"},[i("slider-form",{attrs:{"is-on":"true"},on:{click:t.showVipPopup}})],1)])},ud=[],dd=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.sliderClasses,on:{click:t.trigger}},[i("div",{staticClass:"slider__circle"})])},pd=[],md={name:"slider-form",props:["onClick","isOn"],data:function(){return{isActive:this.isOn}},computed:{sliderClasses:function(){var t=["slider"];return this.isActive&&t.push("slider_on"),t}},methods:{trigger:function(){this.isActive=!this.isActive,this.onClick&&this.onClick(this.isActive)}}},hd=md,fd=Object(d["a"])(hd,dd,pd,!1,null,null,null),_d=fd.exports,vd={name:"my-profile-vip",components:{SliderForm:_d},methods:{showVipPopup:function(){Nl.showVipFullOffer({source:ht})}}},gd=vd,bd=Object(d["a"])(gd,ld,ud,!1,null,null,null),Cd=bd.exports,yd={name:"MyProfile",components:{MyProfileAvatar:id,MyProfileViews:cd,MyProfileVip:Cd},data:function(){return{isLoadingStatus:!1,hasMainPhoto:!1,name:{label:"Name",field:"name",type:"input",placeholder:"Enter"},age:{label:"Age",field:"age",min:18,max:99,type:"number",placeholder:"Enter"},about:{label:"About",field:"name",type:"text",placeholder:"Enter",description:"description"},radio:{label:"Radio",field:"radio",type:"radio",options:[{title:"1",value:"1"},{title:"2",value:"2"},{title:"3",value:"4"}]}}},computed:Object(o["a"])({avatarStyles:function(){return this.hasMainPhoto?{backgroundImage:"https://avatars.mds.yandex.net/get-pdb/27625/3d12982b-61d2-4458-b5e0-f8cbe4db85cc/s1200"}:{}},uploaderClass:function(){var t=["my-profile-avatar__uploader"];return this.hasMainPhoto?t.push("my-profile-avatar__uploader_mini"):t.push("my-profile-avatar__uploader_big"),t},photoUrl:function(){return[]},isFirstTime:function(){var t="serious_profile_preq";return!localStorage.getItem(t)}},Object(J["e"])("vip",["hasVip"]),{},Object(J["e"])("feed",["moderationStatus"]),{},Object(J["c"])("feed",["needUploadPhoto","hasSupportAnswer"])),created:function(){},mounted:function(){},methods:{settings:function(){Nl.showSettings()},sliderClick:function(){console.log("premium clicked")},editField:function(t){var e="",i=t.options;Nl.editField({item:t,defaultValue:e,options:i})},openPhoto:function(){var t;this.$nav.pushInstant({activate:function(e){t=pa.open({fetch:function(){return new Promise((function(t){var e=[{id:1,url:"https://im0-tub-ru.yandex.net/i?id=aaa0c700a686125e286e3d2aac86fd91&n=33&w=225&h=150"},{id:2,url:"https://im0-tub-ru.yandex.net/i?id=aaa0c700a686125e286e3d2aac86fd91&n=33&w=225&h=150"},{id:3,url:"https://im0-tub-ru.yandex.net/i?id=aaa0c700a686125e286e3d2aac86fd91&n=33&w=225&h=150"}];t(e)}))},initialId:0,urlAlias:"url",editable:!0,animated:e})},unload:function(e){pa.close(t,e)}})}}},wd=yd,kd=Object(d["a"])(wd,Yu,Ju,!1,null,null,null),xd=kd.exports,Pd=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"loader-wrap loader-wrap-inside"},[i("loader")],1)])},$d=[],Od=(i("caad"),i("2532"),{get defaultLanguage(){return vt},get supportedLanguages(){return bt},get currentLanguage(){return Re.locale},isLangSupported:function(t){return Od.supportedLanguages.includes(t)},changeLanguage:function(t){return Od.isLangSupported(t)?Re.locale===t?Promise.resolve(t):Od.loadLanguageFile(t).then((function(e){return Re.setLocaleMessage(t,e.default||e),Re.locale=t,t})):Promise.reject(new Error("Language not supported"))},loadLanguageFile:function(t){return i("8825")("./".concat(t,".json"))}}),Sd={name:"start",components:{Loader:m,Popups:j,Push:G},computed:Object(o["a"])({},Object(J["c"])("feed",["numNotify"])),data:function(){return{isLoading:!0}},created:function(){var t=this;this.loadLocalization({}).then((function(e){t.init(e),t.isLoading=!1})).catch((function(t){console.log("app init error",t)}))},methods:{loadLocalization:function(t){var e=t.lang||Od.defaultLanguage;return new Promise((function(i){Od.changeLanguage(e).then((function(t){})).catch((function(t){console.log("loadLocalization error",t)})).finally((function(){i(t)}))}))},init:function(t){this.$store.state.config=t,this.$store.dispatch("feed/init",t),this.$store.dispatch("vip/init",t),Lt.invokeNative("set_photo_status",{fs_photo:t.avatar_status}),Lt.invokeNative("set_badge",{value:this.numNotify.toString()}),as.init(t.server_time||parseInt((new Date).getTime()/1e3)),this.$nav.redirect("/app/feed")}}},jd=Sd,Ad=Object(d["a"])(jd,Pd,$d,!1,null,null,null),Id=Ad.exports,Ld=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"signup"},[i("div",{staticClass:"signup-step signup-step_gender"},[i("div",{staticClass:"signup-logo"}),i("carousel",{attrs:{paginationEnabled:!1,perPage:1,autoplay:!0,autoplayTimeout:3e3,loop:!0}},t._l(t.slides,(function(e){return i("slide",{key:e.icon,class:"signup-slide"},[i("i",{class:"signup-slide__ico ico ico_"+e.icon}),i("div",{staticClass:"signup-slide__text"},[t._v(" "+t._s(e.text)+" ")])])})),1),i("div",{staticClass:"signup-hi"},[t._v(" "+t._s(t.$t("signup.hi"))+" ")]),i("button",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"btn ripple_white signup-btn__gender signup-btn__gender_male",on:{click:function(e){return t.setGender("m")}}},[t._v(" "+t._s(t.$t("signup.choice_male"))+" ")]),i("button",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"btn ripple_white signup-btn__gender signup-btn__gender_female",on:{click:function(e){return t.setGender("f")}}},[t._v(" "+t._s(t.$t("signup.choice_female"))+" ")]),i("label",{staticClass:"signup-agreements checkbox__label"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.agreementsChecked,expression:"agreementsChecked"}],attrs:{type:"checkbox",checked:"checked"},domProps:{checked:Array.isArray(t.agreementsChecked)?t._i(t.agreementsChecked,null)>-1:t.agreementsChecked},on:{change:function(e){var i=t.agreementsChecked,s=e.target,a=!!s.checked;if(Array.isArray(i)){var n=null,o=t._i(i,n);s.checked?o<0&&(t.agreementsChecked=i.concat([n])):o>-1&&(t.agreementsChecked=i.slice(0,o).concat(i.slice(o+1)))}else t.agreementsChecked=a}}}),t._m(0),i("span",{domProps:{innerHTML:t._s(t.$t("signup.agreement_text"))}})])],1)])},Nd=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"checkbox__box"},[i("span",{staticClass:"checkbox__mark"})])}],Ed=i("0a63"),Td=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"popup__close",on:{click:t.close}},[i("i",{staticClass:"ico ico_close-gray"})]),i("div",{staticClass:"alert-dialog__title popup__title"},[t._v(" "+t._s(t.title?t.title:"Attention!")+" ")]),i("div",{staticClass:"alert-dialog__content"},[t._v(" "+t._s(t.description)+" ")]),i("div",{staticClass:"alert-dialog__actions"},[i("div",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"alert-dialog__action btn btn_orange ripple ripple_white",on:{click:t.close}},[t._v(" "+t._s(t.btnText?t.btnText:"OK")+" ")])])])},Md=[],Ud={name:"alert-dialog",props:["title","description","onClose","btnText"],methods:{close:function(){this.$nav.back()}}},Fd=Ud,Rd=Object(d["a"])(Fd,Td,Md,!1,null,null,null),Vd=Rd.exports,qd={open:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"undefined"===t.animated&&(t.animated=!0);var e=new Rs({component:Vd,props:t,options:{myClass:"alert-dialog"}});return new Promise((function(t){sm.nav.pushInstant({unloadOther:!1,activate:function(t){oe.dispatch("popups/openPopup",{popup:e,animated:t})},unload:function(i,s){oe.dispatch("popups/closePopup",{popup:e,animated:i,onClose:t(s)})}})}))},close:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0;oe.dispatch("popups/closePopup",{popup:t,animated:e,onClose:i})}},Dd={name:"SignupGender",components:{Carousel:Ed["Carousel"],Slide:Ed["Slide"]},computed:Object(o["a"])({},Object(J["c"])("signup",["params"])),created:function(){},data:function(){return{agreementsChecked:!0,slides:[{icon:"geo",text:this.$t("signup.meet")},{icon:"dating",text:this.$t("signup.date")},{icon:"chat",text:this.$t("signup.chat")}]}},methods:{setGender:function(t){this.agreementsChecked?(this.$store.commit("signup/setGender",t),this.$nav.push("/app/signup_name")):qd.open({title:"Внимание",description:"Необходимо ваше согласие"})}}},Hd=Dd,Bd=Object(d["a"])(Hd,Ld,Nd,!1,null,null,null),Gd=Bd.exports,Wd=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"signup"},[i("div",{staticClass:"signup-step"},[i("div",[i("signup-step-back"),i("div",{staticClass:"signup-step__title"},[t._v(t._s(t.$t("signup.city")))]),i("div",{staticClass:"signup-step__field"},[t.cityName.length>0?i("div",{staticClass:"signup-step__field-clear",on:{click:t.emptySearch}}):t._e(),i("input",{ref:"inputField",staticClass:"signup-step__input",attrs:{type:"text",placeholder:t.$t("signup.city_placeholder")},domProps:{value:t.cityName},on:{focus:function(e){t.focused=!0},blur:function(e){t.focused=!1},input:t.search,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.registration(e)}}})])],1),t.citiesListShown?i("div",{staticClass:"signup-step__cities"},[t._l(t.foundCities,(function(e,s){return i("div",{staticClass:"signup-step__city",on:{click:function(i){return t.setCity(e)}}},[i("div",{staticClass:"signup-step__city-name"},[t._v(t._s(e.name))]),i("div",{staticClass:"signup-step__city-country"},[t._v(t._s(e.countryName))])])})),0!==t.foundCities.length||t.isLoadingCities?t._e():i("div",{staticClass:"signup-step__cities-empty"},[t._v(" "+t._s(t.$t("signup.error_city_not_found"))+" ")]),t.isLoadingCities?i("div",{staticClass:"signup-step__loader loader-wrap loader-wrap-inside"},[i("loader",{attrs:{small:!0}})],1):t._e()],2):i("div",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"btn signup-step__btn ripple ripple_white",class:{"signup-step__btn_active":!1!==t.checkCityId()},on:{click:t.registration}},[t._v(t._s(t.$t("done")))]),t.isLoading?i("div",{staticClass:"signup-step__loader loader-wrap loader-wrap-inside"},[i("loader",{attrs:{small:!0}})],1):t._e()])])},zd=[],Zd=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"signup-step__back ripple ripple_white",on:{click:t.back}},[i("div",{staticClass:"ico ico_arrow-left-white-24"})])},Yd=[],Jd={name:"signup-step-back",methods:{back:function(){this.$nav.go(-1)}}},Xd=Jd,Qd=Object(d["a"])(Xd,Zd,Yd,!1,null,null,null),Kd=Qd.exports,tp={getCurrentPosition:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return new Promise((function(e,i){if(t&&Lt.isSupported())Lt.invokeNative("get_location",{},(function(t){t.coordinates?e({latitude:t.coordinates.lat,longitude:t.coordinates.lon}):i({message:"failed to get position"})}));else{if(!("geolocation"in navigator))return i({message:"geolocation not supported"});navigator.geolocation.getCurrentPosition((function(t){return e({latitude:t.coords.latitude,longitude:t.coords.longitude})}),(function(t){return i(t)}))}}))}},ep={name:"SignupCity",data:function(){return{isLoading:!0,error:null,cityName:"",cityId:0,countryId:0,longitude:0,latitude:0,citiesListShown:!1,foundCities:[],cacheCities:{},isLoadingCities:!1}},mounted:function(){var t=y();t!==Ct&&this.requestPosition()},components:{SignupStepBack:Kd,Loader:m},computed:Object(o["a"])({},Object(J["c"])("signup",["params"])),methods:{requestPosition:function(){var t=this;tp.getCurrentPosition(!0).then((function(e){t.findCityByCoordinations(e.latitude,e.longitude)})).catch((function(){t.search(),t.isLoading=!1}))},search:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!==e&&(this.cityName=e.target.value);var i=this.cityName;i=i.trim(),this.showListOfCities(),void 0!==this.cacheCities[i]?(this.isLoadingCities=!1,this.foundCities=this.cacheCities[i]):(this.isLoadingCities=!0,wi().then((function(e){t.isLoadingCities=!1,t.cacheCities[i]=e,i===t.cityName&&(t.foundCities=e)})).catch((function(){t.isLoadingCities=!1})))},findCityByCoordinations:function(t,e){var i=this;yi(t,e).then((function(t){var e=t;e?(i.setCity(e),i.isLoading=!1):(i.search(),i.isLoading=!1)})).catch((function(){i.search(),i.isLoading=!1}))},setCity:function(t){this.cityName=t.name,this.cityId=t.id,this.$store.commit("signup/setCityId",this.cityId),this.$store.commit("signup/setCityName",this.cityName),this.hideListOfCities()},emptySearch:function(){this.cityName="",this.search()},showListOfCities:function(){this.citiesListShown=!0},hideListOfCities:function(){this.citiesListShown=!1},checkCityId:function(){return 0!==this.cityId},registration:function(){var t=this;this.isLoading=!0,ki(this.params).then((function(e){t.$nav.push("/app/tutorial")})).catch((function(t){}))}}},ip=ep,sp=Object(d["a"])(ip,Wd,zd,!1,null,null,null),ap=sp.exports,np=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"signup"},[i("div",{staticClass:"signup-step"},[i("div",[i("signup-step-back"),i("div",{staticClass:"signup-step__title"},[t._v(t._s(t.$t("signup.name")))]),i("div",{staticClass:"signup-step__field"},[i("input",{ref:"inputField",staticClass:"signup-step__input",class:{"signup-step__input_invalid":null!=t.error},attrs:{type:"text",maxlength:"255",placeholder:t.$t("signup.name_placeholder")},domProps:{value:t.userName},on:{focus:function(e){t.focused=!0},blur:function(e){t.focused=!1},input:t.input,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.nextStep(e)}}}),t.error?i("div",{staticClass:"signup-step__invalid"},[t._v(t._s(t.error))]):t._e()])],1),i("button",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"btn signup-step__btn ripple ripple_white",class:{"signup-step__btn_active":!1!==t.isBtnActive},on:{click:t.nextStep}},[t._v(t._s(t.$t("done")))])])])},op=[],rp={name:"SignupName",components:{SignupStepBack:Kd},data:function(){return{focused:!1,error:null,userName:"",isBtnActive:!1}},computed:Object(o["a"])({},Object(J["c"])("signup",["params"])),created:function(){this.userName=this.params.name},mounted:function(){this.$refs.inputField.focus()},methods:{input:function(t){this.userName=t.target.value,this.checkName()},back:function(){this.$nav.go(-1)},nextStep:function(){this.checkName()?this.setName():this.$refs.inputField.focus()},checkName:function(){var t=!1;return this.userName.length>0?(this.isBtnActive=!0,this.error=null,t=!0):(this.isBtnActive=!1,this.error=this.$t("signup.error_name_min_length")),t},setName:function(){this.$store.commit("signup/setName",this.userName),this.$nav.push("/app/signup_age")}}},cp=rp,lp=Object(d["a"])(cp,np,op,!1,null,null,null),up=lp.exports,dp=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"signup"},[i("div",{staticClass:"signup-step"},[i("div",[i("signup-step-back"),i("div",{staticClass:"signup-step__title"},[t._v(t._s(t.$t("signup.age")))]),i("div",{staticClass:"signup-step__field"},[i("input",{key:t.keyInput,ref:"inputField",staticClass:"signup-step__input",class:{"signup-step__input_invalid":null!=t.error},attrs:{type:"number",placeholder:t.$t("signup.age_placeholder")},domProps:{value:t.userAge},on:{focus:function(e){t.focused=!0},blur:function(e){t.focused=!1},input:t.input,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.nextStep(e)}}}),t.error?i("div",{staticClass:"signup-step__invalid"},[t._v(t._s(t.error))]):t._e()])],1),i("div",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"btn signup-step__btn ripple ripple_white",class:{"signup-step__btn_active":!1!==t.isBtnActive},on:{click:t.nextStep}},[t._v(t._s(t.$t("done")))])])])},pp=[],mp={name:"SignupAge",components:{SignupStepBack:Kd},data:function(){return{focused:!1,error:null,userAge:"",isBtnActive:!1,maxAge:150,minAge:18,keyInput:"ageInput"}},computed:Object(o["a"])({},Object(J["c"])("signup",["params"])),created:function(){0!==this.params.age&&(this.userAge=this.params.age)},mounted:function(){this.$refs.inputField.focus()},methods:{input:function(t){this.userAge=t.target.value,String(this.userAge).length>=2&&this.checkAge()},back:function(){this.$nav.go(-1)},nextStep:function(){this.checkAge()?this.setAge():this.$refs.inputField.focus()},checkAge:function(){var t=!1,e=Math.floor(Number(this.userAge));return isNaN(e)?this.error=this.$t("signup.error_age_wrong_format"):e<18?this.error=this.$t("signup.error_age_min_value",{min_age:this.minAge}):e>150?this.error=this.$t("signup.error_age_max_value",{max_age:this.maxAge}):(this.error=null,t=!0),this.isBtnActive=t,t},setAge:function(){this.$store.commit("signup/setAge",this.userAge),this.$nav.push("/app/signup_city")}}},hp=mp,fp=Object(d["a"])(hp,dp,pp,!1,null,null,null),_p=fp.exports,vp=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"messenger"},[t._m(0),i("contacts")],1)},gp=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"messenger__top"},[t._v(" Сообщения "),i("div",{staticClass:"messenger__counter"},[t._v("+1")])])}],bp=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"scrollWrapper",staticClass:"messenger-contacts-wrapper"},[t.isEmpty?i("div",{staticClass:"messenger-contacts-empty"},[i("div",{staticClass:"messenger-contacts-empty__decor"}),i("div",{staticClass:"messenger-contacts-empty__title"},[t._v(" Еще ни с кем не общались? ")]),i("div",{staticClass:"messenger-contacts-empty__desc"},[t._v(" Листайте карточки, чтобы найти собеседника ")]),i("div",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"messenger-contacts-empty__btn btn btn_orange ripple ripple_white",on:{click:function(e){return t.$nav.push("/app/feed")}}},[t._v(" Листать карточки ")])]):t._l(t.contacts,(function(t){return i("contact",{key:t.id,attrs:{contact:t}})})),t.isLoading?i("contacts-loader"):t._e()],2)},Cp=[],yp=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"longclick",rawName:"v-longclick",value:t.longClickHandler,expression:"longClickHandler"},{name:"touch",rawName:"v-touch"}],staticClass:"messenger-contact",class:t.classes,on:{click:t.openChat}},[i("div",{staticClass:"messenger-contact__ava-wrapper"},[i("div",{staticClass:"messenger-contact__ava",style:{backgroundImage:"url("+t.avaSrc+")"}},[t.contact.user.online?i("div",{staticClass:"online-status"}):t._e()])]),i("div",{staticClass:"messenger-contact__right-side"},[i("div",{staticClass:"messenger-contact__title"},[i("div",{staticClass:"messenger-contact__name",domProps:{innerHTML:t._s(t.contact.user.name)}}),t.contact.lastmess?i("div",{staticClass:"messenger-contact__date"},[t._v(" "+t._s(t.date)+" ")]):t._e()]),t.contact.lastmess?i("contact-message",{attrs:{contact:t.contact}}):t._e()],1)])},wp=[],kp=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"messenger-contact__message"},[i("div",{staticClass:"messenger-contact__message-text ellipsis",domProps:{innerHTML:t._s(t.text)}}),!t.isMine&&t.contact.new>0?i("div",{staticClass:"messenger-contact__count"},[t._v("+"+t._s(t.contact.new))]):t.isMine&&t.contact.new>0?i("div",{staticClass:"ico2 ico2_check-read"}):t._e()])},xp=[],Pp={props:["contact"],computed:{isMine:function(){return 111===this.contact.lastmess.fromId},text:function(){var t="";switch(this.isMine&&(t+="Вы: "),this.type){case"image":t+='<div class="ico2 ico2_photo-black-16"></div> Фото';break;default:t+=this.contact.lastmess.text}return t},type:function(){if(!this.contact.lastmess.attaches)return"text";for(var t in this.contact.lastmess.attaches)if(this.contact.lastmess.attaches.hasOwnProperty(t))return"image"===this.contact.lastmess.attaches[t].type?"image":"other"}}},$p=Pp,Op=Object(d["a"])($p,kp,xp,!1,null,null,null),Sp=Op.exports,jp={props:["contact"],components:{ContactMessage:Sp},data:function(){return{}},computed:{classes:function(){var t=[];return this.contact.new>0?t.push("messenger-contact_unread-theirs"):this.contact.unread&&t.push("messenger-contact_unread-mine"),this.contact.user.online&&t.push("messenger-contact_online"),t},avaSrc:function(){return this.contact.user.avatars.s2},date:function(){return Us(1e3*this.contact.lastmess.time)}},methods:{longClickHandler:function(){this.$toasted.show("LONGCLICK")},openChat:function(){this.$nav.push("/app/messenger/"+this.contact.user.id)}}},Ap=jp,Ip=Object(d["a"])(Ap,yp,wp,!1,null,null,null),Lp=Ip.exports,Np=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"p_m row row_justify-content-center"},[i("loader",{attrs:{small:!0}})],1)},Ep=[],Tp={components:{Loader:m}},Mp=Tp,Up=Object(d["a"])(Mp,Np,Ep,!1,null,null,null),Fp=Up.exports,Rp={components:{ContactsLoader:Fp,Contact:Lp},props:["settings"],data:function(){return{contactsList:[]}},computed:Object(o["a"])({},Object(J["e"])("messenger",{contacts:function(t){return t.contacts},isLoading:function(t){return t.contactsIsLoading},hasNext:function(t){return t.contactsHasNext}}),{isEmpty:function(){return!1}}),watch:{},created:function(){this.loadContactsBatch()},mounted:function(){this.$refs.scrollWrapper.addEventListener("scroll",this.onScroll)},methods:Object(o["a"])({},Object(J["b"])("messenger",["loadContactsBatch","loadContactsWithNewExtraParams"]),{onScroll:function(){if(this.hasNext&&!this.isLoading){var t=this.$refs.scrollWrapper.clientHeight,e=this.$refs.scrollWrapper.scrollHeight,i=this.$refs.scrollWrapper.scrollTop;e-t-i<20&&this.loadContactsBatch()}}})},Vp=Rp,qp=Object(d["a"])(Vp,bp,Cp,!1,null,null,null),Dp=qp.exports,Hp={components:{Contacts:Dp},data:function(){return{currentTabId:0}},computed:{},mounted:function(){},methods:{}},Bp=Hp,Gp=Object(d["a"])(Bp,vp,gp,!1,null,null,null),Wp=Gp.exports,zp=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tutorial"},[t._m(0),i("div",{staticClass:"tutorial-next"},[i("div",{directives:[{name:"touch",rawName:"v-touch"}],staticClass:"tutorial-next__btn ripple ripple_lightblue",on:{click:t.next}},[t._v(" Вперед "),i("div",{staticClass:"ico ico_pointer-right-lightblue-20"})])])])},Zp=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"tutorial-image"}),i("div",{staticClass:"tutorial-content"},[i("div",{staticClass:"tutorial-title"},[t._v("Заяви о себе")]),i("div",{staticClass:"tutorial-text"},[t._v(" Природа мужчины — это всегда активные действия, это борьба, преодоление сопротивления, самосовершенствование, завоевание. Можно еще пару строк добавить про всю эту лирику, сильных мужчин и прочее ")])])])}],Yp={name:"tutorial",mounted:function(){null!==localStorage.getItem("tutorial-shown")&&this.goToFeed()},data:function(){return{image:"/app/img/tutorial.jpg"}},methods:{next:function(){localStorage.setItem("tutorial-shown",1),this.goToFeed()},goToFeed:function(){this.$nav.push("/app/feed")}}},Jp=Yp,Xp=Object(d["a"])(Jp,zp,Zp,!1,null,null,null),Qp=Xp.exports,Kp=i("a519"),tm=function(t){function e(){return Object(L["a"])(this,e),Object(xi["a"])(this,Object(Pi["a"])(e).apply(this,arguments))}return Object($i["a"])(e,t),Object(N["a"])(e,[{key:"beforeActive",value:function(t){var e=this;t.intent,t.next;return new Promise((function(t,i){void 0!==e.config.willActivate?e.config.willActivate({resolve:t,reject:i,navigation:e.nav}):t()}))}},{key:"doActivate",value:function(t){if(this.component)throw new Error("ExtendHandler: Component already created");var e=t.animated;this.component=Object.assign({},this.config.component,{nav:sm,mixins:[{beforeCreate:function(){this.component=this}}]});var i=this.config.advancedOptions||{};this.extend=new Rs({component:this.component,options:Object(o["a"])({myClass:"popup_extend"},i)}),oe.dispatch("popups/openPopup",{popup:this.extend,animated:e}),this.afterActivate(t)}},{key:"afterActivate",value:function(t){var e=t.intent;this.config.didActivated&&this.config.didActivated(e)}},{key:"activate",value:function(t){var e=this;this.beforeActive(t).then((function(){e.doActivate(t),e.afterActivate(t)}))}},{key:"unload",value:function(t){var e=t.animated,i=t.intent;this.extend&&(oe.dispatch("popups/closePopup",{popup:this.extend,animated:e}),this.extend=null,this.component=null,this.config.didUnloaded&&this.config.didUnloaded(i))}},{key:"update",value:function(t){var e=t.intent;e.options.ignoreUpdate||this.component&&this.component.navUpdated&&this.component.navUpdated()}},{key:"append",value:function(t){var e=this;if(!this.component)throw new Error("ExtendContainer: No component");s["default"].nextTick((function(){e.component.navViewComponent=t}))}},{key:"remove",value:function(){var t=this;if(!this.component)throw new Error("ExtendContainer: No component");s["default"].nextTick((function(){t.component&&(t.component.navViewComponent=null)}))}}]),e}(Kp["NavigationHandler"]);s["default"].use(qe.a);var em=function(t){var e=t.resolve;t.reject,t.navigation;e()},im=new qe.a({baseURL:"/app/",defaultHandlerConstructor:tm},[{name:"root",path:"/",component:Id},{path:"/signup",component:Gd,construct:tm,willActivate:em,didActivated:function(){return oe.commit("setNavigationTab",dt)}},{path:"/signup_name",component:up,construct:tm,willActivate:em,didActivated:function(){return oe.commit("setNavigationTab",dt)}},{path:"/signup_age",component:_p,construct:tm,willActivate:em,didActivated:function(){return oe.commit("setNavigationTab",dt)}},{path:"/signup_city",component:ap,construct:tm,willActivate:em,didActivated:function(){return oe.commit("setNavigationTab",dt)}},{name:"tutorial",path:"/tutorial",construct:tm,component:Qp},{name:"feed",path:"/feed",component:ku,didActivated:function(){return oe.commit("setNavigationTab",rt)},children:[{path:"profile",construct:tm,component:Ho}]},{name:"messenger",path:"/messenger",component:Wp,didActivated:function(){return oe.commit("setNavigationTab",lt)},children:[{path:":id",construct:tm,component:En}]},{name:"incoming",path:"/incoming",component:Mu,didActivated:function(){return oe.commit("setNavigationTab",ct)},children:[{path:":id",construct:tm,component:Zu}]},{name:"profile",path:"/profile",component:xd,didActivated:function(){return oe.commit("setNavigationTab",ut)}}]);oe.registerModule("nav",{state:{record:null,intent:null}}),im.nav.eventBus.on("active",(function(t){var e=t.record,i=t.intent;oe.state.nav.intent=i,oe.state.nav.record=e}));var sm=im,am={bind:function(t,e){var i="touch";"string"===typeof e.value&&(i=e.value),t.classList.add("no-tap-highlight"),e.modifiers&&e.modifiers.notap&&(t.style["-webkit-tap-highlight-color"]="transparent"),t.addEventListener("touchstart",(function(){t.classList.add(i)})),t.addEventListener("touchend",(function(){t.classList.remove(i)}))}},nm={bind:function(t,e){t.classList.add("g-file-wrapper");var i=t.querySelector(".g-file-input");i&&i.remove();var s=window.document.createElement("input");s.type="file",s.className="g-file-input",s.accept="image/*",s.addEventListener("change",(function(){e.value(s)})),t.appendChild(s)}},om=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return t>=e?"".concat(e-1,"+"):t},rm={install:function(t){Object.defineProperty(t.prototype,"$nativeStat",{get:function(){return rm}})},trackMetricaEvent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Lt.invokeNative("track_metrica_event",{name:t,params:e})},trackFirebaseEvent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Lt.invokeNative("track_firebase_event",{name:t,params:e})},trackAppsFlyerEvent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Lt.invokeNative("track_appsflyer_event",{name:t,params:e})},trackCommonEvent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};rm.trackMetricaEvent(t,e),rm.trackFirebaseEvent(t,e)},reportMetricaUserProperty:function(t){Lt.invokeNative("report_metrica_user_property",t)},reportAppsFlyerUserProperty:function(t){Lt.invokeNative("report_appsflyer_user_property",t)},reportFirebaseUserProperty:function(t){Lt.invokeNative("report_firebase_user_property",t)}},cm=rm,lm={name:"ComponentView",props:{component:{required:!0},props:Object},render:function(t){var e={props:this.props};return t(this.component,e,this.$slots.default)}},um=i("616f"),dm=i("a65d"),pm=i.n(dm);i("b107");s["default"].config.productionTip=!1;var mm=Object(um["longClickDirective"])({delay:1e3,interval:0});s["default"].component("ComponentView",lm),s["default"].directive("touch",am),s["default"].directive("file-upload",nm),s["default"].directive("longclick",mm),s["default"].filter("plural",Es),s["default"].filter("counterLimit",om),s["default"].use(Wt),s["default"].use(cm),s["default"].use(M),s["default"].use(pm.a,{position:"bottom-center",duration:2e3}),new s["default"]({el:"#app",store:oe,i18n:Re,nav:sm,render:function(t){return t(Me)}})},8825:function(t,e,i){var s={"./ru_RU.json":"a8e2"};function a(t){return Promise.resolve().then((function(){if(!i.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}var a=s[t];return i.t(a,3)}))}a.keys=function(){return Object.keys(s)},a.id="8825",t.exports=a},a8e2:function(t){t.exports=JSON.parse('{"loading":"Загрузка","done":"Готово","search_gender_female":"Девушки","search_gender_male":"Мужчины","for_him":"него","for_her":"неё","request_position":{"title":"Разрешить определять вашу геопозицию?"},"signup":{"hi":"Привет! Ты...","choice_female":"Женщина","choice_male":"Мужчина","agreement_text":"Принимаю правила обработки <a href=\'\'>персональных данных</a> и <a href=\'\'>пользовательское соглашение</a>","meet":"Встречайся","date":"Знакомься","chat":"Общайся","name":"Меня зовут","name_placeholder":"Введите имя","error_name_min_length":"Имя не может быть пустым","age":"Мне","age_placeholder":"Введите возраст","error_age_min_value":"Вы должны быть не моложе {min_age}","error_age_max_value":"Мы не уверены, что вам больше {max_age}","error_age_wrong_format":"Возраст должен включать только цифры","city":"Мой город","city_placeholder":"Введите город","error_city_empty":"Необходимо указать город","error_city_not_found":"Ничего не найдено","signup_process":"Всё почти готово!"},"personal_pronouns":{"he":"он","she":"она","him":"ему","her":"ей"},"question":{"head":"{partner} считает, что...","partner_male":"Ваш спутник","partner_female":"Ваша спутница"},"card":{"like":"Нравится","dislike":"Не нравится","show_me":"Показать меня","care":"Ухаживать"},"swipe":{"like":"Смахивание карточки <span>вправо</span> означает, что {pronouns} вам нравится","dislike":"Смахивание карточки <span>влево</span> означает, что {pronouns} вам не нравится","dislike_sub":"Не волнуйтесь,<br>{pronouns} не узнает об этом","like_him":"он","like_her":"она","btn":"Спасибо, понятно"},"card_vip":{"title":"Стань успешнее<br><span>на 85%</span><br><h2>со статусом VIP</h2>","btn":"Узнать подробности"},"setting":{"filters":"Фильтры"},"waiters":{"watch_all":"Посмотреть всех с VIP","watch_vip":"Больше внимания с VIP","progress_aim":"До {aim} ещё {aim_distance}","progress_empty":"Пролистайте {aim_distance}","aim_cards_count":"{count} карточек"},"filter":{"head":"Фильтр","action":"Сохранить","age":"Возраст"},"empty_feed":{"title":"{search_gender} закончились","msg":"Нужно немного подождать","btn":"Перейти в Фильтры"},"feed_limit":{"title":"Вы просмотрели за сегодня 1000 {gender}!","msg":"Вы сможете продолжить поиск второй половинки завтра","male":"мужчин","female":"женщин"},"nav":{"meeting":"Знакомства","sympathy":"Симпатии","message":"Сообщения","profile":"Профиль"},"main_photo":{"msg_male":"{name} интересуется только мужчинами с фото","msg_female":"{name} интересуется только женщинами с фото","bnt_add":"Добавить фото","bnt_later":"Загрузить фото<br>позже"},"real_photo":{"msg":"Загрузите фото, на котором хорошо видно Ваше лицо, и продолжайте общаться","subtitle":"Ваше фото не принято","btn_add":"Выбрать другое фото","btn_later":"Не сейчас"},"mutual_symp":{"title":"Это взаимно!","subtitle":"Вы и {name} понравились друг другу!","placeholder":"Смелее, напишите {pronouns}","btn":"Продолжить"},"photo_request":{"title":"Загрузите фото, чтобы начать знакомиться всерьез","subtitle":"С фотографией шансы найти пару в 10 раз выше","btn":"Выбрать фото"},"review":{"title":"{name},<br>Нравится ли вам “Всерьез”?","action1":"Оценить","action2":"Оценить позже","positive":{"title":"Отличная оценка!","subtitle":"Спасибо, нам приятно!<br>Хотите оценить в Google Play?"},"negative":{"title":"Ваша оценка:","subtitle":"Посоветуете, что нам следует улучшить?","placeholder":"Ваш комментарий","action1":"Отправить комментарий","action2":"Не сейчас"},"result":{"title":"Спасибо, мы получили<br>ваш отзыв!"}},"complaint":{"title":"Что здесь не так?","btn":"Пожаловаться","check":"Запретить пользователю доступ к моей странице","support":"Служба поддержки","result":{"title":"Спасибо<br>за бдительность","msg":"Теперь с этой проблемой<br>разберемся мы"}},"message_limit":{"title":"Станьте VIP и общайтесь без ограничений","info":"Вы не можете написать {pronouns}. Вы можете отправить не более {count} запросов на общение в день","action_activate":"Активировать VIP","action_become":"Стать VIP"},"notification":{"msg":"Сообщение отправлено","vip":"Вы получили статус VIP"},"incoming":{"tab":"Я нравлюсь","notify":"Вы VIP и можете видеть тех, кому понравились","new":"Новый","empty":{"photo_title":"У вас нет фотографии...","photo_msg":"Добавьте фото, чтобы получать сипатии от {gender}!","male":"мужчин","female":"женщин","like":"Переходите на страницу знакомств и выбирайте симпатию","first_m":"первым","first_w":"первой","bnt_add":"Добавить фото","btn_view":"Смотреть фото"},"offer":{"msg":"Пользователи со статусом VIP сразу видят, кому они понравились!","btn_activate":"Активировать VIP","btn_become":"Стать VIP"}},"locked_user":{"title":"считает вас {gender}","male":"привлекательным","female":"привлекательной","subtitle":"Продолжайте смотреть фото, чтобы бесплатно найти пару, или станьте VIP и ответьте {pronouns} сразу","btn_open":"Открыть симпатию","btn_play":"Играть в знакомства"},"mutual":{"title":"Ваши пары","title_new":"Новые пары","empty":"Ставьте “Нравится” и найдите свою пару"},"messenger":{"tab_all":"Все","tab_online":"Онлайн","online_empty":"Кажется, ваши собеседники сейчас не в сети"},"suggestions":{"title":"Еще ни с кем не общались?","subtitle_m":"Напишите одному из этих мужчин","subtitle_f":"Напишите одной из этих женщин"},"messenger_chat":{"empty_m":"Напишите ему первой...","empty_f":"Напишите ей первым...","placeholder":"Напишите {pronouns}","mutual_label":"Это взаимно!","mutual_you_and":"Вы и {name}","mutual_msg":"<span>понравились друг другу</span> {dateDiff}"},"chat_photo_block":{"title":"Чтобы написать {pronouns},<br>добавьте фотографию","btn":"Выбрать фото"},"mutual_message":{"title":"Это взаимно!","text":"Вы понравились друг другу <span>{dateDiff}</span>"},"profile":{"link":"Просмотреть профиль","btn_edit":"Редактировать","btn_vip":"Получите<br>полный доступ","vip_activated":"активирован","btn_settings":"Настройки"},"banner_photo":{"title":"Загрузите фото, чтобы быстрее найти пару","btn":"Выбрать фото"},"profile_editor":{"title":"Редактирование","btn_view":"Просмотр","male":"М","female":"Ж","field_name":"Имя","field_age":"Возраст, пол","field_target":"Цель знакомства","field_sport":"Спорт","field_music":"Музыка","field_movie":"Кино","field_books":"Книги","field_hobby":"Хобби","field_city":"Город","section_about":"О себе","section_interests":"Мои интересы","section_location":"Местоположение","about_description":"Напишите что-нибудь интересное о себе","about_description2":"Расскажите что-то, что будет интересно узнать о вас при знакомстве","about_placeholder":"Мне нравится / я умею","btn_edit":"Править","btn_add":"Добавить","user_name":{"label":"Ваше имя","placeholder":"Мое имя"},"geo":{"placeholder":"Мой город","message":"Выбрать другой город","error":"Не удалось определить ваши координаты"}},"field_editor":{"action_save":"Сохранить","name_error_incorrect":"Напишите настоящее имя","name_error_long":"Слишком длинное имя","name_error_link":"Ссылки в имени запрещены","name_invalid":"Недопустимое имя","not_set":"Не указано"},"photo_gallery":{"title":"Скорее добавьте свое фото","subtitle":"Без него вас никто не увидит","btn_photo":"Добавить фото"},"photo_viewer":{"btn_add":"Загрузить новое фото","btn_main":"Сделать главным","btn_delete":"Удалить"},"app_settings":{"title":"Настройки","field_terms":"Пользовательское соглашение","privacy_policy":"Политика конфиденциальности","support":"Помощь","delete":"Удалить анкету"},"user_profile":{"goals":"Цель знакомства","interests":"Мои интересы","job":"Профессия","about":"Ещё обо мне","city":"Где я сейчас","more":"еще {count} фото","complain":"Пожаловаться","require_photo":"Добавьте фото, чтобы написать {pronouns}","dialog_placeholder":"Напишите {pronouns} сейчас","dialog_locked":"Станьте VIP и напишите {pronouns} сейчас"},"vip_offer":{"title":"<span>VIP-статус</span><br>даёт преимущества","profit":["Бесплатный буст в каждой игре","Отправка сообщения с <span>ПОДАРКОМ</span>\\nв случае победы","Сообщения с <span>ПОДАРКАМИ</span> в чате","Больше внимания","Очередь из девушек, которые ждут вашего внимания"],"price":"{period} неделя за {price}","trial":"Попробуйте <span>{count}</span> <span>дня бесплатно</span>","discount":"Скидка <span>{count}%</span> только сейчас","discount_price":"{period} неделя за <span>{old_price}</span> <span>{price}</span>","restore":"Восстановить покупки","trial_price":"затем <strong>{price}</strong> в месяц","discount_ios_price":"<strike>{old_price}</strike> <strong>{price}</strong> в месяц"},"billing":{"android":{"trial":"Стать VIP","buy":"Стать VIP"},"card":{"trial":"Активировать картой","buy":"Оплатить по карте"},"ios":{"trial":"Подписаться","buy":"Подписаться"}},"discount_close":{"title":"Вы уверены, что хотите отказаться от скидки?","confirm":"Отказаться от скидки","reject":"Получить скидку {count}%"},"push_permission":{"message":"{my_name}, <br>Смахивание <span>вправо</span> означает, что {user_name} вам нравится. Хотите получить уведомление, когда {gender} вам ответит?","male":"он","female":"она","accept":"Да, хочу","decline":"Нет, спасибо"},"chat":{"exception":{"blacklisted":"Вы не можете написать этому пользователю, потому что он внес вас в черный список."}},"delete_profile":{"title":"Удалить анкету и все контакты?","message":"Это действие нельзя отменить<br><br>Удалив анкету, вы потеряете:<br><ul><li>Историю сообщений</li><li>Симпатии</li><li>VIP (если активен)</li></ul>","bnt_ok":"Удалить анкету","btn_cancel":"Отмена"},"upload_error":{"title":"Извините, не удалось загрузить фото","message":"Обратите внимание, что минимальный размер картинки должен быть 256x256 и размер файла не больше 20 Мб."},"date":{"months":["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],"yesterday":"вчера"},"start_promo":{"title":"Добро пожаловать!<br>Всерьез только начинается","counter":"<strong>{number}</strong> пользователей из {country} сегодня создали анкеты","message":"Не забудьте заглянуть завтра, чтобы встретить больше новых людей","button":"Начать знакомиться","countries":{"ru":"России","br":"Бразилии","tr":"Турции","id":"Индонезии","fr":"Франции","in":"Индии","us":"США","de":"Германии","gb":"Великобритания","ca":"Канады"},"country":"России"}}')},b107:function(t,e,i){}});
//# sourceMappingURL=app.70edf02e.js.map